"use strict";(self.webpackChunkTestApp=self.webpackChunkTestApp||[]).push([[792],{99:(af,q_,ga)=>{var cr={};ga.r(cr),ga.d(cr,{AbortException:()=>V5,AnnotationEditorLayer:()=>B5,AnnotationEditorParamsType:()=>j5,AnnotationEditorType:()=>pP,AnnotationEditorUIManager:()=>H5,AnnotationLayer:()=>U5,AnnotationMode:()=>$5,ColorPicker:()=>z5,DOMSVGFactory:()=>W5,DrawLayer:()=>G5,FeatureTest:()=>q5,GlobalWorkerOptions:()=>gP,ImageKind:()=>Y5,InvalidPDFException:()=>K5,MissingPDFException:()=>X5,OPS:()=>Q5,OutputScale:()=>Z5,PDFDataRangeTransport:()=>J5,PDFDateString:()=>e6,PDFWorker:()=>t6,PasswordResponses:()=>n6,PermissionFlag:()=>i6,PixelsPerInch:()=>r6,RenderingCancelledException:()=>s6,TextLayer:()=>o6,UnexpectedResponseException:()=>a6,Util:()=>l6,VerbosityLevel:()=>mP,XfaLayer:()=>c6,build:()=>u6,createValidAbsoluteUrl:()=>d6,fetchData:()=>h6,getDocument:()=>vP,getFilenameFromUrl:()=>f6,getPdfFilenameFromUrl:()=>p6,getXfaPageViewport:()=>g6,isDataScheme:()=>m6,isPdfFile:()=>v6,noContextMenu:()=>y6,normalizeUnicode:()=>_6,setLayerDimensions:()=>b6,shadow:()=>w6,version:()=>kh});var lf={};function Y_(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function S(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){Y_(s,i,r,o,a,"next",l)}function a(l){Y_(s,i,r,o,a,"throw",l)}o(void 0)})}}function cf(n,e){return Object.is(n,e)}ga.r(lf),ga.d(lf,{AnnotationLayerBuilder:()=>TY,DownloadManager:()=>PY,EventBus:()=>RY,FindState:()=>NY,GenericL10n:()=>fR,LinkTarget:()=>ha,PDFFindController:()=>pR,PDFHistory:()=>kY,PDFLinkService:()=>gR,PDFPageView:()=>OY,PDFScriptingManager:()=>FY,PDFSinglePageViewer:()=>mR,PDFViewer:()=>vR,ProgressBar:()=>LY,RenderingStates:()=>VY,ScrollMode:()=>BY,SimpleLinkService:()=>jY,SpreadMode:()=>HY,StructTreeLayerBuilder:()=>UY,TextLayerBuilder:()=>$Y,XfaLayerBuilder:()=>zY,parseQueryString:()=>WY});let ft=null,ma=!1,uf=1;const Tt=Symbol("SIGNAL");function Z(n){const e=ft;return ft=n,e}const Os={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function va(n){if(ma)throw new Error("");if(null===ft)return;ft.consumerOnSignalRead(n);const e=ft.nextProducerIndex++;Pc(ft),e<ft.producerNode.length&&ft.producerNode[e]!==n&&ba(ft)&&Tc(ft.producerNode[e],ft.producerIndexOfThis[e]),ft.producerNode[e]!==n&&(ft.producerNode[e]=n,ft.producerIndexOfThis[e]=ba(ft)?Q_(n,ft,e):0),ft.producerLastReadVersion[e]=n.version}function ya(n){if((!ba(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==uf)){if(!n.producerMustRecompute(n)&&!Ic(n))return void Mc(n);n.producerRecomputeValue(n),Mc(n)}}function K_(n){if(void 0===n.liveConsumerNode)return;const e=ma;ma=!0;try{for(const t of n.liveConsumerNode)t.dirty||FR(t)}finally{ma=e}}function X_(){return!1!==ft?.consumerAllowSignalWrites}function FR(n){n.dirty=!0,K_(n),n.consumerMarkedDirty?.(n)}function Mc(n){n.dirty=!1,n.lastCleanEpoch=uf}function Fs(n){return n&&(n.nextProducerIndex=0),Z(n)}function _a(n,e){if(Z(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(ba(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Tc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Ic(n){Pc(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(ya(t),i!==t.version))return!0}return!1}function xc(n){if(Pc(n),ba(n))for(let e=0;e<n.producerNode.length;e++)Tc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Q_(n,e,t){if(Z_(n),0===n.liveConsumerNode.length&&J_(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=Q_(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Tc(n,e){if(Z_(n),1===n.liveConsumerNode.length&&J_(n))for(let i=0;i<n.producerNode.length;i++)Tc(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Pc(r),r.producerIndexOfThis[i]=e}}function ba(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Pc(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Z_(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function J_(n){return void 0!==n.producerNode}const Lr=Symbol("UNSET"),Ls=Symbol("COMPUTING"),ur=Symbol("ERRORED"),VR={...Os,value:Lr,dirty:!0,error:null,equal:cf,kind:"computed",producerMustRecompute:n=>n.value===Lr||n.value===Ls,producerRecomputeValue(n){if(n.value===Ls)throw new Error("Detected cycle in computations.");const e=n.value;n.value=Ls;const t=Fs(n);let i,r=!1;try{i=n.computation(),Z(null),r=e!==Lr&&e!==ur&&i!==ur&&n.equal(e,i)}catch(s){i=ur,n.error=s}finally{_a(n,t)}r?n.value=e:(n.value=i,n.version++)}};let eb=function BR(){throw new Error};function tb(n){eb(n)}function Nc(n,e){X_()||tb(n),n.equal(n.value,e)||(n.value=e,function UR(n){n.version++,function OR(){uf++}(),K_(n)}(n))}const hf={...Os,equal:cf,value:void 0,kind:"signal"};let ff;function kc(){return ff}function dr(n){const e=ff;return ff=n,e}const pf=Symbol("NotFound");function ve(n){return"function"==typeof n}function gf(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Error;const mf=gf(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Oc(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class kt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(ve(i))try{i()}catch(s){e=s instanceof mf?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{ob(s)}catch(o){e=e??[],o instanceof mf?e=[...e,...o.errors]:e.push(o)}}if(e)throw new mf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ob(e);else{if(e instanceof kt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Oc(t,e)}remove(e){const{_finalizers:t}=this;t&&Oc(t,e),e instanceof kt&&e._removeParent(this)}}kt.EMPTY=(()=>{const n=new kt;return n.closed=!0,n})();const rb=kt.EMPTY;function sb(n){return n instanceof kt||n&&"closed"in n&&ve(n.remove)&&ve(n.add)&&ve(n.unsubscribe)}function ob(n){ve(n)?n():n.unsubscribe()}const Vr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Fc={setTimeout(n,e,...t){const{delegate:i}=Fc;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Fc;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ab(n){Fc.setTimeout(()=>{const{onUnhandledError:e}=Vr;if(!e)throw n;e(n)})}function vf(){}const YR=yf("C",void 0,void 0);function yf(n,e,t){return{kind:n,value:e,error:t}}let Br=null;function Lc(n){if(Vr.useDeprecatedSynchronousErrorHandling){const e=!Br;if(e&&(Br={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Br;if(Br=null,t)throw i}}else n()}class _f extends kt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,sb(e)&&e.add(this)):this.destination=tN}static create(e,t,i){return new wf(e,t,i)}next(e){this.isStopped?Ef(function XR(n){return yf("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ef(function KR(n){return yf("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ef(YR,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ZR=Function.prototype.bind;function bf(n,e){return ZR.call(n,e)}class JR{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Vc(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Vc(i)}else Vc(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Vc(t)}}}class wf extends _f{constructor(e,t,i){let r;if(super(),ve(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Vr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&bf(e.next,s),error:e.error&&bf(e.error,s),complete:e.complete&&bf(e.complete,s)}):r=e}this.destination=new JR(r)}}function Vc(n){Vr.useDeprecatedSynchronousErrorHandling?function QR(n){Vr.useDeprecatedSynchronousErrorHandling&&Br&&(Br.errorThrown=!0,Br.error=n)}(n):ab(n)}function Ef(n,e){const{onStoppedNotification:t}=Vr;t&&Fc.setTimeout(()=>t(n,e))}const tN={closed:!0,next:vf,error:function eN(n){throw n},complete:vf},Cf="function"==typeof Symbol&&Symbol.observable||"@@observable";function jr(n){return n}function lb(n){return 0===n.length?jr:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let pt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function rN(n){return n&&n instanceof _f||function iN(n){return n&&ve(n.next)&&ve(n.error)&&ve(n.complete)}(n)&&sb(n)}(t)?t:new wf(t,i,r);return Lc(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=cb(i))((r,s)=>{const o=new wf({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Cf](){return this}pipe(...t){return lb(t)(this)}toPromise(t){return new(t=cb(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function cb(n){var e;return null!==(e=n??Vr.Promise)&&void 0!==e?e:Promise}const sN=gf(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let $t=(()=>{class n extends pt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new ub(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new sN}next(t){Lc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Lc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Lc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?rb:(this.currentObservers=null,s.push(t),new kt(()=>{this.currentObservers=null,Oc(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new pt;return t.source=this,t}}return n.create=(e,t)=>new ub(e,t),n})();class ub extends $t{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:rb}}class Tn extends $t{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function db(n){return ve(n?.lift)}function Et(n){return e=>{if(db(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ot(n,e,t,i,r){return new oN(n,e,t,i,r)}class oN extends _f{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ce(n,e){return Et((t,i)=>{let r=0;t.subscribe(ot(i,s=>{i.next(n.call(e,s,r++))}))})}class I extends Error{code;constructor(e,t){super(function Pi(n,e){return`${function aN(n){return`NG0${Math.abs(n)}`}(n)}${e?": "+e:""}`}(e,t)),this.code=e}}const Bc=Symbol("InputSignalNode#UNSET"),fb={...hf,transformFn:void 0,applyValueToInputSignal(n,e){Nc(n,e)}};function pb(n,e){const t=Object.create(fb);function i(){if(va(t),t.value===Bc)throw new I(-950,null);return t.value}return t.value=n,t.transformFn=e?.transform,i[Tt]=t,i}function Ri(n){return{toString:n}.toString()}const Bs="__parameters__";function Hs(n,e,t){return Ri(()=>{const i=function Af(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Bs)?l[Bs]:Object.defineProperty(l,Bs,{value:[]})[Bs];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function Ae(n){for(let e in n)if(n[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function lN(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function gt(n){if("string"==typeof n)return n;if(Array.isArray(n))return`[${n.map(gt).join(", ")}]`;if(null==n)return""+n;const e=n.overriddenName||n.name;if(e)return`${e}`;const t=n.toString();if(null==t)return""+t;const i=t.indexOf("\n");return i>=0?t.slice(0,i):t}function Df(n,e){return n?e?`${n} ${e}`:n:e||""}globalThis;const cN=Ae({__forward_ref__:Ae});function Ne(n){return n.__forward_ref__=Ne,n.toString=function(){return gt(this())},n}function z(n){return jc(n)?n():n}function jc(n){return"function"==typeof n&&n.hasOwnProperty(cN)&&n.__forward_ref__===Ne}function V(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ur(n){return{providers:n.providers||[],imports:n.imports||[]}}function Hc(n){return mb(n,$c)||mb(n,vb)}function mb(n,e){return n.hasOwnProperty(e)?n[e]:null}function Uc(n){return n&&(n.hasOwnProperty(Sf)||n.hasOwnProperty(gN))?n[Sf]:null}const $c=Ae({\u0275prov:Ae}),Sf=Ae({\u0275inj:Ae}),vb=Ae({ngInjectableDef:Ae}),gN=Ae({ngInjectorDef:Ae});class O{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=V({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function xf(n){return n&&!!n.\u0275providers}const Us=Ae({\u0275cmp:Ae}),Tf=Ae({\u0275dir:Ae}),Pf=Ae({\u0275pipe:Ae}),_b=Ae({\u0275mod:Ae}),Ni=Ae({\u0275fac:Ae}),wa=Ae({__NG_ELEMENT_ID__:Ae}),bb=Ae({__NG_ENV_ID__:Ae});function q(n){return"string"==typeof n?n:null==n?"":String(n)}function wb(n,e){throw new I(-200,n)}function Rf(n,e){throw new I(-201,!1)}var ie=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ie||{});let Nf;function Eb(){return Nf}function sn(n){const e=Nf;return Nf=n,e}function Cb(n,e,t){const i=Hc(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&ie.Optional?null:void 0!==e?e:void Rf()}const $r={},kf="__NG_DI_FLAG__";class Ab{injector;constructor(e){this.injector=e}retrieve(e,t){return this.injector.get(e,t.optional?pf:$r,t)}}const Gc="ngTempTokenPath",bN=/\n/gm,Db="__source";function EN(n,e=ie.Default){if(void 0===kc())throw new I(-203,!1);if(null===kc())return Cb(n,void 0,e);{const t=kc();let i;return i=t instanceof Ab?t.injector:t,i.get(n,e&ie.Optional?null:void 0,e)}}function ee(n,e=ie.Default){return(Eb()||EN)(z(n),e)}function P(n,e=ie.Default){return ee(n,qc(e))}function qc(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Of(n){const e=[];for(let t=0;t<n.length;t++){const i=z(n[t]);if(Array.isArray(i)){if(0===i.length)throw new I(900,!1);let r,s=ie.Default;for(let o=0;o<i.length;o++){const a=i[o],l=CN(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(ee(r,s))}else e.push(ee(i))}return e}function Ea(n,e){return n[kf]=e,n.prototype[kf]=e,n}function CN(n){return n[kf]}const Ff=Ea(Hs("Optional"),8),Lf=Ea(Hs("SkipSelf"),4);function zr(n,e){return n.hasOwnProperty(Ni)?n[Ni]:null}function $s(n,e){n.forEach(t=>Array.isArray(t)?$s(t,e):e(t))}function Mb(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Yc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function vn(n,e,t){let i=Ca(n,e);return i>=0?n[1|i]=t:(i=~i,function xb(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Vf(n,e){const t=Ca(n,e);if(t>=0)return n[1|t]}function Ca(n,e){return function TN(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const zn={},ye=[],Pn=new O(""),Tb=new O("",-1),Bf=new O("");class Xc{get(e,t=$r){if(t===$r){const i=new Error(`NullInjectorError: No provider for ${gt(e)}!`);throw i.name="NullInjectorError",i}return t}}function yn(n,e){const t=n[_b]||null;if(!t&&!0===e)throw new Error(`Type ${gt(n)} does not have '\u0275mod' property.`);return t}function le(n){return n[Us]||null}function _n(n){return n[Pf]||null}function hr(n){return{\u0275providers:n}}function Pb(...n){return{\u0275providers:jf(0,n),\u0275fromNgModule:!0}}function jf(n,...e){const t=[],i=new Set;let r;const s=o=>{t.push(o)};return $s(e,o=>{const a=o;Qc(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&Rb(r,s),t}function Rb(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];Hf(r,s=>{e(s,i)})}}function Qc(n,e,t,i){if(!(n=z(n)))return!1;let r=null,s=Uc(n);const o=!s&&le(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=Uc(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Qc(c,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{$s(s.imports,u=>{Qc(u,e,t,i)&&(c||=[],c.push(u))})}finally{}void 0!==c&&Rb(c,e)}if(!a){const c=zr(r)||(()=>new r);e({provide:r,useFactory:c,deps:ye},r),e({provide:Bf,useValue:r,multi:!0},r),e({provide:Pn,useValue:()=>ee(r),multi:!0},r)}const l=s.providers;if(null!=l&&!a){const c=n;Hf(l,u=>{e(u,c)})}}}return r!==n&&void 0!==n.providers}function Hf(n,e){for(let t of n)xf(t)&&(t=t.\u0275providers),Array.isArray(t)?Hf(t,e):e(t)}const PN=Ae({provide:String,useValue:Ae});function Uf(n){return null!==n&&"object"==typeof n&&PN in n}function Gr(n){return"function"==typeof n}const $f=new O(""),Zc={},Ob={};let zf;function Jc(){return void 0===zf&&(zf=new Xc),zf}class bn{}class qr extends bn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,Gf(e,o=>this.processProvider(o)),this.records.set(Tb,zs(void 0,this)),r.has("environment")&&this.records.set(bn,zs(void 0,this));const s=this.records.get($f);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Bf,ye,ie.Self))}retrieve(e,t){return this.get(e,t.optional?pf:$r,t)}destroy(){Aa(this),this._destroyed=!0;const e=Z(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Z(e)}}onDestroy(e){return Aa(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Aa(this);const t=dr(this),i=sn(void 0);try{return e()}finally{dr(t),sn(i)}}get(e,t=$r,i=ie.Default){if(Aa(this),e.hasOwnProperty(bb))return e[bb](this);i=qc(i);const s=dr(this),o=sn(void 0);try{if(!(i&ie.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function LN(n){return"function"==typeof n||"object"==typeof n&&n instanceof O}(e)&&Hc(e);l=c&&this.injectableDefInScope(c)?zs(Wf(e),Zc):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l,i)}return(i&ie.Self?Jc():this.parent).get(e,t=i&ie.Optional&&t===$r?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Gc]=a[Gc]||[]).unshift(gt(e)),s)throw a;return function AN(n,e,t,i){const r=n[Gc];throw e[Db]&&r.unshift(e[Db]),n.message=function DN(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=gt(e);if(Array.isArray(e))r=e.map(gt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):gt(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(bN,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Gc]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{sn(o),dr(s)}}resolveInjectorInitializers(){const e=Z(null),t=dr(this),i=sn(void 0);try{const s=this.get(Pn,ye,ie.Self);for(const o of s)o()}finally{dr(t),sn(i),Z(e)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(gt(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){let t=Gr(e=z(e))?e:z(e&&e.provide);const i=function kN(n){return Uf(n)?zs(void 0,n.useValue):zs(Fb(n),Zc)}(e);if(!Gr(e)&&!0===e.multi){let r=this.records.get(t);r||(r=zs(void 0,Zc,!0),r.factory=()=>Of(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){const r=Z(null);try{return t.value===Ob?wb(gt(e)):t.value===Zc&&(t.value=Ob,t.value=t.factory(void 0,i)),"object"==typeof t.value&&t.value&&function FN(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Z(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=z(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Wf(n){const e=Hc(n),t=null!==e?e.factory:zr(n);if(null!==t)return t;if(n instanceof O)throw new I(204,!1);if(n instanceof Function)return function NN(n){if(n.length>0)throw new I(204,!1);const t=function pN(n){return n&&(n[$c]||n[vb])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new I(204,!1)}function Fb(n,e,t){let i;if(Gr(n)){const r=z(n);return zr(r)||Wf(r)}if(Uf(n))i=()=>z(n.useValue);else if(function kb(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Of(n.deps||[]));else if(function Nb(n){return!(!n||!n.useExisting)}(n))i=(r,s)=>ee(z(n.useExisting),void 0!==s&&s&ie.Optional?ie.Optional:void 0);else{const r=z(n&&(n.useClass||n.provide));if(!function ON(n){return!!n.deps}(n))return zr(r)||Wf(r);i=()=>new r(...Of(n.deps))}return i}function Aa(n){if(n.destroyed)throw new I(205,!1)}function zs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Gf(n,e){for(const t of n)Array.isArray(t)?Gf(t,e):t&&xf(t)?Gf(t.\u0275providers,e):e(t)}function ui(n,e){let t;n instanceof qr?(Aa(n),t=n):t=new Ab(n);const r=dr(t),s=sn(void 0);try{return e()}finally{dr(r),sn(s)}}const U=11,F=26;function Xe(n){return Array.isArray(n)&&"object"==typeof n[1]}function vt(n){return Array.isArray(n)&&!0===n[1]}function Kf(n){return!!(4&n.flags)}function Gn(n){return n.componentOffset>-1}function ru(n){return!(1&~n.flags)}function En(n){return!!n.template}function Oi(n){return!!(512&n[2])}function Fi(n){return!(256&~n[2])}class KN{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Wb(n,e,t,i){null!==e?e.applyValueToInputSignal(e,i):n[t]=i}const Rn=(()=>{const n=()=>Gb;return n.ngInherit=!0,n})();function Gb(n){return n.type.prototype.ngOnChanges&&(n.setInput=QN),XN}function XN(){const n=Yb(this),e=n?.current;if(e){const t=n.previous;if(t===zn)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function QN(n,e,t,i,r){const s=this.declaredInputs[i],o=Yb(n)||function ZN(n,e){return n[qb]=e}(n,{previous:zn,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new KN(c&&c.currentValue,t,l===zn),Wb(n,e,r,t)}const qb="__ngSimpleChanges__";function Yb(n){return n[qb]||null}function pe(n){for(;Array.isArray(n);)n=n[0];return n}function Zs(n,e){return pe(e[n])}function Wt(n,e){return pe(e[n.index])}function Qr(n,e){return n.data[e]}function Gt(n,e){const t=e[n];return Xe(t)?t:t[0]}function Zf(n){return!(128&~n[2])}function Nn(n,e){return null==e?null:n[e]}function Qb(n){n[17]=0}function Jf(n){1024&n[2]||(n[2]|=1024,Zf(n)&&Js(n))}function Ma(n){return!!(9216&n[2]||n[24]?.dirty)}function ep(n){n[10].changeDetectionScheduler?.notify(8),64&n[2]&&(n[2]|=1024),Ma(n)&&Js(n)}function Js(n){n[10].changeDetectionScheduler?.notify(0);let e=Li(n);for(;null!==e&&!(8192&e[2])&&(e[2]|=8192,Zf(e));)e=Li(e)}function ou(n,e){if(Fi(n))throw new I(911,!1);null===n[21]&&(n[21]=[]),n[21].push(e)}function Li(n){const e=n[3];return vt(e)?e[3]:e}function np(n){return n[7]??=[]}function ip(n){return n.cleanup??=[]}const W={lFrame:aw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let sp=!1;function op(){return W.bindingsEnabled}function C(){return W.lFrame.lView}function $(){return W.lFrame.tView}function qn(n){return W.lFrame.contextLView=n,n[8]}function Yn(n){return W.lFrame.contextLView=null,n}function oe(){let n=Jb();for(;null!==n&&64===n.type;)n=n.parent;return n}function Jb(){return W.lFrame.currentTNode}function Kn(n,e){const t=W.lFrame;t.currentTNode=n,t.isParent=e}function ap(){return W.lFrame.isParent}function nw(){return sp}function lu(n){const e=sp;return sp=n,e}function kn(){return W.lFrame.bindingIndex++}function Bi(n){const e=W.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function fk(n,e){const t=W.lFrame;t.bindingIndex=t.bindingRootIndex=n,cp(e)}function cp(n){W.lFrame.currentDirectiveIndex=n}function dp(){return W.lFrame.currentQueryIndex}function cu(n){W.lFrame.currentQueryIndex=n}function gk(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[5]:null}function sw(n,e,t){if(t&ie.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&ie.Host||(r=gk(s),null===r||(s=s[14],10&r.type))););if(null===r)return!1;e=r,n=s}const i=W.lFrame=ow();return i.currentTNode=e,i.lView=n,!0}function hp(n){const e=ow(),t=n[1];W.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ow(){const n=W.lFrame,e=null===n?null:n.child;return null===e?aw(n):e}function aw(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function lw(){const n=W.lFrame;return W.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const cw=lw;function fp(){const n=lw();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Rt(){return W.lFrame.selectedIndex}function es(n){W.lFrame.selectedIndex=n}function Me(){const n=W.lFrame;return Qr(n.tView,n.selectedIndex)}let dw=!0;function xa(){return dw}function fi(n){dw=n}function pp(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function uu(n,e,t){hw(n,e,3,t)}function du(n,e,t,i){(3&n[2])===t&&hw(n,e,t,i)}function gp(n,e){let t=n[2];(3&t)===e&&(t&=16383,t+=1,n[2]=t)}function hw(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[17]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[17]+=65536),(a<s||-1==s)&&(Ek(n,t,e,l),n[17]=(4294901760&n[17])+l+2),l++}function fw(n,e){const t=Z(null);try{e.call(n)}finally{Z(t)}}function Ek(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];r?n[2]>>14<n[17]>>16&&(3&n[2])===e&&(n[2]+=16384,fw(a,s)):fw(a,s)}class Ta{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=i}}function pw(n){return 3===n||4===n||6===n}function gw(n){return 64===n.charCodeAt(0)}function to(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||mw(n,t,r,0,-1===t||2===t?e[++i]:null)}}return n}function mw(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t)return void(null!==r&&(n[s+1]=r));s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r)}function yp(n){return-1!==n}function Pa(n){return 32767&n}function Ra(n,e){let t=function Mk(n){return n>>16}(n),i=e;for(;t>0;)i=i[14],t--;return i}let _p=!0;function hu(n){const e=_p;return _p=n,e}let Ik=0;const pi={};function fu(n,e){const t=_w(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,bp(i.data,n),bp(e,null),bp(i.blueprint,null));const r=pu(n,e),s=n.injectorIndex;if(yp(r)){const o=Pa(r),a=Ra(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function bp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function _w(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function pu(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=Sw(r),null===i)return-1;if(t++,r=r[14],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function wp(n,e,t){!function xk(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(wa)&&(i=t[wa]),null==i&&(i=t[wa]=Ik++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function bw(n,e,t){if(t&ie.Optional||void 0!==n)return n;Rf()}function ww(n,e,t,i){if(t&ie.Optional&&void 0===i&&(i=null),!(t&(ie.Self|ie.Host))){const r=n[9],s=sn(void 0);try{return r?r.get(e,i,t&ie.Optional):Cb(e,i,t&ie.Optional)}finally{sn(s)}}return bw(i,0,t)}function Ew(n,e,t,i=ie.Default,r){if(null!==n){if(2048&e[2]&&!(i&ie.Self)){const o=function kk(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[2]&&!Oi(o);){const a=Cw(s,o,t,i|ie.Self,pi);if(a!==pi)return a;let l=s.parent;if(!l){const c=o[20];if(c){const u=c.get(t,pi,i);if(u!==pi)return u}l=Sw(o),o=o[14]}s=l}return r}(n,e,t,i,pi);if(o!==pi)return o}const s=Cw(n,e,t,i,pi);if(s!==pi)return s}return ww(e,t,i,r)}function Cw(n,e,t,i,r){const s=function Rk(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(wa)?n[wa]:void 0;return"number"==typeof e?e>=0?255&e:Nk:e}(t);if("function"==typeof s){if(!sw(e,n,i))return i&ie.Host?bw(r,0,i):ww(e,t,i,r);try{let o;if(o=s(i),null!=o||i&ie.Optional)return o;Rf()}finally{cw()}}else if("number"==typeof s){let o=null,a=_w(n,e),l=-1,c=i&ie.Host?e[15][5]:null;for((-1===a||i&ie.SkipSelf)&&(l=-1===a?pu(n,e):e[a+8],-1!==l&&Dw(i,!1)?(o=e[1],a=Pa(l),e=Ra(l,e)):a=-1);-1!==a;){const u=e[1];if(Aw(s,a,u.data)){const d=Pk(a,e,t,o,i,c);if(d!==pi)return d}l=e[a+8],-1!==l&&Dw(i,e[1].data[a+8]===c)&&Aw(s,a,e)?(o=u,a=Pa(l),e=Ra(l,e)):a=-1}}return r}function Pk(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],u=gu(a,o,t,null==i?Gn(a)&&_p:i!=o&&!!(3&a.type),r&ie.Host&&s===a);return null!==u?Na(e,o,u,a,r):pi}function gu(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=o[l];if(f&&En(f)&&f.type===t)return l}return null}function Na(n,e,t,i,r){let s=n[t];const o=e.data;if(s instanceof Ta){const a=s;a.resolving&&wb(function _e(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():q(n)}(o[t]));const l=hu(a.canSeeViewProviders);a.resolving=!0;const u=a.injectImpl?sn(a.injectImpl):null;sw(n,i,ie.Default);try{s=n[t]=a.factory(void 0,r,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&function wk(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=Gb(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,o[t],e)}finally{null!==u&&sn(u),hu(l),a.resolving=!1,cw()}}return s}function Aw(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Dw(n,e){return!(n&ie.Self||n&ie.Host&&e)}class Qe{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Ew(this._tNode,this._lView,e,qc(i),t)}}function Nk(){return new Qe(oe(),C())}function At(n){return Ri(()=>{const e=n.prototype.constructor,t=e[Ni]||Ep(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Ni]||Ep(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Ep(n){return jc(n)?()=>{const e=Ep(z(n));return e&&e()}:zr(n)}function Sw(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[5]:null}function Pw(n,e=null,t=null,i){const r=Rw(n,e,t,i);return r.resolveInjectorInitializers(),r}function Rw(n,e=null,t=null,i,r=new Set){const s=[t||ye,Pb(n)];return i=i||("object"==typeof n?void 0:gt(n)),new qr(s,e||Jc(),i||null,r)}class Dt{static THROW_IF_NOT_FOUND=$r;static NULL=new Xc;static create(e,t){if(Array.isArray(e))return Pw({name:""},t,e,"");{const i=e.name??"";return Pw({name:i},e.parent,e.providers,i)}}static \u0275prov=V({token:Dt,providedIn:"any",factory:()=>ee(Tb)});static __NG_ELEMENT_ID__=-1}new O("").__NG_ELEMENT_ID__=n=>{const e=oe();if(null===e)throw new I(204,!1);if(2&e.type)return e.value;if(n&ie.Optional)return null;throw new I(204,!1)};const Nw=!1;let ji=(()=>class n{static __NG_ELEMENT_ID__=$k;static __NG_ENV_ID__=t=>t})();class kw extends ji{_lView;constructor(e){super(),this._lView=e}onDestroy(e){const t=this._lView;return Fi(t)?(e(),()=>{}):(ou(t,e),()=>function tp(n,e){if(null===n[21])return;const t=n[21].indexOf(e);-1!==t&&n[21].splice(t,1)}(t,e))}}function $k(){return new kw(C())}class Hi{}const Oa=new O("",{providedIn:"root",factory:()=>!1}),Ow=new O(""),Ap=new O("");let ns=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Tn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})();const Pe=class zk extends $t{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,function Lb(){return void 0!==Eb()||null!=kc()}()&&(this.destroyRef=P(ji,{optional:!0})??void 0,this.pendingTasks=P(ns,{optional:!0})??void 0)}emit(e){const t=Z(null);try{super.next(e)}finally{Z(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof kt&&e.add(a),a}wrapInTimeout(e){return t=>{const i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{void 0!==i&&this.pendingTasks?.remove(i)}})}}};function Fa(...n){}function Lw(n){let e,t;function i(){n=Fa;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function Vw(n){return queueMicrotask(()=>n()),()=>{n=Fa}}const Dp="isAngularZone",vu=Dp+"_ID";let Wk=0;class be{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Pe(!1);onMicrotaskEmpty=new Pe(!1);onStable=new Pe(!1);onError=new Pe(!1);constructor(e){const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=Nw}=e;if(typeof Zone>"u")throw new I(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,function Yk(n){const e=()=>{!function qk(n){function e(){Lw(()=>{n.callbackScheduled=!1,Mp(n),n.isCheckStableRunning=!0,Sp(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Mp(n))}(n)},t=Wk++;n._inner=n._inner.fork({name:"angular",properties:{[Dp]:!0,[vu]:t,[vu+t]:!0},onInvokeTask:(i,r,s,o,a,l)=>{if(function Kk(n){return Hw(n,"__ignore_ng_zone__")}(l))return i.invokeTask(s,o,a,l);try{return Bw(n),i.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),jw(n)}},onInvoke:(i,r,s,o,a,l,c)=>{try{return Bw(n),i.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function Xk(n){return Hw(n,"__scheduler_tick__")}(l)&&e(),jw(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,Mp(n),Sp(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(Dp)}static assertInAngularZone(){if(!be.isInAngularZone())throw new I(909,!1)}static assertNotInAngularZone(){if(be.isInAngularZone())throw new I(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Gk,Fa,Fa);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Gk={};function Sp(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Mp(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function Bw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function jw(n){n._nesting--,Sp(n)}class Ip{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Pe;onMicrotaskEmpty=new Pe;onStable=new Pe;onError=new Pe;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}function Hw(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class Xn{_console=console;handleError(e){this._console.error("ERROR",e)}}const Zk=new O("",{providedIn:"root",factory:()=>{const n=P(be),e=P(Xn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function $w(n,e){return pb(n,e)}const e1=($w.required=function Jk(n){return pb(Bc,n)},$w);function t1(){return no(oe(),C())}function no(n,e){return new an(Wt(n,e))}let an=(()=>class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=t1})();function zw(n){return n instanceof an?n.nativeElement:n}function gi(n,e){const t=function HR(n,e){const t=Object.create(hf);t.value=n,void 0!==e&&(t.equal=e);const i=()=>(va(t),t.value);return i[Tt]=t,i}(n,e?.equal),i=t[Tt];return t.set=r=>Nc(i,r),t.update=r=>function nb(n,e){X_()||tb(n),Nc(n,e(n.value))}(i,r),t.asReadonly=yu.bind(t),t}function yu(){const n=this[Tt];if(void 0===n.readonlyFn){const e=()=>this();e[Tt]=n,n.readonlyFn=e}return n.readonlyFn}function Gw(n){return function Ww(n){return"function"==typeof n&&void 0!==n[Tt]}(n)&&"function"==typeof n.set}function n1(){return this._results[Symbol.iterator]()}class i1{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new $t}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const i=function on(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function xN(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=n1}function Va(n){return!(128&~n.flags)}var _u=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(_u||{});const bu=new Map;let s1=0;function Tp(n){bu.delete(n[19])}const Rp="__ngContext__";function cn(n,e){Xe(e)?(n[Rp]=e[19],function a1(n){bu.set(n[19],n)}(e)):n[Rp]=e}function tE(n){return iE(n[12])}function nE(n){return iE(n[4])}function iE(n){for(;null!==n&&!vt(n);)n=n[4];return n}let kp;const Ui=new O("",{providedIn:"root",factory:()=>S1}),S1="ng",Op=new O(""),Fp=new O("",{providedIn:"platform",factory:()=>"unknown"}),uE=new O("",{providedIn:"root",factory:()=>function mi(){if(void 0!==kp)return kp;if(typeof document<"u")return document;throw new I(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),pE=new O("",{providedIn:"root",factory:()=>!1});var qp=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(qp||{});const ro=new O(""),yE=new Set;function Cn(n){yE.has(n)||(yE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}let Yp=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})();function YE(n,e){const t=n.contentQueries;if(null!==t){const i=Z(null);try{for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const a=n.data[o];cu(t[r]),a.contentQueries(2,e[o],o)}}}finally{Z(i)}}}function ag(n,e,t){cu(0);const i=Z(null);try{e(n,t)}finally{Z(i)}}function lg(n,e,t){if(Kf(e)){const i=Z(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Z(i)}}}var On=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(On||{});class JE{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss)`}}function gC(n){return n.ownerDocument.defaultView}function vi(n){return n instanceof Function?n():n}function QO(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const bC="ng-template";function ZO(n,e,t,i){let r=0;if(i){for(;r<e.length&&"string"==typeof e[r];r+=2)if("class"===e[r]&&-1!==QO(e[r+1].toLowerCase(),t,0))return!0}else if(mg(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&"string"==typeof(s=e[r]);)if(s.toLowerCase()===t)return!0}return!1}function mg(n){return 4===n.type&&n.value!==bC}function JO(n,e,t){return e===(4!==n.type||t?n.value:bC)}function eF(n,e,t){let i=4;const r=n.attrs,s=null!==r?function iF(n){for(let e=0;e<n.length;e++)if(pw(n[e]))return e;return n.length}(r):0;let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!JO(n,l,t)||""===l&&1===e.length){if(Qn(i))return!1;o=!0}}else if(8&i){if(null===r||!ZO(n,r,l,t)){if(Qn(i))return!1;o=!0}}else{const c=e[++a],u=tF(l,r,mg(n),t);if(-1===u){if(Qn(i))return!1;o=!0;continue}if(""!==c){let d;if(d=u>s?"":r[u+1].toLowerCase(),2&i&&c!==d){if(Qn(i))return!1;o=!0}}}}else{if(!o&&!Qn(i)&&!Qn(l))return!1;if(o&&Qn(l))continue;o=!1,i=l|1&i}}return Qn(i)||o}function Qn(n){return!(1&n)}function tF(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function rF(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function wC(n,e,t=!1){for(let i=0;i<e.length;i++)if(eF(n,e[i],t))return!0;return!1}function EC(n,e){return n?":not("+e.trim()+")":e}function oF(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Qn(o)&&(e+=EC(s,r),r=""),i=o,s=s||!Qn(i);t++}return""!==r&&(e+=EC(s,r)),e}const Y={};function ju(n,e,t){return n.createElement(e,t)}function ss(n,e,t,i,r){n.insertBefore(e,t,i,r)}function AC(n,e,t){n.appendChild(e,t)}function DC(n,e,t,i,r){null!==i?ss(n,e,t,i,r):AC(n,e,t)}function MC(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&function Sk(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];gw(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}}(n,e,i),null!==r&&function uF(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}(n,e,r),null!==s&&function cF(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function _g(n,e,t,i,r,s,o,a,l,c,u){const d=F+i,h=d+r,f=function dF(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Y);return t}(d,h),p="function"==typeof c?c():c;return f[1]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function Hu(n,e,t,i,r,s,o,a,l,c,u){const d=e.blueprint.slice();return d[0]=r,d[2]=1228|i,(null!==c||n&&2048&n[2])&&(d[2]|=2048),Qb(d),d[3]=d[14]=n,d[8]=t,d[10]=o||n&&n[10],d[U]=a||n&&n[U],d[9]=l||n&&n[9]||null,d[5]=s,d[19]=function o1(){return s1++}(),d[6]=u,d[20]=c,d[15]=2==e.type?n[15]:d,d}function bg(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function tl(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function wg(n,e){return n[12]?n[13][4]=e:n[12]=e,n[13]=e,e}function un(n=1){xC($(),C(),Rt()+n,!1)}function xC(n,e,t,i){if(!i)if(3&~e[2]){const s=n.preOrderHooks;null!==s&&du(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&uu(e,s,t)}es(t)}var Uu=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Uu||{});function Eg(n,e,t,i){const r=Z(null);try{const[s,o,a]=n.inputs[t];let l=null;!!(o&Uu.SignalBased)&&(l=e[s][Tt]),null!==l&&void 0!==l.transformFn?i=l.transformFn(i):null!==a&&(i=a.call(e,i)),null!==n.setInput?n.setInput(e,l,i,t,s):Wb(e,l,s,i)}finally{Z(r)}}function TC(n,e,t,i,r){const s=Rt(),o=2&i;try{es(-1),o&&e.length>F&&xC(n,e,F,!1),t(i,r)}finally{es(s)}}function $u(n,e,t){(function _F(n,e,t){const i=t.directiveStart,r=t.directiveEnd;Gn(t)&&function hF(n,e,t){const i=Wt(e,n),r=function IC(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=_g(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}(t),s=n[10].rendererFactory,o=wg(n,Hu(n,r,null,bg(t),i,e,null,s.createRenderer(i,t),null,null,null));n[e.index]=o}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||fu(t,e);const s=t.initialInputs;for(let o=i;o<r;o++){const a=n.data[o],l=Na(e,n,o,t);cn(l,e),null!==s&&EF(0,o-i,l,a,0,s),En(a)&&(Gt(t.index,e)[8]=Na(e,n,o,t))}})(n,e,t),!(64&~t.flags)&&function bF(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function pk(){return W.lFrame.currentDirectiveIndex}();try{es(s);for(let a=i;a<r;a++){const l=n.data[a],c=e[a];cp(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&wF(l,c)}}finally{es(-1),cp(o)}}(n,e,t)}function Cg(n,e,t=Wt){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}let PC=()=>null;function dn(n,e,t,i,r,s,o,a){if(a||!Mg(e,n,t,i,r)){if(3&e.type){const l=Wt(e,t);i=function vF(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r)}}else Gn(e)&&function yF(n,e){const t=Gt(e,n);16&t[2]||(t[2]|=64)}(t,e.index)}function wF(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Ag(n,e){const t=n.directiveRegistry;let i=null;if(t)for(let r=0;r<t.length;r++){const s=t[r];wC(e,s.selectors,!1)&&(i??=[],En(s)?i.unshift(s):i.push(s))}return i}function EF(n,e,t,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;a+=2)Eg(i,t,o[a],o[a+1])}function Mg(n,e,t,i,r){const s=n.inputs?.[i],o=n.hostDirectiveInputs?.[i];let a=!1;if(o)for(let l=0;l<o.length;l+=2){const c=o[l];Eg(e.data[c],t[c],o[l+1],r),a=!0}if(s)for(const l of s)Eg(e.data[l],t[l],i,r),a=!0;return a}function CF(n,e){const t=Gt(e,n),i=t[1];!function AF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[0];null!==r&&null===t[6]&&(t[6]=null),zu(i,t,t[8])}function zu(n,e,t){hp(e);try{const i=n.viewQuery;null!==i&&ag(1,i,t);const r=n.template;null!==r&&TC(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[18]?.finishViewCreation(n),n.staticContentQueries&&YE(n,e),n.staticViewQueries&&ag(2,n.viewQuery,t);const s=n.components;null!==s&&function DF(n,e){for(let t=0;t<e.length;t++)CF(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,fp()}}function os(n,e){return!e||null===e.firstChild||Va(n)}function xg(n,e){return undefined(n,e)}var vr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(vr||{});function yr(n){return!(32&~n.flags)}function yo(n,e,t,i,r){if(null!=i){let s,o=!1;vt(i)?s=i:Xe(i)&&(o=!0,i=i[0]);const a=pe(i);0===n&&null!==t?null==r?AC(e,t,a):ss(e,t,a,r||null,!0):1===n&&null!==t?ss(e,t,a,r||null,!0):2===n?function el(n,e,t){n.removeChild(null,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function RF(n,e,t,i,r){const s=t[7];s!==pe(t)&&yo(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];Gu(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function OC(n,e){e[10].changeDetectionScheduler?.notify(9),Gu(n,e,e[U],2,null,null)}function Tg(n,e){const t=n[9],i=t.indexOf(e);t.splice(i,1)}function nl(n,e){if(Fi(e))return;const t=e[U];t.destroyNode&&Gu(n,e,t,3,null,null),function IF(n){let e=n[12];if(!e)return Pg(n[1],n);for(;e;){let t=null;if(Xe(e))t=e[12];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Xe(e)&&Pg(e[1],e),e=e[3];null===e&&(e=n),Xe(e)&&Pg(e[1],e),t=e&&e[4]}e=t}}(e)}function Pg(n,e){if(Fi(e))return;const t=Z(null);try{e[2]&=-129,e[2]|=256,e[24]&&xc(e[24]),function TF(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Ta)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function xF(n,e){const t=n.cleanup,i=e[7];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const a=t[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else t[o].call(i[t[o+1]]);null!==i&&(e[7]=null);const r=e[21];if(null!==r){e[21]=null;for(let o=0;o<r.length;o++)(0,r[o])()}const s=e[23];if(null!==s){e[23]=null;for(const o of s)o.destroy()}}(n,e),1===e[1].type&&e[U].destroy();const i=e[16];if(null!==i&&vt(e[3])){i!==e[3]&&Tg(i,e);const r=e[18];null!==r&&r.detachView(n)}Tp(e)}finally{Z(t)}}function Rg(n,e,t){return function FC(n,e,t){let i=e;for(;null!==i&&168&i.type;)i=(e=i).parent;if(null===i)return t[0];if(Gn(i)){const{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===On.None||r===On.Emulated)return null}return Wt(i,t)}(n,e.parent,t)}let BC=function VC(n,e,t){return 40&n.type?Wt(n,t):null};function Wu(n,e,t,i){const r=Rg(n,i,e),s=e[U],a=function LC(n,e,t){return BC(n,e,t)}(i.parent||e[5],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)DC(s,r,t[l],a,!1);else DC(s,r,t,a,!1)}function as(n,e){if(null!==e){const t=e.type;if(3&t)return Wt(e,n);if(4&t)return kg(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return as(n,i);{const r=n[e.index];return vt(r)?kg(-1,r):pe(r)}}if(128&t)return as(n,e.next);if(32&t)return xg(e,n)()||pe(n[e.index]);{const i=HC(n,e);return null!==i?Array.isArray(i)?i[0]:as(Li(n[15]),i):as(n,e.next)}}return null}function HC(n,e){return null!==e?n[15][5].projection[e.projection]:null}function kg(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return as(i,r)}return e[7]}function Og(n,e,t,i,r,s,o){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=i[t.index],l=t.type;if(o&&0===e&&(a&&cn(pe(a),i),t.flags|=2),!yr(t))if(8&l)Og(n,e,t.child,i,r,s,!1),yo(e,n,r,a,s);else if(32&l){const c=xg(t,i);let u;for(;u=c();)yo(e,n,r,u,s);yo(e,n,r,a,s)}else 16&l?UC(n,e,i,t,r,s):yo(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Gu(n,e,t,i,r,s){Og(t,i,n.firstChild,e,r,s,!1)}function UC(n,e,t,i,r,s){const o=t[15],l=o[5].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)yo(e,n,r,l[c],s);else{let c=l;const u=o[3];Va(i)&&(c.flags|=128),Og(n,e,c,u,r,s,!0)}}function _o(n,e,t,i,r=!1){for(;null!==t;){if(128===t.type){t=r?t.projectionNext:t.next;continue}const s=e[t.index];null!==s&&i.push(pe(s)),vt(s)&&Fg(s,i);const o=t.type;if(8&o)_o(n,e,t.child,i);else if(32&o){const a=xg(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=HC(e,t);if(Array.isArray(a))i.push(...a);else{const l=Li(e[15]);_o(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function Fg(n,e){for(let t=10;t<n.length;t++){const i=n[t],r=i[1].firstChild;null!==r&&_o(i[1],i,r,e)}n[7]!==n[0]&&e.push(n[7])}function $C(n){if(null!==n[25]){for(const e of n[25])e.impl.addSequence(e);n[25].length=0}}let zC=[];const LF={...Os,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Js(n.lView)},consumerOnSignalRead(){this.lView[24]=this}},BF={...Os,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Li(n.lView);for(;e&&!WC(e[1]);)e=Li(e);e&&Jf(e)},consumerOnSignalRead(){this.lView[24]=this}};function WC(n){return 2!==n.type}function GC(n){if(null===n[23])return;let e=!0;for(;e;){let t=!1;for(const i of n[23])i.dirty&&(t=!0,null===i.zone||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(8192&n[2])}}function qu(n,e=!0,t=0){const r=n[10].rendererFactory;r.begin?.();try{!function HF(n,e){const t=nw();try{lu(!0),Lg(n,e);let i=0;for(;Ma(n);){if(100===i)throw new I(103,!1);i++,Lg(n,1)}}finally{lu(t)}}(n,t)}catch(o){throw e&&function Sg(n,e){const t=n[9],i=t?t.get(Xn,null):null;i&&i.handleError(e)}(n,o),o}finally{r.end?.()}}function YC(n,e,t,i){if(Fi(e))return;const r=e[2];hp(e);let a=!0,l=null,c=null;WC(n)?(c=function kF(n){return n[24]??function OF(n){const e=zC.pop()??Object.create(LF);return e.lView=n,e}(n)}(e),l=Fs(c)):null===function df(){return ft}()?(a=!1,c=function VF(n){const e=n[24]??Object.create(BF);return e.lView=n,e}(e),l=Fs(c)):e[24]&&(xc(e[24]),e[24]=null);try{Qb(e),function iw(n){return W.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&TC(n,e,t,2,i);const u=!(3&~r);if(u){const f=n.preOrderCheckHooks;null!==f&&uu(e,f,null)}else{const f=n.preOrderHooks;null!==f&&du(e,f,0,null),gp(e,0)}if(function UF(n){for(let e=tE(n);null!==e;e=nE(e)){if(!(2&e[2]))continue;const t=e[9];for(let i=0;i<t.length;i++)Jf(t[i])}}(e),GC(e),KC(e,0),null!==n.contentQueries&&YE(n,e),u){const f=n.contentCheckHooks;null!==f&&uu(e,f)}else{const f=n.contentHooks;null!==f&&du(e,f,1),gp(e,1)}!function zF(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)es(~r);else{const s=r,o=t[++i],a=t[++i];fk(o,s);const l=e[s];a(2,l)}}}finally{es(-1)}}(n,e);const d=n.components;null!==d&&QC(e,d,0);const h=n.viewQuery;if(null!==h&&ag(2,h,i),u){const f=n.viewCheckHooks;null!==f&&uu(e,f)}else{const f=n.viewHooks;null!==f&&du(e,f,2),gp(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[22]){for(const f of e[22])f();e[22]=null}$C(e),e[2]&=-73}catch(u){throw Js(e),u}finally{null!==c&&(_a(c,l),a&&function FF(n){n.lView[24]!==n&&(n.lView=null,zC.push(n))}(c)),fp()}}function KC(n,e){for(let t=tE(n);null!==t;t=nE(t))for(let i=10;i<t.length;i++)XC(t[i],e)}function $F(n,e,t){const i=Gt(e,n);XC(i,t)}function XC(n,e){Zf(n)&&Lg(n,e)}function Lg(n,e){const i=n[1],r=n[2],s=n[24];let o=!!(0===e&&16&r);if(o||=!!(64&r&&0===e),o||=!!(1024&r),o||=!(!s?.dirty||!Ic(s)),o||=!1,s&&(s.dirty=!1),n[2]&=-9217,o)YC(i,n,i.template,n[8]);else if(8192&r){GC(n),KC(n,1);const a=i.components;null!==a&&QC(n,a,1),$C(n)}}function QC(n,e,t){for(let i=0;i<e.length;i++)$F(n,e[i],t)}function il(n,e){const t=nw()?64:1088;for(n[10].changeDetectionScheduler?.notify(e);n;){n[2]|=t;const i=Li(n);if(Oi(n)&&!i)return n;n=i}return null}function ZC(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function rl(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[16];null!==r&&r!==n&&Tg(r,i),e>0&&(n[t-1][4]=i[4]);const s=Yc(n,10+e);!function kC(n,e){OC(n,e),e[0]=null,e[5]=null}(i[1],i);const o=s[18];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function eA(n,e){const t=n[9],i=e[3];(Xe(i)||e[15]!==i[3][15])&&(n[2]|=2),null===t?n[9]=[e]:t.push(e)}let sl=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){const e=this._lView,t=e[1];return _o(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return Fi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(vt(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(rl(e,i),Yc(t,i))}this._attachedToViewContainer=!1}nl(this._lView[1],this._lView)}onDestroy(e){ou(this._lView,e)}markForCheck(){il(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){ep(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,qu(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new I(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=Oi(this._lView),t=this._lView[16];null!==t&&!e&&Tg(t,this._lView),OC(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new I(902,!1);this._appRef=e;const t=Oi(this._lView),i=this._lView[16];null!==i&&!t&&eA(i,this._lView),ep(this._lView)}},Gi=(()=>class n{static __NG_ELEMENT_ID__=YF})();const GF=Gi,qF=class extends GF{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function vo(n,e,t,i){const r=Z(null);try{const s=e.tView,l=Hu(n,s,t,4096&n[2]?4096:16,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);l[16]=n[e.index];const u=n[18];return null!==u&&(l[18]=u.createEmbeddedView(s)),zu(s,l,t),l}finally{Z(r)}}(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new sl(r)}};function YF(){return Yu(oe(),C())}function Yu(n,e){return 4&n.type?new qF(e,n,no(n,e)):null}function wo(n,e,t,i,r){let s=n.data[e];if(null===s)s=function Ug(n,e,t,i,r){const s=Jb(),o=ap(),l=n.data[e]=function rL(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return function Jr(){return null!==W.skipHydrationRootTNode}()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return function iL(n,e,t,i){null===n.firstChild&&(n.firstChild=e),null!==t&&(i?null==t.child&&null!==e.parent&&(t.child=e):null===t.next&&(t.next=e,e.prev=t))}(n,l,s,o),l}(n,e,t,i,r),function hk(){return W.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Ia(){const n=W.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Kn(s,!0),s}let zL=class{},CA=class{};class WL{resolveComponentFactory(e){throw Error(`No component factory found for ${gt(e)}.`)}}let td=class{static NULL=new WL};class Xg{}let qi=(()=>class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>function GL(){const n=C(),t=Gt(oe().index,n);return(Xe(t)?t:n)[U]}()})(),qL=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>null})}return n})();const Zg={};class Ao{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=qc(i);const r=this.injector.get(e,Zg,i);return r!==Zg||t===Zg?r:this.parentInjector.get(e,t,i)}}function Jg(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Df(r,a):2==s&&(i=Df(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function N(n,e=ie.Default){const t=C();return null===t?ee(n,e):Ew(oe(),t,z(n),e)}function em(n,e,t,i,r){const s=null===i?null:{"":-1},o=r(n,t);if(null!==o){let a,l=null,c=null;const u=function JL(n){let e=null,t=!1;for(let o=0;o<n.length;o++){const a=n[o];if(0===o&&En(a)&&(e=a),null!==a.findHostDirectiveDefs){t=!0;break}}if(!t)return null;let i=null,r=null,s=null;for(const o of n)null!==o.findHostDirectiveDefs&&(i??=[],r??=new Map,s??=new Map,eV(o,i,s,r)),o===e&&(i??=[],i.push(o));return null!==i?(i.push(...null===e?n:n.slice(1)),[i,r,s]):null}(o);null===u?a=o:[a,l,c]=u,function nV(n,e,t,i,r,s,o){const a=i.length;let l=!1;for(let h=0;h<a;h++){const f=i[h];!l&&En(f)&&(l=!0,tV(n,t,h)),wp(fu(t,e),n,f.type)}!function lV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,a);for(let h=0;h<a;h++){const f=i[h];f.providersResolver&&f.providersResolver(f)}let c=!1,u=!1,d=tl(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){const f=i[h];if(t.mergedAttrs=to(t.mergedAttrs,f.hostAttrs),rV(n,t,e,d,f),aV(d,f,r),null!==o&&o.has(f)){const[g,v]=o.get(f);t.directiveToIndex.set(f.type,[d,g+t.directiveStart,v+t.directiveStart])}else(null===s||!s.has(f))&&t.directiveToIndex.set(f.type,d);null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const p=f.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),c=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}!function iV(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){const r=n.data[i];if(null!==t&&t.has(r)){const s=t.get(r);SA(0,e,s,i),SA(1,e,s,i),IA(e,i,!0)}else DA(0,e,r,i),DA(1,e,r,i),IA(e,i,!1)}}(n,t,s)}(n,e,t,a,s,l,c)}null!==s&&null!==i&&function ZL(n,e,t){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new I(-301,!1);i.push(e[r],s)}}(t,i,s)}function eV(n,e,t,i){const r=e.length;n.findHostDirectiveDefs(n,e,i),t.set(n,[r,e.length-1])}function tV(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function DA(n,e,t,i){const r=0===n?t.inputs:t.outputs;for(const s in r)if(r.hasOwnProperty(s)){let o;o=0===n?e.inputs??={}:e.outputs??={},o[s]??=[],o[s].push(i),MA(e,s)}}function SA(n,e,t,i){const r=0===n?t.inputs:t.outputs;for(const s in r)if(r.hasOwnProperty(s)){const o=r[s];let a;a=0===n?e.hostDirectiveInputs??={}:e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(i,s),MA(e,o)}}function MA(n,e){"class"===e?n.flags|=8:"style"===e&&(n.flags|=16)}function IA(n,e,t){const{attrs:i,inputs:r,hostDirectiveInputs:s}=n;if(null===i||!t&&null===r||t&&null===s||mg(n))return n.initialInputs??=[],void n.initialInputs.push(null);let o=null,a=0;for(;a<i.length;){const l=i[a];if(0!==l)if(5!==l){if("number"==typeof l)break;if(!t&&r.hasOwnProperty(l)){const c=r[l];for(const u of c)if(u===e){o??=[],o.push(l,i[a+1]);break}}else if(t&&s.hasOwnProperty(l)){const c=s[l];for(let u=0;u<c.length;u+=2)if(c[u]===e){o??=[],o.push(c[u+1],i[a+1]);break}}a+=2}else a+=2;else a+=4}n.initialInputs??=[],n.initialInputs.push(o)}function rV(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=zr(r.type)),o=new Ta(s,En(r),N);n.blueprint[i]=o,t[i]=o,function sV(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function oV(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,tl(n,t,r.hostVars,Y),r)}function aV(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;En(e)&&(t[""]=n)}}function xA(n,e,t,i,r,s,o,a){const l=e.consts,u=wo(e,n,2,i,Nn(l,o));return s&&em(e,t,u,Nn(l,a),r),u.mergedAttrs=to(u.mergedAttrs,u.attrs),null!==u.attrs&&Jg(u,u.attrs,!1),null!==u.mergedAttrs&&Jg(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}function TA(n,e){pp(n,e),Kf(e)&&n.queries.elementEnd(e)}class PA extends td{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=le(e);return new gl(t,this.ngModule)}}class gl extends CA{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function cV(n){return Object.keys(n).map(e=>{const[t,i,r]=n[e],s={propName:t,templateName:e,isSignal:!!(i&Uu.SignalBased)};return r&&(s.transform=r),s})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function uV(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function aF(n){return n.map(oF).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r){const s=Z(null);try{const o=this.componentDef,a=i?["ng-version","19.2.11"]:function lF(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Qn(r))break;r=s}i++}return t.length&&e.push(1,...t),e}(this.componentDef.selectors[0]),l=_g(0,null,null,1,0,null,null,null,null,[a],null),c=function dV(n,e,t){let i=e instanceof bn?e:e?.injector;return i&&null!==n.getStandaloneInjector&&(i=n.getStandaloneInjector(i)||i),i?new Ao(t,i):t}(o,r||this.ngModule,e),u=function hV(n){const e=n.get(Xg,null);if(null===e)throw new I(407,!1);return{rendererFactory:e,sanitizer:n.get(qL,null),changeDetectionScheduler:n.get(Hi,null)}}(c),d=u.rendererFactory.createRenderer(null,o),h=i?function fF(n,e,t,i){const s=i.get(pE,!1)||t===On.ShadowDom,o=n.selectRootElement(e,s);return function pF(n){PC(n)}(o),o}(d,i,o.encapsulation,c):function fV(n,e){const t=(n.selectors[0][0]||"div").toLowerCase();return ju(e,t,"svg"===t?"svg":"math"===t?"math":null)}(o,d),f=Hu(null,l,null,512|bg(o),null,null,u,d,c,null,null);f[F]=h,hp(f);let p=null;try{const g=xA(F,l,f,"#host",()=>[this.componentDef],!0,0);h&&(MC(d,h,g),cn(h,f)),$u(l,f,g),lg(l,g,f),TA(l,g),void 0!==t&&function gV(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s&&s.length?Array.from(s):null)}}(g,this.ngContentSelectors,t),p=Gt(g.index,f),f[8]=p[8],zu(l,f,null)}catch(g){throw null!==p&&Tp(p),Tp(f),g}finally{fp()}return new pV(this.componentType,f)}finally{Z(s)}}}class pV extends zL{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Qr(t[1],F),this.location=no(this._tNode,t),this.instance=Gt(this._tNode.index,t)[8],this.hostView=this.changeDetectorRef=new sl(t,void 0,!1),this.componentType=e}setInput(e,t){const i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const r=this._rootLView;Mg(i,r[1],r,e,t),this.previousInputValues.set(e,t),il(Gt(i.index,r),1)}get injector(){return new Qe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}let Zn=(()=>class n{static __NG_ELEMENT_ID__=mV})();function mV(){return kA(oe(),C())}const vV=Zn,RA=class extends vV{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return no(this._hostTNode,this._hostLView)}get injector(){return new Qe(this._hostTNode,this._hostLView)}get parentInjector(){const e=pu(this._hostTNode,this._hostLView);if(yp(e)){const t=Ra(e,this._hostLView),i=Pa(e);return new Qe(t[1].data[i+8],t)}return new Qe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=NA(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,r,os(this._hostTNode,null)),a}createComponent(e,t,i,r,s){const o=e&&!function Da(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const p=t||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}const l=o?e:new gl(le(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const g=(o?c:this.parentInjector).get(bn,null);g&&(s=g)}le(l.componentType??{});const f=l.create(c,r,null,s);return this.insertImpl(f.hostView,a,os(this._hostTNode,null)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){const r=e._lView;if(function nk(n){return vt(n[3])}(r)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const l=r[3],c=new RA(l,l[5],l[3]);c.detach(c.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return function bo(n,e,t,i=!0){const r=e[1];if(function WF(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],Mb(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[16];null!==o&&t!==o&&eA(o,e);const a=e[18];null!==a&&a.insertView(n),ep(e),e[2]|=128}(r,e,n,t),i){const o=kg(t,n),a=e[U],l=a.parentNode(n[7]);null!==l&&function MF(n,e,t,i,r,s){i[0]=r,i[5]=e,Gu(n,i,t,1,r,s)}(r,n[5],a,e,l,o)}const s=e[6];null!==s&&null!==s.firstChild&&(s.firstChild=null)}(o,r,s,i),e.attachToViewContainerRef(),Mb(tm(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=NA(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=rl(this._lContainer,t);i&&(Yc(tm(this._lContainer),t),nl(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=rl(this._lContainer,t);return i&&null!=Yc(tm(this._lContainer),t)?new sl(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function NA(n){return n[8]}function tm(n){return n[8]||(n[8]=[])}function kA(n,e){let t;const i=e[n.index];return vt(i)?t=i:(t=ZC(i,e,null,n),e[n.index]=t,wg(e,t)),OA(t,e,n,i),new RA(t,n,e)}let OA=function LA(n,e,t,i){if(n[7])return;let r;r=8&t.type?pe(i):function yV(n,e){const t=n[U],i=t.createComment(""),r=Wt(e,n),s=t.parentNode(r);return ss(t,s,i,t.nextSibling(r),!1),i}(e,t),n[7]=r};class im{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new im(this.queryList)}setDirty(){this.queryList.setDirty()}}class rm{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new rm(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==cm(e,t).matches&&this.queries[t].setDirty()}}class VA{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,this.predicate="string"==typeof e?function SV(n){return n.split(",").map(e=>e.trim())}(e):e}}class sm{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new sm(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class om{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new om(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,EV(t,s)),this.matchTNodeWithReadOption(e,t,gu(t,e,s,!1,!1))}else i===Gi?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,gu(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===an||r===Zn||r===Gi&&4&t.type)this.addMatch(t.index,-2);else{const s=gu(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function EV(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function AV(n,e,t,i){return-1===t?function CV(n,e){return 11&n.type?no(n,e):4&n.type?Yu(n,e):null}(e,n):-2===t?function DV(n,e,t){return t===an?no(e,n):t===Gi?Yu(e,n):t===Zn?kA(e,n):void 0}(n,e,i):Na(n,n[1],t,e)}function BA(n,e,t,i){const r=e[18].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const c=o[l];a.push(c<0?null:AV(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function am(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=BA(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[16]===h[3]&&am(h[1],h,c,i)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];am(f[1],f,c,i)}}}}}return i}function HA(n,e,t){const i=$();return i.firstCreatePass&&(function $A(n,e,t){null===n.queries&&(n.queries=new sm),n.queries.track(new om(e,t))}(i,new VA(n,e,t),-1),!(2&~e)&&(i.staticViewQueries=!0)),function jA(n,e,t){const i=new i1(!(4&~t));return function ik(n,e,t,i){const r=np(e);r.push(t),n.firstCreatePass&&ip(n).push(i,r.length-1)}(n,e,i,i.destroy),(e[18]??=new rm).queries.push(new im(i))-1}(i,C(),e)}function cm(n,e){return n.queries.getByIndex(e)}function zA(n,e){const t=n[1],i=cm(t,e);return i.crossesNgTemplate?am(t,n,e,[]):BA(t,n,i,e)}let us=class{},tD=class{};class hm extends us{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new PA(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;const s=yn(e);this._bootstrapComponents=vi(s.bootstrap),this._r3Injector=Rw(e,t,[{provide:us,useValue:this},{provide:td,useValue:this.componentFactoryResolver},...i],gt(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class fm extends tD{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new hm(this.moduleType,e,[])}}class nD extends us{injector;componentFactoryResolver=new PA(this);instance=null;constructor(e){super();const t=new qr([...e.providers,{provide:us,useValue:this},{provide:td,useValue:this.componentFactoryResolver}],e.parent||Jc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function pm(n,e,t=null){return new nD({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let BV=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=jf(0,t.type),r=i.length>0?pm([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=V({token:n,providedIn:"environment",factory:()=>new n(ee(bn))})}return n})();function So(n){return Ri(()=>{const e=iD(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===_u.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(BV).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||On.Emulated,styles:n.styles||ye,_:null,schemas:n.schemas||null,tView:null,id:""};e.standalone&&Cn("NgStandalone"),rD(t);const i=n.dependencies;return t.directiveDefs=id(i,!1),t.pipeDefs=id(i,!0),t.id=function WV(n){let e=0;const i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,"function"==typeof n.consts?"":n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(const s of i.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function jV(n){return le(n)||function Pt(n){return n[Tf]||null}(n)}function HV(n){return null!==n}function Mo(n){return Ri(()=>({type:n.type,bootstrap:n.bootstrap||ye,declarations:n.declarations||ye,imports:n.imports||ye,exports:n.exports||ye,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function UV(n,e){if(null==n)return zn;const t={};for(const i in n)if(n.hasOwnProperty(i)){const r=n[i];let s,o,a,l;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s,l=r[3]||null):(s=r,o=r,a=Uu.None,l=null),t[s]=[i,a,l],e[s]=o}return t}function $V(n){if(null==n)return zn;const e={};for(const t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function G(n){return Ri(()=>{const e=iD(n);return rD(e),e})}function iD(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||zn,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:!0===n.signals,selectors:n.selectors||ye,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:UV(n.inputs,e),outputs:$V(n.outputs),debugInfo:null}}function rD(n){n.features?.forEach(e=>e(n))}function id(n,e){if(!n)return null;const t=e?_n:jV;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(HV)}function Se(n){let e=function sD(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(En(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new I(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=gm(n.inputs),o.declaredInputs=gm(n.declaredInputs),o.outputs=gm(n.outputs);const a=r.hostBindings;a&&XV(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&YV(n,l),c&&KV(n,c),GV(n,r),lN(n.outputs,r.outputs),En(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Se&&(t=!1)}}e=Object.getPrototypeOf(e)}!function qV(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=to(r.hostAttrs,t=to(t,r.hostAttrs))}}(i)}function GV(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const i=e.inputs[t];void 0!==i&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function gm(n){return n===zn?{}:n===ye?[]:n}function YV(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function KV(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function XV(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function rd(n){return!!function vm(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Ze(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Io(n,e,t,i,r,s,o,a){const l=C(),c=$();return function yl(n,e,t,i,r,s,o,a,l,c){const u=t+F,d=e.firstCreatePass?function sB(n,e,t,i,r,s,o,a,l){const c=e.consts,u=wo(e,n,4,o||null,a||null);op()&&em(e,t,u,Nn(c,l),Ag),u.mergedAttrs=to(u.mergedAttrs,u.attrs),pp(e,u);const d=u.tView=_g(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,e,n,i,r,s,o,a,l):e.data[u];Kn(d,!1);const h=uD(e,n,d,t);xa()&&Wu(e,n,h,d),cn(h,n);const f=ZC(h,n,h,d);return n[u]=f,wg(n,f),ru(d)&&$u(e,n,d),null!=l&&Cg(n,d,c),d}(l,c,n,e,t,i,r,Nn(c.consts,s),o,a),Io}let uD=function dD(n,e,t,i){return fi(!0),e[U].createComment("")};let bm=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const AD=new O("");let DD=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>new rj})}return n})();class rj{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){const i=this.queues.get(e.zone);i.has(e)&&(i.delete(e),this.queuedEffectCount--)}enqueue(e){const t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);const i=this.queues.get(t);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(const[e,t]of this.queues)null===e?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(const t of e)e.delete(t),this.queuedEffectCount--,t.run()}}function bl(n){return!!n&&"function"==typeof n.then}function SD(n){return!!n&&"function"==typeof n.subscribe}const MD=new O("");let ID=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=P(MD,{optional:!0})??[];injector=P(Dt);constructor(){}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=ui(this.injector,r);if(bl(s))t.push(s);else if(SD(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const wl=new O("");let An=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(Zk);afterRenderManager=P(Yp);zonelessEnabled=P(Oa);rootEffectScheduler=P(DD);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new $t;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=P(ns).hasPendingTasks.pipe(Ce(t=>!t));constructor(){P(ro,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=P(bn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=Dt.NULL){const s=t instanceof CA;if(!this._injector.get(ID).done)throw new I(405,"");let a;a=s?t:this._injector.get(td).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const l=function sj(n){return n.isBoundToModule}(a)?void 0:this._injector.get(us),u=a.create(r,[],i||a.selector,l),d=u.location.nativeElement,h=u.injector.get(AD,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),ud(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){null!==this.tracingSnapshot?this.tracingSnapshot.run(qp.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new I(101,!1);const t=Z(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Z(t),this.afterTick.next()}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Xg,null,{optional:!0}));let t=0;for(;0!==this.dirtyFlags&&t++<10;)this.synchronizeOnce()}synchronizeOnce(){if(16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),7&this.dirtyFlags){const t=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)aj(i,r,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>Ma(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;ud(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(wl,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ud(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new I(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ud(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function aj(n,e,t,i){(t||Ma(n))&&qu(n,e,t&&!i?0:1)}function No(n,e,t,i,r,s){const a=function ds(n,e,t,i){const r=Ze(n,e,t);return Ze(n,e+1,i)||r}(n,function Vi(){return W.lFrame.bindingIndex}(),t,r);return Bi(2),a?e+q(t)+i+q(r)+s:Y}function dd(n,e){return n<<17|e<<2}function fs(n){return n>>17&32767}function Pm(n){return 2|n}function jo(n){return(131068&n)>>2}function Rm(n,e){return-131069&n|e<<2}function Nm(n){return 1|n}function YD(n,e,t,i){const r=n[t+1],s=null===e;let o=i?fs(r):jo(r),a=!1;for(;0!==o&&(!1===a||s);){const c=n[o+1];qj(n[o],e)&&(a=!0,n[o+1]=i?Nm(c):Pm(c)),o=i?fs(c):jo(c)}a&&(n[t+1]=i?Pm(r):Nm(r))}function qj(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ca(n,e)>=0}function Jn(n,e,t){const i=C();return Ze(i,kn(),e)&&dn($(),Me(),i,n,e,i[U],t,!1),Jn}function km(n,e,t,i,r){Mg(e,n,t,r?"class":"style",i)}function hd(n,e){return function ei(n,e,t,i){const r=C(),s=$(),o=Bi(2);s.firstUpdatePass&&function r0(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Rt()],o=function n0(n,e){return e>=n.expandoStartIndex}(n,t);(function l0(n,e){return!!(n.flags&(e?8:16))})(s,i)&&null===e&&!o&&(e=!1),e=function n2(n,e,t,i){const r=function up(n){const e=W.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Cl(t=Om(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=Om(r,n,e,t,i),null===s){let l=function i2(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==jo(i))return n[fs(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=Om(null,n,e,l[1],i),l=Cl(l,e.attrs,i),function r2(n,e,t,i){n[fs(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function s2(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Cl(i,n[s].hostAttrs,t);return Cl(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function Wj(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=fs(o),l=jo(o);n[i]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||Ca(t,u)>0)&&(c=!0)):u=t,r)if(0!==l){const h=fs(n[a+1]);n[i+1]=dd(h,a),0!==h&&(n[h+1]=Rm(n[h+1],i)),n[a+1]=function $j(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=dd(a,0),0!==a&&(n[a+1]=Rm(n[a+1],i)),a=i;else n[i+1]=dd(l,0),0===a?a=i:n[l+1]=Rm(n[l+1],i),l=i;c&&(n[i+1]=Pm(n[i+1])),YD(n,u,i,!0),YD(n,u,i,!1),function Gj(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Ca(s,e)>=0&&(t[i+1]=Nm(t[i+1]))}(e,u,n,i,s),o=dd(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}(s,n,o,i),e!==Y&&Ze(r,o,e)&&function o0(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function zj(n){return!(1&~n)}(c)?a0(l,e,t,r,jo(c),o):void 0;fd(u)||(fd(s)||function Uj(n){return!(2&~n)}(c)&&(s=a0(l,null,t,r,a,o)),function NF(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:vr.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=vr.Important),n.setStyle(t,i,r,s))}}(i,o,Zs(Rt(),t),r,s))}(s,s.data[Rt()],r,r[U],n,r[o+1]=function c2(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=gt(function mr(n){return n instanceof JE?n.changingThisBreaksApplicationSecurity:n}(n)))),n}(e,t),i,o)}(n,e,null,!0),hd}function Om(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Cl(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Cl(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),vn(n,o,!!t||e[++s]))}return void 0===n?null:n}function a0(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===Y&&(h=d?ye:void 0);let f=d?Vf(h,i):u===i?h:void 0;if(c&&!fd(f)&&(f=Vf(l,i)),fd(f)&&(a=f,o))return a;const p=n[r+1];r=o?fs(p):jo(p)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Vf(l,i))}return a}function fd(n){return void 0!==n}function ae(n,e,t,i){const r=C(),s=$(),o=F+n,a=r[U],l=s.firstCreatePass?xA(o,s,r,e,Ag,op(),t,i):s.data[o],c=h0(s,r,l,a,e,n);r[o]=c;const u=ru(l);return Kn(l,!0),MC(a,c,l),!yr(l)&&xa()&&Wu(s,r,c,l),(0===function rk(){return W.lFrame.elementDepthCount}()||u)&&cn(c,r),function sk(){W.lFrame.elementDepthCount++}(),u&&($u(s,r,l),lg(s,l,r)),null!==i&&Cg(r,l),ae}function me(){let n=oe();ap()?function lp(){W.lFrame.isParent=!1}():(n=n.parent,Kn(n,!1));const e=n;(function ak(n){return W.skipHydrationRootTNode===n})(e)&&function dk(){W.skipHydrationRootTNode=null}(),function ok(){W.lFrame.elementDepthCount--}();const t=$();return t.firstCreatePass&&TA(t,e),null!=e.classesWithoutHost&&function Ak(n){return!!(8&n.flags)}(e)&&km(t,e,C(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Dk(n){return!!(16&n.flags)}(e)&&km(t,e,C(),e.stylesWithoutHost,!1),me}function Yi(n,e,t,i){return ae(n,e,t,i),me(),Yi}let h0=(n,e,t,i,r,s)=>(fi(!0),ju(i,r,function uw(){return W.lFrame.currentNamespace}()));function Uo(){return C()}const gd="en-US";let _0=gd;function L0(n,e,t){return function i(r){if(r===Function)return t;il(Gn(n)?Gt(n.index,e):e,5);const o=e[8];let a=V0(e,o,t,r),l=i.__ngNextListenerFn__;for(;l;)a=V0(e,o,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function V0(n,e,t,i){const r=Z(null);try{return!1!==t(i)}catch(s){return function MH(n,e){const t=n[9],i=t?t.get(Xn,null):null;i&&i.handleError(e)}(n,s),!1}finally{Z(r)}}function B0(n,e,t,i,r,s){const a=e[1],u=e[t][a.data[t].outputs[i]],d=a.firstCreatePass?ip(a):null,h=np(e),f=u.subscribe(s),p=h.length;h.push(s,f),d&&d.push(r,n.index,p,-(p+1))}const $m=new Map;function Le(n,e,t,i){const r=C(),s=$(),o=oe();return zm(s,r,r[U],o,n,e,i),Le}function zm(n,e,t,i,r,s,o){const a=ru(i),c=n.firstCreatePass?ip(n):null,u=np(e);let d=!0;if(3&i.type||o){const h=Wt(i,e),f=o?o(h):h,p=u.length,g=o?m=>o(pe(m[i.index])):i.index;let v=null;if(!o&&a&&(v=function TH(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=s,v.__ngLastListenerFn__=s,d=!1;else{s=L0(i,e,s);const m=e[9].get(Ui);$m.get(m)?.(f,r,s);const _=t.listen(f,r,s);u.push(s,_),c&&c.push(r,g,p,p+1)}}else s=L0(i,e,s);if(d){const h=i.outputs?.[r],f=i.hostDirectiveOutputs?.[r];if(f&&f.length)for(let p=0;p<f.length;p+=2)B0(i,e,f[p],f[p+1],r,s);if(h&&h.length)for(const p of h)B0(i,e,p,r,r,s)}}function Ft(n=1){return function mk(n){return(W.lFrame.contextLView=function Zb(n,e){for(;n>0;)e=e[14],n--;return e}(n,W.lFrame.contextLView))[8]}(n)}function Oe(n,e=""){const t=C(),i=$(),r=n+F,s=i.firstCreatePass?wo(i,r,1,e,null):i.data[r],o=aS(i,t,s,e,n);t[r]=o,xa()&&Wu(i,t,o,s),Kn(s,!1)}let aS=(n,e,t,i,r)=>(fi(!0),function vg(n,e){return n.createText(e)}(e[U],i));function Km(n){return _d("",n,""),Km}function _d(n,e,t){const i=C(),r=function Ro(n,e,t,i){return Ze(n,kn(),t)?e+q(t)+i:Y}(i,n,e,t);return r!==Y&&Ki(i,Rt(),r),_d}function Xm(n,e,t,i,r){const s=C(),o=No(s,n,e,t,i,r);return o!==Y&&Ki(s,Rt(),o),Xm}function Ki(n,e,t){const i=Zs(e,n);!function CC(n,e,t){n.setValue(e,t)}(n[U],i,t)}function Qm(n,e,t){Gw(e)&&(e=e());const i=C();return Ze(i,kn(),e)&&dn($(),Me(),i,n,e,i[U],t,!1),Qm}function Zm(n,e){const t=C(),i=$(),r=oe();return zm(i,t,t[U],r,n,e),Zm}function Jm(n,e,t,i,r){if(n=z(n),Array.isArray(n))for(let s=0;s<n.length;s++)Jm(n[s],e,t,i,r);else{const s=$(),o=C(),a=oe();let l=Gr(n)?n:z(n.provide);const c=Fb(n),u=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(Gr(n)||!n.multi){const f=new Ta(c,r,N),p=tv(l,e,r?u:u+h,d);-1===p?(wp(fu(a,o),s,l),ev(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=tv(l,e,u+h,d),p=tv(l,e,u,u+h),v=p>=0&&t[p];if(r&&!v||!r&&!(f>=0&&t[f])){wp(fu(a,o),s,l);const m=function nU(n,e,t,i,r){const s=new Ta(n,t,N);return s.multi=[],s.index=e,s.componentProviders=0,yS(s,r,i&&!t),s}(r?tU:eU,t.length,r,i,c);!r&&v&&(t[p].providerFactory=m),ev(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(m),o.push(m)}else ev(s,n,f>-1?f:p,yS(t[r?p:f],c,!r&&i));!r&&i&&v&&t[p].componentProviders++}}}function ev(n,e,t,i){const r=Gr(e),s=function RN(n){return!!n.useClass}(e);if(r||s){const l=(s?z(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function yS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function tv(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function eU(n,e,t,i,r){return nv(this.multi,[])}function tU(n,e,t,i,r){const s=this.multi;let o;if(this.providerFactory){const a=this.providerFactory.componentProviders,l=Na(i,i[1],this.providerFactory.index,r);o=l.slice(0,a),nv(s,o);for(let c=a;c<l.length;c++)o.push(l[c])}else o=[],nv(s,o);return o}function nv(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function He(n,e=[]){return t=>{t.providersResolver=(i,r)=>function JH(n,e,t){const i=$();if(i.firstCreatePass){const r=En(n);Jm(t,i.data,i.blueprint,r,!0),Jm(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class XU{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let QU=(()=>{class n{compileModuleSync(t){return new fm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=vi(yn(t).declarations).reduce((o,a)=>{const l=le(a);return l&&o.push(new gl(l)),o},[]);return new XU(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),e$=(()=>{class n{zone=P(be);changeDetectionScheduler=P(Hi);applicationRef=P(An);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const t$=new O("",{factory:()=>!1});function lv({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new be({...cv(),scheduleInRootZone:t}),[{provide:be,useFactory:n},{provide:Pn,multi:!0,useFactory:()=>{const i=P(e$,{optional:!0});return()=>i.initialize()}},{provide:Pn,multi:!0,useFactory:()=>{const i=P(i$);return()=>{i.initialize()}}},!0===e?{provide:Ow,useValue:!0}:[],{provide:Ap,useValue:t??Nw}]}function cv(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let i$=(()=>{class n{subscription=new kt;initialized=!1;zone=P(be);pendingTasks=P(ns);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rl=(()=>{class n{appRef=P(An);taskService=P(ns);ngZone=P(be);zonelessEnabled=P(Oa);tracing=P(ro,{optional:!0});disableScheduling=P(Ow,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new kt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(vu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(Ap,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ip||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;let i=!1;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,i=!0;break;case 12:this.appRef.dirtyFlags|=16,i=!0;break;case 11:i=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;const r=this.useMicrotaskScheduler?Vw:Lw;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(vu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Vw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Cr=new O("",{providedIn:"root",factory:()=>P(Cr,ie.Optional|ie.SkipSelf)||function r$(){return typeof $localize<"u"&&$localize.locale||gd}()}),Cd=new O(""),u$=new O("");function Nl(n){return!n.moduleRef}let Ar=null;let kl=(()=>class n{static __NG_ELEMENT_ID__=m$})();function m$(n){return function v$(n,e,t){if(Gn(n)&&!t){const i=Gt(n.index,e);return new sl(i,i)}return 175&n.type?new sl(e[15],e):null}(oe(),C(),!(16&~n))}class tM{constructor(){}supports(e){return rd(e)}create(e){return new E$(e)}}const w$=(n,e)=>e;class E${length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||w$}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<iM(i,r,s)?t:i,a=iM(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!rd(e))throw new I(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function iB(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new C$(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new nM),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nM),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class C${item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}}class A${_head=null;_tail=null;add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class nM{map=new Map;put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new A$,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iM(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function sM(){return new gv([new tM])}let gv=(()=>{class n{factories;static \u0275prov=V({token:n,providedIn:"root",factory:sM});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||sM()),deps:[[n,new Lf,new Ff]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new I(901,!1)}}return n})();function x$(n){try{const{rootComponent:e,appProviders:t,platformProviders:i}=n,r=function g$(n=[]){if(Ar)return Ar;const e=function KS(n=[],e){return Dt.create({name:e,providers:[{provide:$f,useValue:"platform"},{provide:Cd,useValue:new Set([()=>Ar=null])},...n]})}(n);return Ar=e,function xD(){!function jR(n){eb=n}(()=>{throw new I(600,!1)})}(),function XS(n){const e=n.get(Op,null);ui(n,()=>{e?.forEach(t=>t())})}(e),e}(i),s=[lv({}),{provide:Hi,useExisting:Rl},...t||[]];return function GS(n){const e=Nl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(be);return t.run(()=>{Nl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const i=e.get(Xn,null);let r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:s=>{i.handleError(s)}})}),Nl(n)){const s=()=>e.destroy(),o=n.platformInjector.get(Cd);o.add(s),e.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else{const s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Cd);o.add(s),n.moduleRef.onDestroy(()=>{ud(n.allPlatformModules,n.moduleRef),r.unsubscribe(),o.delete(s)})}return function h$(n,e,t){try{const i=t();return bl(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(i,t,()=>{const s=e.get(ID);return s.runInitializers(),s.donePromise.then(()=>{if(function $2(n){"string"==typeof n&&(_0=n.toLowerCase().replace(/_/g,"-"))}(e.get(Cr,gd)||gd),!e.get(u$,!0))return Nl(n)?e.get(An):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Nl(n)){const l=e.get(An);return void 0!==n.rootComponent&&l.bootstrap(n.rootComponent),l}return function d$(n,e){const t=n.injector.get(An);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new I(-403,!1);n.instance.ngDoBootstrap(t)}e.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({r3Injector:new nD({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}}function at(n){return function GR(n){const e=Z(null);try{return n()}finally{Z(e)}}(n)}function Xi(n,e){return function LR(n,e){const t=Object.create(VR);t.computation=n,void 0!==e&&(t.equal=e);const i=()=>{if(ya(t),va(t),t.value===ur)throw t.error;return t.value};return i[Tt]=t,i}(n,e?.equal)}const Ci=new O("");let SM=null;function Dr(){return SM}class yz{}let MM=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:()=>P(_z),providedIn:"platform"})}return n})(),_z=(()=>{class n extends MM{_location;_history;_doc=P(Ci);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Dr().getBaseHref(this._doc)}onPopState(t){const i=Dr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Dr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function IM(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function xM(n){const e=n.search(/#|\?|$/);return"/"===n[e-1]?n.slice(0,e-1)+n.slice(e):n}function ms(n){return n&&"?"!==n[0]?`?${n}`:n}let Pd=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:()=>P(wz),providedIn:"root"})}return n})();const bz=new O("");let wz=(()=>{class n extends Pd{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??P(Ci).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return IM(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+ms(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+ms(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+ms(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(ee(MM),ee(bz,8))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fl=(()=>{class n{_subject=new $t;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function Az(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(xM(TM(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+ms(i))}normalize(t){return n.stripTrailingSlash(function Cz(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,TM(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ms(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ms(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=ms;static joinWithSlash=IM;static stripTrailingSlash=xM;static \u0275fac=function(i){return new(i||n)(ee(Pd))};static \u0275prov=V({token:n,factory:()=>function Ez(){return new Fl(ee(Pd))}(),providedIn:"root"})}return n})();function TM(n){return n.replace(/\/index.html$/,"")}function RM(n){return"server"===n}const _v=new O("");let NM=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r,s){return this._findPluginFor(i).addEventListener(t,i,r,s)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new I(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(ee(_v),ee(be))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();class kM{_doc;constructor(e){this._doc=e}manager}const Rd="ng-app-id";function OM(n){for(const e of n)e.remove()}function FM(n,e){const t=e.createElement("style");return t.textContent=n,t}function bv(n,e){const t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}let LM=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.isServer=RM(s),function Iz(n,e,t,i){const r=n.head?.querySelectorAll(`style[${Rd}="${e}"],link[${Rd}="${e}"]`);if(r)for(const s of r)s.removeAttribute(Rd),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(const r of t)this.addUsage(r,this.inline,FM);i?.forEach(r=>this.addUsage(r,this.external,bv))}removeStyles(t,i){for(const r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){const s=i.get(t);s?s.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,r(t,this.doc)))})}removeUsage(t,i){const r=i.get(t);r&&(r.usage--,r.usage<=0&&(OM(r.elements),i.delete(t)))}ngOnDestroy(){for(const[,{elements:t}]of[...this.inline,...this.external])OM(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(const[i,{elements:r}]of this.inline)r.push(this.addElement(t,FM(i,this.doc)));for(const[i,{elements:r}]of this.external)r.push(this.addElement(t,bv(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(Rd,this.appId),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(ee(Ci),ee(Ui),ee(uE,8),ee(Fp))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();const wv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ev=/%COMP%/g,kz=new O("",{providedIn:"root",factory:()=>!0});function BM(n,e){return e.map(t=>t.replace(Ev,n))}let jM=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,s,o,a,l,c=null,u=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=RM(a),this.defaultRenderer=new Cv(t,o,l,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===On.ShadowDom&&(i={...i,encapsulation:On.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof UM?r.applyToHost(t):r instanceof Av&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case On.Emulated:s=new UM(l,c,i,this.appId,u,o,a,d,h);break;case On.ShadowDom:return new Vz(l,c,t,i,o,a,this.nonce,d,h);default:s=new Av(l,c,i,u,o,a,d,h)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(ee(NM),ee(LM),ee(Ui),ee(kz),ee(Ci),ee(Fp),ee(be),ee(uE),ee(ro,8))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();class Cv{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,s){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(wv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(HM(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(HM(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new I(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=wv[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=wv[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(vr.DashCase|vr.Important)?e.style.setProperty(t,i,r&vr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&vr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){null!=e&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if("string"==typeof e&&!(e=Dr().getGlobalEventTarget(this.doc,e)))throw new I(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,r)}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function HM(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Vz extends Cv{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,s,o,a,l,c){super(e,s,o,l,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=BM(r.id,u);for(const h of u){const f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}const d=r.getExternalStyles?.();if(d)for(const h of d){const f=bv(h,s);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Av extends Cv{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,s,o,a,l,c){super(e,s,o,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=c?BM(c,u):u,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class UM extends Av{contentAttr;hostAttr;constructor(e,t,i,r,s,o,a,l,c){const u=r+"-"+i.id;super(e,t,i,s,o,a,l,c,u),this.contentAttr=function Oz(n){return"_ngcontent-%COMP%".replace(Ev,n)}(u),this.hostAttr=function Fz(n){return"_nghost-%COMP%".replace(Ev,n)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Dv extends yz{supportsDOMEvents=!0;static makeCurrent(){!function vz(n){SM??=n}(new Dv)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Bz(){return Ll=Ll||document.querySelector("base"),Ll?Ll.getAttribute("href"):null}();return null==t?null:function jz(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){Ll=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Dz(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Ll=null,Uz=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();const $M=["alt","control","meta","shift"],zz={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wz={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};function zM(n){return{appProviders:[...Jz,...n?.providers??[]],platformProviders:Qz}}const Qz=[{provide:Fp,useValue:"browser"},{provide:Op,useValue:function Yz(){Dv.makeCurrent()},multi:!0},{provide:Ci,useFactory:function Xz(){return function D1(n){kp=n}(document),document}}],Jz=[{provide:$f,useValue:"root"},{provide:Xn,useFactory:function Kz(){return new Xn}},{provide:_v,useClass:(()=>{class n extends kM{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,s){return t.addEventListener(i,r,s),()=>this.removeEventListener(t,i,r,s)}removeEventListener(t,i,r,s){return t.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||n)(ee(Ci))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),multi:!0,deps:[Ci]},{provide:_v,useClass:(()=>{class n extends kM{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r,s){const o=n.parseEventName(i),a=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dr().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),$M.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=zz[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),$M.forEach(o=>{o!==r&&(0,Wz[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static \u0275fac=function(i){return new(i||n)(ee(Ci))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),multi:!0,deps:[Ci]},jM,LM,NM,{provide:Xg,useExisting:jM},{provide:class Mz{},useClass:Uz},[]];function Sr(n){return this instanceof Sr?(this.v=n,this):new Sr(n)}function YM(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function xv(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Pv=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function KM(n){return ve(n?.then)}function XM(n){return ve(n[Cf])}function QM(n){return Symbol.asyncIterator&&ve(n?.[Symbol.asyncIterator])}function ZM(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const JM=function MW(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function eI(n){return ve(n?.[JM])}function tI(n){return function qM(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function o(f){return function(p){return Promise.resolve(p).then(f,d)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(f,p){i[f]&&(r[f]=function(g){return new Promise(function(v,m){s.push([f,g,v,m])>1||l(f,g)})},p&&(r[f]=p(r[f])))}function l(f,p){try{!function c(f){f.value instanceof Sr?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}(i[f](p))}catch(g){h(s[0][3],g)}}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Sr(t.read());if(r)return yield Sr(void 0);yield yield Sr(i)}}finally{t.releaseLock()}})}function nI(n){return ve(n?.getReader)}function ni(n){if(n instanceof pt)return n;if(null!=n){if(XM(n))return function IW(n){return new pt(e=>{const t=n[Cf]();if(ve(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Pv(n))return function xW(n){return new pt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(KM(n))return function TW(n){return new pt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ab)})}(n);if(QM(n))return iI(n);if(eI(n))return function PW(n){return new pt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(nI(n))return function RW(n){return iI(tI(n))}(n)}throw ZM(n)}function iI(n){return new pt(e=>{(function NW(n,e){var t,i,r,s;return function WM(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=YM(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Qi(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function rI(n,e=0){return Et((t,i)=>{t.subscribe(ot(i,r=>Qi(i,n,()=>i.next(r),e),()=>Qi(i,n,()=>i.complete(),e),r=>Qi(i,n,()=>i.error(r),e)))})}function sI(n,e=0){return Et((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function oI(n,e){if(!n)throw new Error("Iterable cannot be null");return new pt(t=>{Qi(t,e,()=>{const i=n[Symbol.asyncIterator]();Qi(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Mt(n,e){return e?function BW(n,e){if(null!=n){if(XM(n))return function kW(n,e){return ni(n).pipe(sI(e),rI(e))}(n,e);if(Pv(n))return function FW(n,e){return new pt(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(KM(n))return function OW(n,e){return ni(n).pipe(sI(e),rI(e))}(n,e);if(QM(n))return oI(n,e);if(eI(n))return function LW(n,e){return new pt(t=>{let i;return Qi(t,e,()=>{i=n[JM](),Qi(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>ve(i?.return)&&i.return()})}(n,e);if(nI(n))return function VW(n,e){return oI(tI(n),e)}(n,e)}throw ZM(n)}(n,e):ni(n)}function Rv(n){return n[n.length-1]}function aI(n){return ve(Rv(n))?n.pop():void 0}function Nd(n){return function jW(n){return n&&ve(n.schedule)}(Rv(n))?n.pop():void 0}function J(...n){return Mt(n,Nd(n))}const kd=gf(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:HW}=Array,{getPrototypeOf:UW,prototype:$W,keys:zW}=Object;function lI(n){if(1===n.length){const e=n[0];if(HW(e))return{args:e,keys:null};if(function WW(n){return n&&"object"==typeof n&&UW(n)===$W}(e)){const t=zW(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:GW}=Array;function Nv(n){return Ce(e=>function qW(n,e){return GW(e)?n(...e):n(e)}(n,e))}function cI(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function uI(...n){const e=Nd(n),t=aI(n),{args:i,keys:r}=lI(n);if(0===i.length)return Mt([],e);const s=new pt(function YW(n,e,t=jr){return i=>{dI(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)dI(e,()=>{const c=Mt(n[l],e);let u=!1;c.subscribe(ot(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>cI(r,o):jr));return t?s.pipe(Nv(t)):s}function dI(n,e,t){n?Qi(t,n,e):e()}function Lt(n,e,t=1/0){return ve(e)?Lt((i,r)=>Ce((s,o)=>e(i,s,r,o))(ni(n(i,r))),t):("number"==typeof e&&(t=e),Et((i,r)=>function KW(n,e,t,i,r,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<i?p(g):l.push(g),p=g=>{s&&e.next(g),c++;let v=!1;ni(t(g,u++)).subscribe(ot(e,m=>{r?.(m),s?f(m):e.next(m)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<i;){const m=l.shift();o?Qi(e,o,()=>p(m)):p(m)}h()}catch(m){e.error(m)}}))};return n.subscribe(ot(e,f,()=>{d=!0,h()})),()=>{a?.()}}(i,r,n,t)))}function Ov(...n){return function XW(){return function kv(n=1/0){return Lt(jr,n)}(1)}()(Mt(n,Nd(n)))}function hI(n){return new pt(e=>{ni(n()).subscribe(e)})}function Od(n,e){const t=ve(n)?n:()=>n,i=r=>r.error(t());return new pt(e?r=>e.schedule(i,0,r):i)}const ii=new pt(n=>n.complete());function Fv(){return Et((n,e)=>{let t=null;n._refCount++;const i=ot(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class fI extends pt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,db(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kt;const t=this.getSubject();e.add(this.source.subscribe(ot(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kt.EMPTY)}return e}refCount(){return Fv()(this)}}function Zi(n,e){return Et((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(ot(i,l=>{r?.unsubscribe();let c=0;const u=s++;ni(n(l,u)).subscribe(r=ot(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Go(n){return n<=0?()=>ii:Et((e,t)=>{let i=0;e.subscribe(ot(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Mr(n,e){return Et((t,i)=>{let r=0;t.subscribe(ot(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Fd(n){return Et((e,t)=>{let i=!1;e.subscribe(ot(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function pI(n=JW){return Et((e,t)=>{let i=!1;e.subscribe(ot(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function JW(){return new kd}function vs(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Mr((r,s)=>n(r,s,i)):jr,Go(1),t?Fd(e):pI(()=>new kd))}function Ld(n,e){return ve(e)?Lt(n,e,1):Lt(n,1)}function Qt(n,e,t){const i=ve(n)||e||t?{next:n,error:e,complete:t}:n;return i?Et((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(ot(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):jr}function qo(n){return Et((e,t)=>{let s,i=null,r=!1;i=e.subscribe(ot(t,void 0,void 0,o=>{s=ni(n(o,qo(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Lv(n){return n<=0?()=>ii:Et((e,t)=>{let i=[];e.subscribe(ot(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Vv(n){return Et((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ge(n){return Et((e,t)=>{ni(n).subscribe(ot(t,()=>t.complete(),vf)),!t.closed&&e.subscribe(t)})}let iG=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(ee(Ci))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const te="primary",Bl=Symbol("RouteTitle");class aG{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Yo(n){return new aG(n)}function lG(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(":"===o[0])r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Ai(n,e){const t=n?Bv(n):void 0,i=e?Bv(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!vI(n[r],e[r]))return!1;return!0}function Bv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function vI(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function yI(n){return n.length>0?n[n.length-1]:null}function xr(n){return function eW(n){return!!n&&(n instanceof pt||ve(n.lift)&&ve(n.subscribe))}(n)?n:bl(n)?Mt(Promise.resolve(n)):J(n)}const uG={exact:function wI(n,e,t){if(!_s(n.segments,e.segments)||!Vd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!wI(n.children[i],e.children[i],t))return!1;return!0},subset:EI},_I={exact:function dG(n,e){return Ai(n,e)},subset:function hG(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>vI(n[t],e[t]))},ignored:()=>!0};function bI(n,e,t){return uG[t.paths](n.root,e.root,t.matrixParams)&&_I[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function EI(n,e,t){return CI(n,e,e.segments,t)}function CI(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!_s(r,t)||e.hasChildren()||!Vd(r,t,i))}if(n.segments.length===t.length){if(!_s(n.segments,t)||!Vd(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!EI(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(_s(n.segments,r)&&Vd(n.segments,r,i)&&n.children[te])&&CI(n.children[te],e,s,i)}}function Vd(n,e,t){return e.every((i,r)=>_I[t](n[r].parameters,i.parameters))}class ys{root;queryParams;fragment;_queryParamMap;constructor(e=new xe([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Yo(this.queryParams),this._queryParamMap}toString(){return gG.serialize(this)}}class xe{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hd(this)}}class jl{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Yo(this.parameters),this._parameterMap}toString(){return SI(this)}}function _s(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Bd=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:()=>new jd,providedIn:"root"})}return n})();class jd{parse(e){const t=new SG(e);return new ys(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Hl(e.root,!0)}`,i=function yG(n){const e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Ud(t)}=${Ud(r)}`).join("&"):`${Ud(t)}=${Ud(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function mG(n){return encodeURI(n)}(e.fragment)}`:""}`}}const gG=new jd;function Hd(n){return n.segments.map(e=>SI(e)).join("/")}function Hl(n,e){if(!n.hasChildren())return Hd(n);if(e){const t=n.children[te]?Hl(n.children[te],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==te&&i.push(`${r}:${Hl(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function pG(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===te&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==te&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===te?[Hl(n.children[te],!1)]:[`${r}:${Hl(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[te]?`${Hd(n)}/${t[0]}`:`${Hd(n)}/(${t.join("//")})`}}function AI(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ud(n){return AI(n).replace(/%3B/gi,";")}function jv(n){return AI(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $d(n){return decodeURIComponent(n)}function DI(n){return $d(n.replace(/\+/g,"%20"))}function SI(n){return`${jv(n.path)}${function vG(n){return Object.entries(n).map(([e,t])=>`;${jv(e)}=${jv(t)}`).join("")}(n.parameters)}`}const _G=/^[^\/()?;#]+/;function Hv(n){const e=n.match(_G);return e?e[0]:""}const bG=/^[^\/()?;=#]+/,EG=/^[^=?&#]+/,AG=/^[^&#]+/;class SG{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[te]=new xe(e,t)),i}parseSegment(){const e=Hv(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new I(4009,!1);return this.capture(e),new jl($d(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function wG(n){const e=n.match(bG);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Hv(this.remaining);r&&(i=r,this.capture(i))}e[$d(t)]=$d(i)}parseQueryParam(e){const t=function CG(n){const e=n.match(EG);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function DG(n){const e=n.match(AG);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=DI(t),s=DI(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Hv(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new I(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=te);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[te]:new xe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new I(4011,!1)}}function MI(n){return n.segments.length>0?new xe([],{[te]:n}):n}function II(n){const e={};for(const[i,r]of Object.entries(n.children)){const s=II(r);if(i===te&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function MG(n){if(1===n.numberOfChildren&&n.children[te]){const e=n.children[te];return new xe(n.segments.concat(e.segments),e.children)}return n}(new xe(n.segments,e))}function bs(n){return n instanceof ys}function xI(n){let e;const r=MI(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new xe(s.url,o);return s===n&&(e=a),a}(n.root));return e??r}function TI(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return Uv(r,r,r,t,i);const s=function xG(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new RI(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new RI(t,e,i)}(e);if(s.toRoot())return Uv(r,r,new xe([],{}),t,i);const o=function TG(n,e,t){if(n.isAbsolute)return new Wd(e,!0,0);if(!t)return new Wd(e,!1,NaN);if(null===t.parent)return new Wd(t,!0,0);const i=zd(n.commands[0])?0:1;return function PG(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new I(4005,!1);r=i.segments.length}return new Wd(i,!1,r-s)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),a=o.processChildren?$l(o.segmentGroup,o.index,s.commands):NI(o.segmentGroup,o.index,s.commands);return Uv(r,o.segmentGroup,a,t,i)}function zd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ul(n){return"object"==typeof n&&null!=n&&n.outlets}function Uv(n,e,t,i,r){let o,s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:PI(n,e,t);const a=MI(II(o));return new ys(a,s,r)}function PI(n,e,t){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===e?t:PI(s,e,t)}),new xe(n.segments,i)}class RI{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&zd(i[0]))throw new I(4003,!1);const r=i.find(Ul);if(r&&r!==yI(i))throw new I(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wd{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function NI(n,e,t){if(n??=new xe([],{}),0===n.segments.length&&n.hasChildren())return $l(n,e,t);const i=function NG(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(Ul(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!OI(l,c,o))return s;i+=2}else{if(!OI(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new xe(n.segments.slice(0,i.pathIndex),{});return s.children[te]=new xe(n.segments.slice(i.pathIndex),n.children),$l(s,0,r)}return i.match&&0===r.length?new xe(n.segments,{}):i.match&&!n.hasChildren()?$v(n,e,t):i.match?$l(n,0,r):$v(n,e,t)}function $l(n,e,t){if(0===t.length)return new xe(n.segments,{});{const i=function RG(n){return Ul(n[0])?n[0].outlets:{[te]:n}}(t),r={};if(Object.keys(i).some(s=>s!==te)&&n.children[te]&&1===n.numberOfChildren&&0===n.children[te].segments.length){const s=$l(n.children[te],e,t);return new xe(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=NI(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===i[s]&&(r[s]=o)}),new xe(n.segments,r)}}function $v(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Ul(s)){const l=kG(s.outlets);return new xe(i,l)}if(0===r&&zd(t[0])){i.push(new jl(n.segments[e].path,kI(t[0]))),r++;continue}const o=Ul(s)?s.outlets[te]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&zd(a)?(i.push(new jl(o,kI(a))),r+=2):(i.push(new jl(o,{})),r++)}return new xe(i,{})}function kG(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=$v(new xe([],{}),0,i))}),e}function kI(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function OI(n,e,t){return n==t.path&&Ai(e,t.parameters)}const Gd="imperative";var he=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(he||{});class Di{id;url;constructor(e,t){this.id=e,this.url=t}}class zv extends Di{type=he.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ws extends Di{urlAfterRedirects;type=he.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Dn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Dn||{}),Wv=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Wv||{});class Es extends Di{reason;code;type=he.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class zl extends Di{reason;code;type=he.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}}class Gv extends Di{error;target;type=he.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class FI extends Di{urlAfterRedirects;state;type=he.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OG extends Di{urlAfterRedirects;state;type=he.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FG extends Di{urlAfterRedirects;state;shouldActivate;type=he.GuardsCheckEnd;constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class LG extends Di{urlAfterRedirects;state;type=he.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VG extends Di{urlAfterRedirects;state;type=he.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BG{route;type=he.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class jG{route;type=he.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class HG{snapshot;type=he.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UG{snapshot;type=he.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $G{snapshot;type=he.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zG{snapshot;type=he.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qv{}class qd{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function ri(n){return n.outlet||te}function Wl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class XG{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Wl(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Gl(this.rootInjector)}}let Gl=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new XG(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(ee(bn))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class LI{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Yv(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=Yv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Kv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Kv(e,this._root).map(t=>t.value)}}function Yv(n,e){if(n===e.value)return e;for(const t of e.children){const i=Yv(n,t);if(i)return i}return null}function Kv(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Kv(n,t);if(i.length)return i.unshift(e),i}return[]}class si{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ko(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class VI extends LI{snapshot;constructor(e,t){super(e),this.snapshot=t,Xv(this,e)}toString(){return this.snapshot.toString()}}function BI(n){const e=function QG(n){const s=new Kd([],{},{},"",{},te,n,null,{});return new jI("",new si(s,[]))}(n),t=new Tn([new jl("",{})]),i=new Tn({}),r=new Tn({}),s=new Tn({}),o=new Tn(""),a=new Xo(t,i,s,o,r,te,n,e.root);return a.snapshot=e.root,new VI(new si(a,[]),e)}class Xo{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ce(c=>c[Bl]))??J(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ce(e=>Yo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ce(e=>Yo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yd(n,e,t="emptyOnly"){let i;const{routeConfig:r}=n;return i=null===e||"always"!==t&&""!==r?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...r?.data,...n._resolvedData}},r&&UI(r)&&(i.resolve[Bl]=r.title),i}class Kd{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Bl]}constructor(e,t,i,r,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Yo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Yo(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jI extends LI{url;constructor(e,t){super(t),this.url=e,Xv(this,t)}toString(){return HI(this._root)}}function Xv(n,e){e.value._routerState=n,e.children.forEach(t=>Xv(n,t))}function HI(n){const e=n.children.length>0?` { ${n.children.map(HI).join(", ")} } `:"";return`${n.value}${e}`}function Qv(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ai(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ai(e.params,t.params)||n.paramsSubject.next(t.params),function cG(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ai(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Ai(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Zv(n,e){const t=Ai(n.params,e.params)&&function fG(n,e){return _s(n,e)&&n.every((t,i)=>Ai(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Zv(n.parent,e.parent))}function UI(n){return"string"==typeof n.title||null===n.title}const ZG=new O("");let Jv=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=te;activateEvents=new Pe;deactivateEvents=new Pe;attachEvents=new Pe;detachEvents=new Pe;routerOutletData=e1(void 0);parentContexts=P(Gl);location=P(Zn);changeDetector=P(kl);inputBinder=P(ey,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new I(4013,!1);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new JG(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=G({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Rn]})}return n})();class JG{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===Xo?this.route:e===Gl?this.childContexts:e===ZG?this.outletData:this.parent.get(e,t)}}const ey=new O("");let $I=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=So({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){1&i&&Yi(0,"router-outlet")},dependencies:[Jv],encapsulation:2})}return n})();function ty(n){const e=n.children&&n.children.map(ty),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==te&&(t.component=$I),t}function ql(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function t3(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ql(n,i,r);return ql(n,i)})}(n,e,t);return new si(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ql(n,a)),o}}const i=function n3(n){return new Xo(new Tn(n.url),new Tn(n.params),new Tn(n.queryParams),new Tn(n.fragment),new Tn(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>ql(n,s));return new si(i,r)}}class ny{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const zI="ngNavigationCancelingError";function Xd(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=bs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=WI(!1,Dn.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function WI(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[zI]=!0,t.cancellationCode=e,t}function GI(n){return!!n&&n[zI]}class s3{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Qv(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Ko(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ko(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ko(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=Ko(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new zG(s.value.snapshot))}),e.children.length&&this.forwardEvent(new UG(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(Qv(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Qv(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}}class qI{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Qd{component;route;constructor(e,t){this.component=e,this.route=t}}function o3(n,e,t){const i=n._root;return Yl(i,e?e._root:null,t,[i.value])}function Qo(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function fN(n){return null!==Hc(n)}(n)?e.get(n):n:i}function Yl(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ko(e);return n.children.forEach(o=>{(function l3(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function c3(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!_s(n.url,e.url);case"pathParamsOrQueryParamsChange":return!_s(n.url,e.url)||!Ai(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zv(n,e)||!Ai(n.queryParams,e.queryParams);default:return!Zv(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new qI(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Yl(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Qd(a.outlet.component,o))}else o&&Kl(e,a,r),r.canActivateChecks.push(new qI(i)),Yl(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Kl(a,t.getContext(o),r)),r}function Kl(n,e,t){const i=Ko(n),r=n.value;Object.entries(i).forEach(([s,o])=>{Kl(o,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Qd(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Xl(n){return"function"==typeof n}function YI(n){return n instanceof kd||"EmptyError"===n?.name}const Zd=Symbol("INITIAL_VALUE");function Zo(){return Zi(n=>uI(n.map(e=>e.pipe(Go(1),function ZW(...n){const e=Nd(n);return Et((t,i)=>{(e?Ov(n,t,e):Ov(n,t)).subscribe(i)})}(Zd)))).pipe(Ce(e=>{for(const t of e)if(!0!==t){if(t===Zd)return Zd;if(!1===t||m3(t))return t}return!0}),Mr(e=>e!==Zd),Go(1)))}function m3(n){return bs(n)||n instanceof ny}function KI(n){return function nN(...n){return lb(n)}(Qt(e=>{if("boolean"!=typeof e)throw Xd(0,e)}),Ce(e=>!0===e))}class iy{segmentGroup;constructor(e){this.segmentGroup=e||null}}class ry extends Error{urlTree;constructor(e){super(),this.urlTree=e}}function Jo(n){return Od(new iy(n))}class x3{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return J(i);if(r.numberOfChildren>1||!r.children[te])return Od(new I(4e3,!1));r=r.children[te]}}applyRedirectCommands(e,t,i,r,s){if("string"!=typeof t){const a=t,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:f,data:p,title:g}=r,v=ui(s,()=>a({params:f,data:p,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:g}));if(v instanceof ys)throw new ry(v);t=v}const o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if("/"===t[0])throw new ry(o);return o}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new ys(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&":"===s[0]){const a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new xe(s,o)}createSegments(e,t,i,r){return t.map(s=>":"===s.path[0]?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new I(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const sy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function T3(n,e,t,i,r){const s=XI(n,e,t);return s.matched?(i=function WG(n,e){return n.providers&&!n._injector&&(n._injector=pm(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function S3(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?J(r.map(o=>{const a=Qo(o,n);return xr(function g3(n){return n&&Xl(n.canMatch)}(a)?a.canMatch(e,t):ui(n,()=>a(e,t)))})).pipe(Zo(),KI()):J(!0)}(i,e,t).pipe(Ce(o=>!0===o?s:{...sy}))):J(s)}function XI(n,e,t){if("**"===e.path)return function P3(n){return{matched:!0,parameters:n.length>0?yI(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...sy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||lG)(t,n,e);if(!r)return{...sy};const s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function QI(n,e,t,i){return t.length>0&&function k3(n,e,t){return t.some(i=>Jd(n,e,i)&&ri(i)!==te)}(n,t,i)?{segmentGroup:new xe(e,N3(i,new xe(t,n.children))),slicedSegments:[]}:0===t.length&&function O3(n,e,t){return t.some(i=>Jd(n,e,i))}(n,t,i)?{segmentGroup:new xe(n.segments,R3(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new xe(n.segments,n.children),slicedSegments:t}}function R3(n,e,t,i){const r={};for(const s of t)if(Jd(n,e,s)&&!i[ri(s)]){const o=new xe([],{});r[ri(s)]=o}return{...i,...r}}function N3(n,e){const t={};t[te]=e;for(const i of n)if(""===i.path&&ri(i)!==te){const r=new xe([],{});t[ri(i)]=r}return t}function Jd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class L3{}class j3{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new x3(this.urlSerializer,this.urlTree)}noMatchError(e){return new I(4002,`'${e.segmentGroup}'`)}recognize(){const e=QI(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ce(({children:t,rootSnapshot:i})=>{const r=new si(i,t),s=new jI("",r),o=function IG(n,e,t=null,i=null){return TI(xI(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){const t=new Kd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,te,t).pipe(Ce(i=>({children:i,rootSnapshot:t})),qo(i=>{if(i instanceof ry)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof iy?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(Ce(o=>o instanceof si?[o]:[]))}processChildren(e,t,i,r){const s=[];for(const o of Object.keys(i.children))"primary"===o?s.unshift(o):s.push(o);return Mt(s).pipe(Ld(o=>{const a=i.children[o],l=function KG(n,e){const t=n.filter(i=>ri(i)===e);return t.push(...n.filter(i=>ri(i)!==e)),t}(t,o);return this.processSegmentGroup(e,l,a,o,r)}),function tG(n,e){return Et(function eG(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(ot(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}((o,a)=>(o.push(...a),o)),Fd(null),function nG(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Mr((r,s)=>n(r,s,i)):jr,Lv(1),t?Fd(e):pI(()=>new kd))}(),Lt(o=>{if(null===o)return Jo(i);const a=ZI(o);return function H3(n){n.sort((e,t)=>e.value.outlet===te?-1:t.value.outlet===te?1:e.value.outlet.localeCompare(t.value.outlet))}(a),J(a)}))}processSegment(e,t,i,r,s,o,a){return Mt(t).pipe(Ld(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,s,o,a).pipe(qo(c=>{if(c instanceof iy)return J(null);throw c}))),vs(l=>!!l),qo(l=>{if(YI(l))return function F3(n,e,t){return 0===e.length&&!n.children[t]}(i,r,s)?J(new L3):Jo(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,s,o,a,l){return ri(i)===o||o!==te&&Jd(r,s,i)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,l):Jo(r):Jo(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,a){const{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=XI(t,r,s);if(!l)return Jo(t);"string"==typeof r.redirectTo&&"/"===r.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const f=new Kd(s,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,JI(r),ri(r),r.component??r._loadedComponent??null,r,ex(r)),p=Yd(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);const g=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(r,g).pipe(Lt(v=>this.processSegment(e,i,t,v.concat(h),o,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,s,o){const a=T3(t,i,r,e);return"**"===i.path&&(t.children={}),a.pipe(Zi(l=>l.matched?this.getChildConfig(e=i._injector??e,i,r).pipe(Zi(({routes:c})=>{const u=i._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=l,p=new Kd(h,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,JI(i),ri(i),i.component??i._loadedComponent??null,i,ex(i)),g=Yd(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);const{segmentGroup:v,slicedSegments:m}=QI(t,h,f,c);if(0===m.length&&v.hasChildren())return this.processChildren(u,c,v,p).pipe(Ce(_=>new si(p,_)));if(0===c.length&&0===m.length)return J(new si(p,[]));const y=ri(i)===s;return this.processSegment(u,c,v,m,y?te:s,!0,p).pipe(Ce(_=>new si(p,_ instanceof si?[_]:[])))})):Jo(t)))}getChildConfig(e,t,i){return t.children?J({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?J({routes:t._loadedRoutes,injector:t._loadedInjector}):function D3(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?J(!0):J(r.map(o=>{const a=Qo(o,n);return xr(function d3(n){return n&&Xl(n.canLoad)}(a)?a.canLoad(e,t):ui(n,()=>a(e,t)))})).pipe(Zo(),KI())}(e,t,i).pipe(Lt(r=>r?this.configLoader.loadChildren(e,t).pipe(Qt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function I3(){return Od(WI(!1,Dn.GuardRejected))}())):J({routes:[],injector:e})}}function U3(n){const e=n.value.routeConfig;return e&&""===e.path}function ZI(n){const e=[],t=new Set;for(const i of n){if(!U3(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=ZI(i.children);e.push(new si(i.value,r))}return e.filter(i=>!t.has(i))}function JI(n){return n.data||{}}function ex(n){return n.resolve||{}}function tx(n){const e=n.children.map(t=>tx(t)).flat();return[n,...e]}function oy(n){return Zi(e=>{const t=n(e);return t?Mt(t).pipe(Ce(()=>e)):J(e)})}let nx=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===te);return i}getResolvedTitleForRoute(t){return t.data[Bl]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:()=>P(Y3),providedIn:"root"})}return n})(),Y3=(()=>{class n extends nx{title;constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(ee(iG))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ay=new O("",{providedIn:"root",factory:()=>({})}),ly=new O("");let ix=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(QU);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return J(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=xr(t.loadComponent()).pipe(Ce(rx),Qt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Vv(()=>{this.componentLoaders.delete(t)})),r=new fI(i,()=>new $t).pipe(Fv());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return J({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function K3(n,e,t,i){return xr(n.loadChildren()).pipe(Ce(rx),Lt(r=>r instanceof tD||Array.isArray(r)?J(r):Mt(e.compileModuleAsync(r))),Ce(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,!0):(s=r.create(t).injector,o=s.get(ly,[],{optional:!0,self:!0}).flat()),{routes:o.map(ty),injector:s}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(Vv(()=>{this.childrenLoaders.delete(i)})),o=new fI(s,()=>new $t).pipe(Fv());return this.childrenLoaders.set(i,o),o}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rx(n){return function X3(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let cy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:()=>P(Q3),providedIn:"root"})}return n})(),Q3=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Z3=new O(""),t8=new O("");let n8=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new $t;transitionAbortSubject=new $t;configLoader=P(ix);environmentInjector=P(bn);destroyRef=P(ji);urlSerializer=P(Bd);rootContexts=P(Gl);location=P(Fl);inputBindingEnabled=null!==P(ey,{optional:!0});titleStrategy=P(nx);options=P(ay,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(cy);createViewTransition=P(Z3,{optional:!0});navigationErrorHandler=P(t8,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>J(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=r=>this.events.next(new jG(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new BG(r)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...t,extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i})}setupNavigations(t){return this.transitions=new Tn(null),this.transitions.pipe(Mr(i=>null!==i),Zi(i=>{let r=!1,s=!1;return J(i).pipe(Zi(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Dn.SupersededByNewNavigation),ii;this.currentTransition=i,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:"string"==typeof o.extras.browserUrl?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!a&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const c="";return this.events.next(new zl(o.id,this.urlSerializer.serialize(o.rawUrl),c,Wv.IgnoredSameUrlNavigation)),o.resolve(!1),ii}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return J(o).pipe(Zi(c=>(this.events.next(new zv(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?ii:Promise.resolve(c))),function $3(n,e,t,i,r,s){return Lt(o=>function V3(n,e,t,i,r,s,o="emptyOnly"){return new j3(n,e,t,i,r,o,s).recognize()}(n,e,t,i,o.extractedUrl,r,s).pipe(Ce(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Qt(c=>{i.targetSnapshot=c.targetSnapshot,i.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:c.urlAfterRedirects};const u=new FI(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){const{id:c,extractedUrl:u,source:d,restoredState:h,extras:f}=o,p=new zv(c,this.urlSerializer.serialize(u),d,h);this.events.next(p);const g=BI(this.rootComponentType).snapshot;return this.currentTransition=i={...o,targetSnapshot:g,urlAfterRedirects:u,extras:{...f,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=u,J(i)}{const c="";return this.events.next(new zl(o.id,this.urlSerializer.serialize(o.extractedUrl),c,Wv.IgnoredByUrlHandlingStrategy)),o.resolve(!1),ii}}),Qt(o=>{const a=new OG(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Ce(o=>(this.currentTransition=i={...o,guards:o3(o.targetSnapshot,o.currentSnapshot,this.rootContexts)},i)),function v3(n,e){return Lt(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?J({...t,guardsResult:!0}):function y3(n,e,t,i){return Mt(n).pipe(Lt(r=>function A3(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?J(s.map(a=>{const l=Wl(e)??r,c=Qo(a,l);return xr(function p3(n){return n&&Xl(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,i):ui(l,()=>c(n,e,t,i))).pipe(vs())})).pipe(Zo()):J(!0)}(r.component,r.route,t,e,i)),vs(r=>!0!==r,!0))}(o,i,r,n).pipe(Lt(a=>a&&function u3(n){return"boolean"==typeof n}(a)?function _3(n,e,t,i){return Mt(e).pipe(Ld(r=>Ov(function w3(n,e){return null!==n&&e&&e(new HG(n)),J(!0)}(r.route.parent,i),function b3(n,e){return null!==n&&e&&e(new $G(n)),J(!0)}(r.route,i),function C3(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function a3(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>hI(()=>J(o.guards.map(l=>{const c=Wl(o.node)??t,u=Qo(l,c);return xr(function f3(n){return n&&Xl(n.canActivateChild)}(u)?u.canActivateChild(i,n):ui(c,()=>u(i,n))).pipe(vs())})).pipe(Zo())));return J(s).pipe(Zo())}(n,r.path,t),function E3(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return J(!0);const r=i.map(s=>hI(()=>{const o=Wl(e)??t,a=Qo(s,o);return xr(function h3(n){return n&&Xl(n.canActivate)}(a)?a.canActivate(e,n):ui(o,()=>a(e,n))).pipe(vs())}));return J(r).pipe(Zo())}(n,r.route,t))),vs(r=>!0!==r,!0))}(i,s,n,e):J(a)),Ce(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),Qt(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&"boolean"!=typeof o.guardsResult)throw Xd(0,o.guardsResult);const a=new FG(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Mr(o=>!!o.guardsResult||(this.cancelNavigationTransition(o,"",Dn.GuardRejected),!1)),oy(o=>{if(0!==o.guards.canActivateChecks.length)return J(o).pipe(Qt(a=>{const l=new LG(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Zi(a=>{let l=!1;return J(a).pipe(function z3(n,e){return Lt(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return J(t);const s=new Set(r.map(l=>l.route)),o=new Set;for(const l of s)if(!o.has(l))for(const c of tx(l))o.add(c);let a=0;return Mt(o).pipe(Ld(l=>s.has(l)?function W3(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!UI(r)&&(s[Bl]=r.title),function G3(n,e,t,i){const r=Bv(n);if(0===r.length)return J({});const s={};return Mt(r).pipe(Lt(o=>function q3(n,e,t,i){const r=Wl(e)??i,s=Qo(n,r);return xr(s.resolve?s.resolve(e,t):ui(r,()=>s(e,t)))}(n[o],e,t,i).pipe(vs(),Qt(a=>{if(a instanceof ny)throw Xd(new jd,a);s[o]=a}))),Lv(1),Ce(()=>s),qo(o=>YI(o)?ii:Od(o)))}(s,n,e,i).pipe(Ce(o=>(n._resolvedData=o,n.data=Yd(n,n.parent,t).resolve,null)))}(l,i,n,e):(l.data=Yd(l,l.parent,n).resolve,J(void 0))),Qt(()=>a++),Lv(1),Lt(l=>a===o.size?J(t):ii))})}(this.paramsInheritanceStrategy,this.environmentInjector),Qt({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Dn.NoDataFromResolver)}}))}),Qt(a=>{const l=new VG(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),oy(o=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Qt(u=>{l.component=u}),Ce(()=>{})));for(const u of l.children)c.push(...a(u));return c};return uI(a(o.targetSnapshot.root)).pipe(Fd(null),Go(1))}),oy(()=>this.afterPreactivation()),Zi(()=>{const{currentSnapshot:o,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return l?Mt(l).pipe(Ce(()=>i)):J(i)}),Ce(o=>{const a=function e3(n,e,t){const i=ql(n,e._root,t?t._root:void 0);return new VI(i,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i={...o,targetRouterState:a},this.currentNavigation.targetRouterState=a,i}),Qt(()=>{this.events.next(new qv)}),((n,e,t,i)=>Ce(r=>(new s3(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Go(1),Qt({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ws(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Ge(this.transitionAbortSubject.pipe(Qt(o=>{throw o}))),Vv(()=>{!r&&!s&&this.cancelNavigationTransition(i,"",Dn.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),qo(o=>{if(this.destroyed)return i.resolve(!1),ii;if(s=!0,GI(o))this.events.next(new Es(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),function i3(n){return GI(n)&&bs(n.url)}(o)?this.events.next(new qd(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{const a=new Gv(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{const l=ui(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(!(l instanceof ny))throw this.events.next(a),o;{const{message:c,cancellationCode:u}=Xd(0,l);this.events.next(new Es(i.id,this.urlSerializer.serialize(i.extractedUrl),c,u)),this.events.next(new qd(l.redirectTo,l.navigationBehaviorOptions))}}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return ii}))}))}cancelNavigationTransition(t,i,r){const s=new Es(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function i8(n){return n!==Gd}let r8=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:()=>P(o8),providedIn:"root"})}return n})();class s8{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let o8=(()=>{class n extends s8{static \u0275fac=(()=>{let t;return function(r){return(t||(t=At(n)))(r||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sx=(()=>{class n{urlSerializer=P(Bd);options=P(ay,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P(Fl);urlHandlingStrategy=P(cy);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ys;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){const s=void 0!==t?this.urlHandlingStrategy.merge(t,i):i,o=r??s;return o instanceof ys?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=BI(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:()=>P(a8),providedIn:"root"})}return n})(),a8=(()=>{class n extends sx{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{"popstate"===i.type&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof zv?this.updateStateMemento():t instanceof zl?this.commitTransition(i):t instanceof FI?"eager"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof qv?(this.commitTransition(i),"deferred"===this.urlUpdateStrategy&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Es&&(t.code===Dn.GuardRejected||t.code===Dn.NoDataFromResolver)?this.restoreHistory(i):t instanceof Gv?this.restoreHistory(i,!0):t instanceof ws&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){const{replaceUrl:s,state:o}=i;if(this.location.isCurrentPathEqualTo(t)||s){const a=this.browserPageId,l={...o,...this.generateNgRouterState(r,a)};this.location.replaceState(t,"",l)}else{const a={...o,...this.generateNgRouterState(r,this.browserPageId+1)};this.location.go(t,"",a)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&0===s&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=At(n)))(r||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const c8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},u8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Cs=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(bm);stateManager=P(sx);options=P(ay,{optional:!0})||{};pendingTasks=P(ns);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(n8);urlSerializer=P(Bd);location=P(Fl);urlHandlingStrategy=P(cy);_events=new $t;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(r8);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(ly,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(ey,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new kt;subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==r&&null!==s)if(this.stateManager.handleRouterEvent(i,s),i instanceof Es&&i.code!==Dn.Redirect&&i.code!==Dn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof ws)this.navigated=!0;else if(i instanceof qd){const o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l={browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||"eager"===this.urlUpdateStrategy||i8(r.source),...o};this.scheduleNavigation(a,Gd,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}(function h8(n){return!(n instanceof qv||n instanceof qd)})(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Gd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ty),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let d,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{d=xI(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),d=this.currentUrlTree.root}return TI(d,t,u,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=bs(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Gd,null,i)}navigate(t,i={skipLocationChange:!1}){return function d8(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new I(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(r=!0===i?{...c8}:!1===i?{...u8}:i,bs(t))return bI(this.currentUrlTree,t,r);const s=this.parseUrl(t);return bI(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(null!=s&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});const u=this.pendingTasks.add();return function l8(n,e){n.events.pipe(Mr(t=>t instanceof ws||t instanceof Es||t instanceof Gv||t instanceof zl),Ce(t=>t instanceof ws||t instanceof zl?0:t instanceof Es&&(t.code===Dn.Redirect||t.code===Dn.SupersededByNewNavigation)?2:1),Mr(t=>2!==t),Go(1)).subscribe(()=>{e()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const dy=new O("");function ax(n){return n.routerState.root}function lx(){const n=P(Dt);return e=>{const t=n.get(An);if(e!==t.components[0])return;const i=n.get(Cs),r=n.get(cx);1===n.get(hy)&&i.initialNavigation(),n.get(ux,null,ie.Optional)?.setUpPreloading(),n.get(dy,null,ie.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const cx=new O("",{factory:()=>new $t}),hy=new O("",{providedIn:"root",factory:()=>1}),ux=new O("");let hx=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(N(qi),N(an))};static \u0275dir=G({type:n})}return n})(),As=(()=>{class n extends hx{static \u0275fac=(()=>{let t;return function(r){return(t||(t=At(n)))(r||n)}})();static \u0275dir=G({type:n,features:[Se]})}return n})();const Mi=new O(""),C8={provide:Mi,useExisting:Ne(()=>eh),multi:!0},D8=new O("");let eh=(()=>{class n extends hx{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,null==this._compositionMode&&(this._compositionMode=!function A8(){const n=Dr()?Dr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(N(qi),N(an),N(D8,8))};static \u0275dir=G({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&Le("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},standalone:!1,features:[He([C8]),Se]})}return n})();const Vt=new O(""),Tr=new O("");function Ex(n){return null!=n}function Cx(n){return bl(n)?Mt(n):n}function Ax(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Dx(n,e){return e.map(t=>t(n))}function Sx(n){return n.map(e=>function M8(n){return!n.validate}(e)?e:t=>e.validate(t))}function gy(n){return null!=n?function Mx(n){if(!n)return null;const e=n.filter(Ex);return 0==e.length?null:function(t){return Ax(Dx(t,e))}}(Sx(n)):null}function my(n){return null!=n?function Ix(n){if(!n)return null;const e=n.filter(Ex);return 0==e.length?null:function(t){return function w8(...n){const e=aI(n),{args:t,keys:i}=lI(n),r=new pt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;ni(t[u]).subscribe(ot(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?cI(i,a):a),s.complete())}))}});return e?r.pipe(Nv(e)):r}(Dx(t,e).map(Cx)).pipe(Ce(Ax))}}(Sx(n)):null}function xx(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function vy(n){return n?Array.isArray(n)?n:[n]:[]}function nh(n,e){return Array.isArray(n)?n.includes(e):n===e}function Rx(n,e){const t=vy(e);return vy(n).forEach(r=>{nh(t,r)||t.push(r)}),t}function Nx(n,e){return vy(e).filter(t=>!nh(n,t))}class kx{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=my(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Zt extends kx{name;get formDirective(){return null}get path(){return null}}class Pr extends kx{_parent=null;name=null;valueAccessor=null}class Ox{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let Fx=(()=>{class n extends Ox{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(N(Pr,2))};static \u0275dir=G({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&hd("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Se]})}return n})();const Ql="VALID",rh="INVALID",ea="PENDING",Zl="DISABLED";class ta{}class Vx extends ta{value;source;constructor(e,t){super(),this.value=e,this.source=t}}class by extends ta{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}}class wy extends ta{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}}class sh extends ta{status;source;constructor(e,t){super(),this.status=e,this.source=t}}function oh(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Ay{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return at(this.statusReactive)}set status(e){at(()=>this.statusReactive.set(e))}_status=Xi(()=>this.statusReactive());statusReactive=gi(void 0);get valid(){return this.status===Ql}get invalid(){return this.status===rh}get pending(){return this.status==ea}get disabled(){return this.status===Zl}get enabled(){return this.status!==Zl}errors;get pristine(){return at(this.pristineReactive)}set pristine(e){at(()=>this.pristineReactive.set(e))}_pristine=Xi(()=>this.pristineReactive());pristineReactive=gi(!0);get dirty(){return!this.pristine}get touched(){return at(this.touchedReactive)}set touched(e){at(()=>this.touchedReactive.set(e))}_touched=Xi(()=>this.touchedReactive());touchedReactive=gi(!1);get untouched(){return!this.touched}_events=new $t;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Rx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Rx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Nx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Nx(e,this._rawAsyncValidators))}hasValidator(e){return nh(this._rawValidators,e)}hasAsyncValidator(e){return nh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:i}),t&&!1!==e.emitEvent&&this._events.next(new wy(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&!1!==e.emitEvent&&this._events.next(new wy(!1,i))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:i}),t&&!1!==e.emitEvent&&this._events.next(new by(!1,i))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&!1!==e.emitEvent&&this._events.next(new by(!0,i))}markAsPending(e={}){this.status=ea;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new sh(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Zl,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue();const i=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Vx(this.value,i)),this._events.next(new sh(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ql,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ql||this.status===ea)&&this._runAsyncValidator(i,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Vx(this.value,t)),this._events.next(new sh(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zl:Ql}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ea,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const i=Cx(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new sh(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Pe,this.statusChanges=new Pe}_calculateStatus(){return this._allControlsDisabled()?Zl:this.errors?rh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ea)?ea:this._anyControlsHaveStatus(rh)?rh:Ql}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new by(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new wy(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){oh(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function O8(n){return Array.isArray(n)?gy(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function F8(n){return Array.isArray(n)?my(n):n||null}(this._rawAsyncValidators)}}const na=new O("",{providedIn:"root",factory:()=>ah}),ah="always";function Jl(n,e,t=ah){(function Sy(n,e){const t=function Tx(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(xx(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function Px(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(xx(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();uh(e._rawValidators,r),uh(e._rawAsyncValidators,r)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function B8(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&$x(n,e)})}(n,e),function H8(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function j8(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&$x(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function V8(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function uh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function $x(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Gx(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function qx(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}Promise.resolve();const Yx=class extends Ay{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(function Ey(n){return(oh(n)?n.validators:n)||null}(t),function Cy(n,e){return(oh(e)?e.asyncValidators:n)||null}(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),oh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=qx(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Gx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Gx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){qx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Q8={provide:Pr,useExisting:Ne(()=>Ty)},Kx=Promise.resolve();let Ty=(()=>{class n extends Pr{_changeDetectorRef;callSetDisabledState;control=new Yx;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Pe;constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function xy(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===eh?t=s:function z8(n){return Object.getPrototypeOf(n.constructor)===As}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Iy(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Jl(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Kx.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&function Wo(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(i);Kx.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function lh(n,e){return[...e.path,n]}(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(N(Zt,9),N(Vt,10),N(Tr,10),N(Mi,10),N(kl,8),N(na,8))};static \u0275dir=G({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[He([Q8]),Se,Rn]})}return n})(),Eq=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Mo({type:n});static \u0275inj=Ur({})}return n})(),pT=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:na,useValue:t.callSetDisabledState??ah}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Mo({type:n});static \u0275inj=Ur({imports:[Eq]})}return n})();const Aq=["addListener","removeListener"],Dq=["addEventListener","removeEventListener"],Sq=["on","off"];function et(n,e,t,i){if(ve(t)&&(i=t,t=void 0),i)return et(n,e,t).pipe(Nv(i));const[r,s]=function xq(n){return ve(n.addEventListener)&&ve(n.removeEventListener)}(n)?Dq.map(o=>a=>n[o](e,a,t)):function Mq(n){return ve(n.addListener)&&ve(n.removeListener)}(n)?Aq.map(gT(n,e)):function Iq(n){return ve(n.on)&&ve(n.off)}(n)?Sq.map(gT(n,e)):[];if(!r&&Pv(n))return Lt(o=>et(o,e,t))(ni(n));if(!r)throw new TypeError("Invalid event target");return new pt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function gT(n,e){return t=>i=>n[t](e,i)}class Tq extends kt{constructor(e,t){super()}schedule(e,t=0){return this}}const vh={setInterval(n,e,...t){const{delegate:i}=vh;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=vh;return(e?.clearInterval||clearInterval)(n)},delegate:void 0},mT={now:()=>(mT.delegate||Date).now(),delegate:void 0};class nc{constructor(e,t=nc.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}nc.now=mT.now;const Nq=new class Rq extends nc{constructor(e,t=nc.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}(class Pq extends Tq{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return vh.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&vh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Oc(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}});var ic={d:(n,e)=>{for(var t in e)ic.o(e,t)&&!ic.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e)},Q=globalThis.pdfjsLib={};ic.d(Q,{AbortException:()=>Ms,AnnotationEditorLayer:()=>L5,AnnotationEditorParamsType:()=>K,AnnotationEditorType:()=>ne,AnnotationEditorUIManager:()=>cc,AnnotationLayer:()=>k5,AnnotationMode:()=>Rr,ColorPicker:()=>Bn,DOMSVGFactory:()=>a_,DrawLayer:()=>Ht,FeatureTest:()=>Jt,GlobalWorkerOptions:()=>dc,ImageKind:()=>_h,InvalidPDFException:()=>yT,MissingPDFException:()=>Ss,OPS:()=>oi,OutputScale:()=>zy,PDFDataRangeTransport:()=>eP,PDFDateString:()=>CT,PDFWorker:()=>It,PasswordResponses:()=>Vq,PermissionFlag:()=>Lq,PixelsPerInch:()=>ra,RenderingCancelledException:()=>Hy,TextLayer:()=>tn,UnexpectedResponseException:()=>Ch,Util:()=>L,VerbosityLevel:()=>bh,XfaLayer:()=>rP,build:()=>p5,createValidAbsoluteUrl:()=>Uq,fetchData:()=>Dh,getDocument:()=>s5,getFilenameFromUrl:()=>Zq,getPdfFilenameFromUrl:()=>Jq,getXfaPageViewport:()=>e4,isDataScheme:()=>Sh,isPdfFile:()=>Uy,noContextMenu:()=>Ln,normalizeUnicode:()=>Kq,setLayerDimensions:()=>Is,shadow:()=>fe,version:()=>f5});const Bt=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),vT=[1,0,0,1,0,0],ky=[.001,0,0,.001,0,0],Rr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ne={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},K={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Lq={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},_h={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},bh={ERRORS:0,WARNINGS:1,INFOS:5},oi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Vq={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let wh=bh.WARNINGS;function jq(){return wh}function Eh(n){wh>=bh.INFOS&&console.log(`Info: ${n}`)}function re(n){wh>=bh.WARNINGS&&console.log(`Warning: ${n}`)}function Ve(n){throw new Error(n)}function bt(n,e){n||Ve(e)}function Uq(n,e=null,t=null){if(!n)return null;try{if(t&&"string"==typeof n&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=function Yq(n){return decodeURIComponent(escape(n))}(n)}catch{}const i=e?new URL(n,e):new URL(n);if(function Hq(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i))return i}catch{}return null}function fe(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Nr=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class Oy extends Nr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Fy extends Nr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class yT extends Nr{constructor(e){super(e,"InvalidPDFException")}}class Ss extends Nr{constructor(e){super(e,"MissingPDFException")}}class Ch extends Nr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class $q extends Nr{constructor(e){super(e,"FormatError")}}class Ms extends Nr{constructor(e){super(e,"AbortException")}}function _T(n){("object"!=typeof n||void 0===n?.length)&&Ve("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let r=0;r<e;r+=t){const s=Math.min(r+t,e),o=n.subarray(r,s);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function ia(n){"string"!=typeof n&&Ve("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=255&n.charCodeAt(i);return t}function Ly(n){const e=Object.create(null);for(const[t,i]of n)e[t]=i;return e}class Jt{static get isLittleEndian(){return fe(this,"isLittleEndian",function Wq(){const n=new Uint8Array(4);return n[0]=1,1===new Uint32Array(n.buffer,0,1)[0]}())}static get isEvalSupported(){return fe(this,"isEvalSupported",function Gq(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return fe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&"string"==typeof navigator?.platform?fe(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:"string"==typeof navigator?.userAgent&&navigator.userAgent.includes("Firefox")}):fe(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return fe(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Ah=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class L{static makeHexColor(e,t,i){return`#${Ah[e]}${Ah[t]}${Ah[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],s[0],o[0]),Math.min(i[1],r[1],s[1],o[1]),Math.max(i[0],r[0],s[0],o[0]),Math.max(i[1],r[1],s[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(i+o)/2,l=Math.sqrt((i+o)**2-4*(i*o-(e[2]*t[0]+e[3]*t[2])*(e[0]*t[1]+e[1]*t[3])))/2,u=a-l||1;return[Math.sqrt(a+l||1),Math.sqrt(u)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>o?null:[i,s,r,o]}static#e(e,t,i,r,s,o,a,l,c,u){if(c<=0||c>=1)return;const d=1-c,h=c*c,f=h*c,p=d*(d*(d*e+3*c*t)+3*h*i)+f*r,g=d*(d*(d*s+3*c*o)+3*h*a)+f*l;u[0]=Math.min(u[0],p),u[1]=Math.min(u[1],g),u[2]=Math.max(u[2],p),u[3]=Math.max(u[3],g)}static#t(e,t,i,r,s,o,a,l,c,u,d,h){if(Math.abs(c)<1e-12)return void(Math.abs(u)>=1e-12&&this.#e(e,t,i,r,s,o,a,l,-d/u,h));const f=u**2-4*d*c;if(f<0)return;const p=Math.sqrt(f),g=2*c;this.#e(e,t,i,r,s,o,a,l,(-u+p)/g,h),this.#e(e,t,i,r,s,o,a,l,(-u-p)/g,h)}static bezierBoundingBox(e,t,i,r,s,o,a,l,c){return c?(c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l)):c=[Math.min(e,a),Math.min(t,l),Math.max(e,a),Math.max(t,l)],this.#t(e,i,s,a,t,r,o,l,3*(3*(i-s)-e+a),6*(e-2*i+s),3*(i-e),c),this.#t(e,i,s,a,t,r,o,l,3*(3*(r-o)-t+l),6*(t-2*r+o),3*(r-t),c),c}}let Vy=null,bT=null;function Kq(n){return Vy||(Vy=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,bT=new Map([["\ufb05","\u017ft"]])),n.replaceAll(Vy,(e,t,i)=>t?t.normalize("NFKC"):bT.get(i))}const By="pdfjs_internal_id_",er="http://www.w3.org/2000/svg";class ra{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}function Dh(n){return jy.apply(this,arguments)}function jy(){return(jy=S(function*(n,e="text"){if(oc(n,document.baseURI)){const t=yield fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(200===r.status||0===r.status){switch(e){case"arraybuffer":case"blob":case"json":return void t(r.response)}return void t(r.responseText)}i(new Error(r.statusText))}},r.send(null)})})).apply(this,arguments)}class sc{constructor({viewBox:e,scale:t,rotation:i,offsetX:r=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=r,this.offsetY=s;const a=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let c,u,d,h,f,p,g,v;switch((i%=360)<0&&(i+=360),i){case 180:c=-1,u=0,d=0,h=1;break;case 90:c=0,u=1,d=1,h=0;break;case 270:c=0,u=-1,d=-1,h=0;break;case 0:c=1,u=0,d=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,h=-h),0===c?(f=Math.abs(l-e[1])*t+r,p=Math.abs(a-e[0])*t+s,g=(e[3]-e[1])*t,v=(e[2]-e[0])*t):(f=Math.abs(a-e[0])*t+r,p=Math.abs(l-e[1])*t+s,g=(e[2]-e[0])*t,v=(e[3]-e[1])*t),this.transform=[c*t,u*t,d*t,h*t,f-c*t*a-d*t*l,p-u*t*a-h*t*l],this.width=g,this.height=v}get rawDims(){const{viewBox:e}=this;return fe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new sc({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){return L.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=L.applyTransform([e[0],e[1]],this.transform),i=L.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return L.applyInverseTransform([e,t],this.transform)}}class Hy extends Nr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Sh(n){const e=n.length;let t=0;for(;t<e&&""===n[t].trim();)t++;return"data:"===n.substring(t,t+5).toLowerCase()}function Uy(n){return"string"==typeof n&&/\.pdf$/i.test(n)}function Zq(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function Jq(n,e="document.pdf"){if("string"!=typeof n)return e;if(Sh(n))return re('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(n);let s=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch{}return s||e}class wT{started=Object.create(null);times=[];time(e){e in this.started&&re(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||re(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:s}of this.times)e.push(`${i.padEnd(t)} ${s-r}ms\n`);return e.join("")}}function oc(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return"http:"===t||"https:"===t}catch{return!1}}function Ln(n){n.preventDefault()}function ET(n){console.log("Deprecated API usage: "+n)}class CT{static#e;static toDateObject(e){if(!e||"string"!=typeof e)return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===c?(o+=u,a+=d):"+"===c&&(o-=u,a-=d),new Date(Date.UTC(i,r,s,o,a,l))}}function e4(n,{scale:e=1,rotation:t=0}){const{width:i,height:r}=n.attributes.style,s=[0,0,parseInt(i),parseInt(r)];return new sc({viewBox:s,scale:e,rotation:t})}function $y(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(re(`Not a valid color format: "${n}"`),[0,0,0])}function qe(n){const{a:e,b:t,c:i,d:r,e:s,f:o}=n.getTransform();return[e,t,i,r,s,o]}function tr(n){const{a:e,b:t,c:i,d:r,e:s,f:o}=n.getTransform().invertSelf();return[e,t,i,r,s,o]}function Is(n,e,t=!1,i=!0){if(e instanceof sc){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:o}=n,a=Jt.isCSSRoundSupported,l=`var(--scale-factor) * ${r}px`,c=`var(--scale-factor) * ${s}px`,u=a?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,d=a?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;t&&e.rotation%180!=0?(o.width=d,o.height=u):(o.width=u,o.height=d)}i&&n.setAttribute("data-main-rotation",e.rotation)}class zy{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}}class ac{#e=null;#t=null;#n;#i=null;#r=null;static#s=null;constructor(e){this.#n=e,ac.#s||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;e.addEventListener("contextmenu",Ln,{signal:t}),e.addEventListener("pointerdown",ac.#l,{signal:t});const i=this.#i=document.createElement("div");i.className="buttons",e.append(i);const r=this.#n.toolbarPosition;if(r){const{style:s}=e,o="ltr"===this.#n._uiManager.direction?1-r[0]:r[0];s.insetInlineEnd=100*o+"%",s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),e}get div(){return this.#e}static#l(e){e.stopPropagation()}#c(e){this.#n._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}#u(e){this.#n._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}#a(e){const t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ln,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#r?.shown()}#d(){const{editorType:e,_uiManager:t}=this.#n,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",ac.#s[e]),this.#a(i),i.addEventListener("click",r=>{t.delete()},{signal:t._signal}),this.#i.append(i)}get#o(){const e=document.createElement("div");return e.className="divider",e}addAltText(e){var t=this;return S(function*(){const i=yield e.render();t.#a(i),t.#i.prepend(i,t.#o),t.#r=e})()}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#a(t),this.#i.prepend(t,this.#o)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class n4{#e=null;#t=null;#n;constructor(e){this.#n=e}#i(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Ln,{signal:this.#n._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#s(),e}#r(e,t){let i=0,r=0;for(const s of e){const o=s.y+s.height;if(o<i)continue;const a=s.x+(t?s.width:0);o>i?(r=a,i=o):t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,i]}show(e,t,i){const[r,s]=this.#r(t,i),{style:o}=this.#t||=this.#i();e.append(this.#t),o.insetInlineEnd=100*r+"%",o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=this.#n._signal;e.addEventListener("contextmenu",Ln,{signal:i}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:i}),this.#e.append(e)}}function Mh(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}class r4{#e=0;get id(){return"pdfjs_internal_editor_"+this.#e++}}class Wy{#e=function Xq(){if(typeof crypto<"u"&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(255*Math.random());return _T(n)}();#t=0;#n=null;static get _isSVGFittingCanvas(){const i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;return r.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',fe(this,"_isSVGFittingCanvas",r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),0===new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0])))}#i(e,t){var i=this;return S(function*(){i.#n||=new Map;let r=i.#n.get(e);if(null===r)return null;if(r?.bitmap)return r.refCounter+=1,r;try{let s;if(r||={bitmap:null,id:`image_${i.#e}_${i.#t++}`,refCounter:0,isSvg:!1},"string"==typeof t?(r.url=t,s=yield Dh(t,"blob")):t instanceof File?s=r.file=t:t instanceof Blob&&(s=t),"image/svg+xml"===s.type){const o=Wy._isSVGFittingCanvas,a=new FileReader,l=new Image,c=new Promise((u,d)=>{l.onload=()=>{r.bitmap=l,r.isSvg=!0,u()},a.onload=S(function*(){const h=r.svgUrl=a.result;l.src=(yield o)?`${h}#svgView(preserveAspectRatio(none))`:h}),l.onerror=a.onerror=d});a.readAsDataURL(s),yield c}else r.bitmap=yield createImageBitmap(s);r.refCounter=1}catch(s){console.error(s),r=null}return i.#n.set(e,r),r&&i.#n.set(r.id,r),r})()}getFromFile(e){var t=this;return S(function*(){const{lastModified:i,name:r,size:s,type:o}=e;return t.#i(`${i}_${r}_${s}_${o}`,e)})()}getFromUrl(e){var t=this;return S(function*(){return t.#i(e,e)})()}getFromBlob(e,t){var i=this;return S(function*(){const r=yield t;return i.#i(e,r)})()}getFromId(e){var t=this;return S(function*(){t.#n||=new Map;const i=t.#n.get(e);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return t.getFromFile(i.file);if(i.blobPromise){const{blobPromise:r}=i;return delete i.blobPromise,t.getFromBlob(i.id,r)}return t.getFromUrl(i.url)})()}getFromCanvas(e,t){this.#n||=new Map;let i=this.#n.get(e);if(i?.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,i),this.#n.set(i.id,i),i}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,0!==t.refCounter))return;const{bitmap:i}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=r.convertToBlob()}i.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class s4{#e=[];#t=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),this.#t)return;const l={cmd:e,undo:t,post:i,type:s};if(-1===this.#i)return this.#e.length>0&&(this.#e.length=0),this.#i=0,void this.#e.push(l);if(o&&this.#e[this.#i].type===s)return a&&(l.undo=this.#e[this.#i].undo),void(this.#e[this.#i]=l);const c=this.#i+1;c===this.#n?this.#e.splice(0,1):(this.#i=c,c<this.#e.length&&this.#e.splice(c)),this.#e.push(l)}undo(){if(-1===this.#i)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1,this.#i-=1}redo(){if(this.#i<this.#e.length-1){this.#i+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return-1!==this.#i}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}class lc{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Jt.platform;for(const[i,r,s={}]of e)for(const o of i){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(this.#e(t));if(!i)return;const{callback:r,options:{bubbles:s=!1,args:o=[],checker:a=null}}=i;a&&!a(e,t)||(r.bind(e,...o,t)(),s||(t.stopPropagation(),t.preventDefault()))}}class Gy{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function t4(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,$y(i))}e.remove()}(e),fe(this,"_colors",e)}convert(e){const t=$y(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,r]of this._colors)if(r.every((s,o)=>s===t[o]))return Gy._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?L.makeHexColor(...t):e}}let cc=(()=>{class n{#e=new AbortController;#t=null;#n=new Map;#i=new Map;#r=null;#s=null;#l=null;#c=new s4;#u=null;#a=0;#d=new Set;#o=null;#h=null;#p=new Set;#f=!1;#g=!1;#v=!1;#m=null;#y=null;#b=null;#C=null;#w=!1;#E=null;#T=new r4;#M=!1;#A=!1;#I=null;#S=null;#P=null;#N=null;#D=ne.NONE;#_=new Set;#x=null;#R=null;#L=null;#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#F=null;#V=null;#B=null;#k=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=n.prototype,i=a=>a.#V.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&a.hasSomethingToControl(),r=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return"text"!==c&&"number"!==c}return!0},s=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return fe(this,"_keyboardManager",new lc([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],t.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:r}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#V.contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:i}]]))}constructor(t,i,r,s,o,a,l,c,u,d,h){const f=this._signal=this.#e.signal;this.#V=t,this.#B=i,this.#r=r,this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:f}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),s._on("setpreference",this.onSetPreference.bind(this),{signal:f}),s._on("switchannotationeditorparams",p=>this.updateParams(p.type,p.value),{signal:f}),this.#ee(),this.#re(),this.#q(),this.#s=o.annotationStorage,this.#m=o.filterFactory,this.#R=a,this.#C=l||null,this.#f=c,this.#g=u,this.#v=d,this.#N=h||null,this.viewParameters={realScale:ra.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#k?.resolve(),this.#k=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#_.clear(),this.#c.destroy(),this.#r?.destroy(),this.#E?.hide(),this.#E=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#F&&(clearTimeout(this.#F),this.#F=null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#N}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return fe(this,"hcmFilter",this.#R?this.#m.addHCMFilter(this.#R.foreground,this.#R.background):"none")}get direction(){return fe(this,"direction",getComputedStyle(this.#V).direction)}get highlightColors(){return fe(this,"highlightColors",this.#C?new Map(this.#C.split(",").map(t=>t.split("=").map(i=>i.trim()))):null)}get highlightColorNames(){return fe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){this.#P=t}editAltText(t,i=!1){this.#r?.editAltText(this,t,i)}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){"enableNewAltTextWhenAddingImage"===t&&(this.#v=i)}onPageChanging({pageNumber:t}){this.#a=t-1}focusMainContainer(){this.#V.focus()}findParent(t,i){for(const r of this.#i.values()){const{x:s,y:o,width:a,height:l}=r.div.getBoundingClientRect();if(t>=s&&t<=s+a&&i>=o&&i<=o+l)return r}return null}disableUserSelect(t=!1){this.#B.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ra.PDF_TO_CSS_UNITS;for(const i of this.#p)i.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#z({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#G(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const r of this.#i.values())if(r.hasTextLayer(t))return r;return null}highlightSelection(t=""){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:o,focusOffset:a}=i,l=i.toString(),u=this.#z(i).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;i.empty();const h=this.#G(u),f=this.#D===ne.NONE,p=()=>{h?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:r,anchorOffset:s,focusNode:o,focusOffset:a,text:l}),f&&this.showAllEditors("highlight",!0,!0)};f?this.switchToMode(ne.HIGHLIGHT,p):p()}#Z(){const t=document.getSelection();if(!t||t.isCollapsed)return;const r=this.#z(t).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(this.#E||=new n4(this),this.#E.show(r,s,"ltr"===this.direction))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}#J(){const t=document.getSelection();if(!t||t.isCollapsed)return void(this.#x&&(this.#E?.hide(),this.#x=null,this.#O({hasSelectedText:!1})));const{anchorNode:i}=t;if(i===this.#x)return;const s=this.#z(t).closest(".textLayer");if(s){if(this.#E?.hide(),this.#x=i,this.#O({hasSelectedText:!0}),(this.#D===ne.HIGHLIGHT||this.#D===ne.NONE)&&(this.#D===ne.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#D===ne.HIGHLIGHT?this.#G(s):null;o?.toggleDrawing();const a=new AbortController,l=this.combinedSignal(a),c=u=>{"pointerup"===u.type&&0!==u.button||(a.abort(),o?.toggleDrawing(!0),"pointerup"===u.type&&this.#W("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}}else this.#x&&(this.#E?.hide(),this.#x=null,this.#O({hasSelectedText:!1}))}#W(t=""){this.#D===ne.HIGHLIGHT?this.highlightSelection(t):this.#f&&this.#Z()}#ee(){document.addEventListener("selectionchange",this.#J.bind(this),{signal:this._signal})}#te(){if(this.#b)return;this.#b=new AbortController;const t=this.combinedSignal(this.#b);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ne(){this.#b?.abort(),this.#b=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#_)if(i.div.contains(t)){this.#S=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#S)return;const[t,i]=this.#S;this.#S=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#q(){if(this.#I)return;this.#I=new AbortController;const t=this.combinedSignal(this.#I);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ie(){this.#I?.abort(),this.#I=null}#Y(){if(this.#u)return;this.#u=new AbortController;const t=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#K(){this.#u?.abort(),this.#u=null}#re(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#q(),this.#Y()}removeEditListeners(){this.#ie(),this.#K()}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const r of this.#h)if(r.isHandlingMimeForPasting(i))return t.dataTransfer.dropEffect="copy",void t.preventDefault()}drop(t){for(const i of t.dataTransfer.items)for(const r of this.#h)if(r.isHandlingMimeForPasting(i.type))return r.paste(i,this.currentLayer),void t.preventDefault()}copy(t){if(t.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const r of this.#_){const s=r.serialize(!0);s&&i.push(s)}0!==i.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}paste(t){var i=this;return S(function*(){t.preventDefault();const{clipboardData:r}=t;for(const a of r.items)for(const l of i.#h)if(l.isHandlingMimeForPasting(a.type))return void l.paste(a,i.currentLayer);let s=r.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(a){return void re(`paste: "${a.message}".`)}if(!Array.isArray(s))return;i.unselectAll();const o=i.currentLayer;try{const a=[];for(const u of s){const d=yield o.deserialize(u);if(!d)return;a.push(d)}const l=()=>{for(const u of a)i.#X(u);i.#Q(a)};i.addCommands({cmd:l,undo:()=>{for(const u of a)u.remove()},mustExec:!0})}catch(a){re(`paste: "${a.message}".`)}})()}keydown(t){!this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!0),this.#D!==ne.NONE&&!this.isEditorHandlingKeyboard&&n._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&"Shift"===t.key&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}#O(t){Object.entries(t).some(([r,s])=>this.#H[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#H,t)}),this.#D===ne.HIGHLIGHT&&!1===t.hasSelectedEditor&&this.#U([[K.HIGHLIGHT_FREE,!0]]))}#U(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#te(),this.#Y(),this.#O({isEditing:this.#D!==ne.NONE,isEmpty:this.#$(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ne(),this.#K(),this.#O({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#h){this.#h=t;for(const i of this.#h)this.#U(i.defaultPropertiesToUpdate)}}getId(){return this.#T.id}get currentLayer(){return this.#i.get(this.#a)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#a}addLayer(t){this.#i.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}updateMode(t){var i=this;return S(function*(r,s=null,o=!1){if(i.#D!==r&&(!i.#k||(yield i.#k.promise,i.#k))){if(i.#k=Promise.withResolvers(),i.#D=r,r===ne.NONE)return i.setEditingState(!1),i.#oe(),void i.#k.resolve();i.setEditingState(!0),yield i.#se(),i.unselectAll();for(const a of i.#i.values())a.updateMode(r);if(!s)return o&&i.addNewEditorFromKeyboard(),void i.#k.resolve();for(const a of i.#n.values())a.annotationElementId===s?(i.setSelected(a),a.enterInEditMode()):a.unselect();i.#k.resolve()}}).apply(this,arguments)}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#D&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,i){if(this.#h){switch(t){case K.CREATE:return void this.currentLayer.addNewEditor();case K.HIGHLIGHT_DEFAULT_COLOR:this.#P?.updateColor(i);break;case K.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#L||=new Map).set(t,i),this.showAllEditors("highlight",i)}for(const r of this.#_)r.updateParams(t,i);for(const r of this.#h)r.updateDefaultParams(t,i)}}showAllEditors(t,i,r=!1){for(const o of this.#n.values())o.editorType===t&&o.show(i);(this.#L?.get(K.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#U([[K.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#A!==t){this.#A=t;for(const i of this.#i.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}#se(){var t=this;return S(function*(){if(!t.#M){t.#M=!0;const i=[];for(const r of t.#i.values())i.push(r.enable());yield Promise.all(i);for(const r of t.#n.values())r.enable()}})()}#oe(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const i=[];for(const r of this.#n.values())r.pageIndex===t&&i.push(r);return i}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#n.delete(t.id),this.unselect(t),(!t.annotationElementId||!this.#d.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#d.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#d.has(t)}removeDeletedAnnotationElement(t){this.#d.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#X(t){const i=this.#i.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#t!==t&&(this.#t=t,t&&this.#U(t.propertiesToUpdate))}get#ae(){let t=null;for(t of this.#_);return t}updateUI(t){this.#ae===t&&this.#U(t.propertiesToUpdate)}toggleSelected(t){if(this.#_.has(t))return this.#_.delete(t),t.unselect(),void this.#O({hasSelectedEditor:this.hasSelection});this.#_.add(t),t.select(),this.#U(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}setSelected(t){for(const i of this.#_)i!==t&&i.unselect();this.#_.clear(),this.#_.add(t),t.select(),this.#U(t.propertiesToUpdate),this.#O({hasSelectedEditor:!0})}isSelected(t){return this.#_.has(t)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(t){t.unselect(),this.#_.delete(t),this.#O({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#_.size}get isEnterHandled(){return 1===this.#_.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#O({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#$()})}redo(){this.#c.redo(),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#$()})}addCommands(t){this.#c.add(t),this.#O({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#$()})}#$(){if(0===this.#n.size)return!0;if(1===this.#n.size)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...this.#_];this.addCommands({cmd:()=>{for(const s of t)s.remove()},undo:()=>{for(const s of t)this.#X(s)},mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#Q(t){for(const i of this.#_)i.unselect();this.#_.clear();for(const i of t)i.isEmpty()||(this.#_.add(i),i.select());this.#O({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#_)t.commit();this.#Q(this.#n.values())}unselectAll(){if((!this.#t||(this.#t.commitOrRemove(),this.#D===ne.NONE))&&this.hasSelection){for(const t of this.#_)t.unselect();this.#_.clear(),this.#O({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=i;const[s,o]=this.#j,a=[...this.#_];this.#F&&clearTimeout(this.#F),this.#F=setTimeout(()=>{this.#F=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const c of a)this.#n.has(c.id)&&c.translateInPage(s,o)},undo:()=>{for(const c of a)this.#n.has(c.id)&&c.translateInPage(-s,-o)},mustExec:!1})},1e3);for(const c of a)c.translateInPage(t,i)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#o=new Map;for(const t of this.#_)this.#o.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#o)return!1;this.disableUserSelect(!1);const t=this.#o;this.#o=null;let i=!1;for(const[{x:s,y:o,pageIndex:a},l]of t)l.newX=s,l.newY=o,l.newPageIndex=a,i||=s!==l.savedX||o!==l.savedY||a!==l.savedPageIndex;if(!i)return!1;const r=(s,o,a,l)=>{if(this.#n.has(s.id)){const c=this.#i.get(l);c?s._setParentAndPosition(c,o,a):(s.pageIndex=l,s.x=o,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:o,newY:a,newPageIndex:l}]of t)r(s,o,a,l)},undo:()=>{for(const[s,{savedX:o,savedY:a,savedPageIndex:l}]of t)r(s,o,a,l)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#o)for(const r of this.#o.keys())r.drag(t,i)}rebuild(t){if(null===t.parent){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#_.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#t===t}getActive(){return this.#t}getMode(){return this.#D}get imageManager(){return fe(this,"imageManager",new Wy)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let u=0,d=i.rangeCount;u<d;u++)if(!t.contains(i.getRangeAt(u).commonAncestorContainer))return null;const{x:r,y:s,width:o,height:a}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(u,d,h,f)=>({x:(d-s)/a,y:1-(u+h-r)/o,width:f/a,height:h/o});break;case"180":l=(u,d,h,f)=>({x:1-(u+h-r)/o,y:1-(d+f-s)/a,width:h/o,height:f/a});break;case"270":l=(u,d,h,f)=>({x:1-(d+f-s)/a,y:(u-r)/o,width:f/a,height:h/o});break;default:l=(u,d,h,f)=>({x:(u-r)/o,y:(d-s)/a,width:h/o,height:f/a})}const c=[];for(let u=0,d=i.rangeCount;u<d;u++){const h=i.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:p,width:g,height:v}of h.getClientRects())0===g||0===v||c.push(l(f,p,g,v))}return 0===c.length?null:c}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#l||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#l?.delete(t)}renderAnnotationElement(t){const i=this.#l?.get(t.data.id);if(!i)return;const r=this.#s.getRawValue(i);r&&(this.#D===ne.NONE&&!r.hasBeenModified||r.renderAnnotationElement(t))}}return n})(),AT=(()=>{class n{#e=null;#t=!1;#n=null;#i=null;#r=null;#s=null;#l=!1;#c=null;#u=null;#a=null;#d=null;#o=!1;static#h=null;static _l10n=null;constructor(t){this.#u=t,this.#o=t._uiManager.useNewAltTextFlow,n.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){n._l10n??=t}render(){var t=this;return S(function*(){const i=t.#n=document.createElement("button");i.className="altText",i.tabIndex="0";const r=t.#i=document.createElement("span");i.append(r),t.#o?(i.classList.add("new"),i.setAttribute("data-l10n-id",n.#h.missing),r.setAttribute("data-l10n-id",n.#h["missing-label"])):(i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=t.#u._uiManager._signal;i.addEventListener("contextmenu",Ln,{signal:s}),i.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:s});const o=a=>{a.preventDefault(),t.#u._uiManager.editAltText(t.#u),t.#o&&t.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:t.#p}})};return i.addEventListener("click",o,{capture:!0,signal:s}),i.addEventListener("keydown",a=>{a.target===i&&"Enter"===a.key&&(t.#l=!0,o(a))},{signal:s}),yield t.#f(),i})()}get#p(){return(this.#e?"added":null===this.#e&&this.guessedText&&"review")||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#o?null===this.#e:!this.#e&&!this.#t}hasData(){return this.#o?null!==this.#e||!!this.#a:this.isEmpty()}get guessedText(){return this.#a}setGuessedText(t){var i=this;return S(function*(){null===i.#e&&(i.#a=t,i.#d=yield n._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),i.#f())})()}toggleAltTextBadge(t=!1){if(!this.#o||this.#e)return this.#c?.remove(),void(this.#c=null);if(!this.#c){const i=this.#c=document.createElement("div");i.className="noAltTextBadge",this.#u.div.append(i)}this.#c.classList.toggle("hidden",!t)}serialize(t){let i=this.#e;return!t&&this.#a===i&&(i=this.#d),{altText:i,decorative:this.#t,guessedText:this.#a,textWithDisclaimer:this.#d}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:t,decorative:i,guessedText:r,textWithDisclaimer:s,cancel:o=!1}){r&&(this.#a=r,this.#d=s),(this.#e!==t||this.#t!==i)&&(o||(this.#e=t,this.#t=i),this.#f())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#c?.remove(),this.#c=null}#f(){var t=this;return S(function*(){const i=t.#n;if(!i)return;if(t.#o){if(i.classList.toggle("done",!!t.#e),i.setAttribute("data-l10n-id",n.#h[t.#p]),t.#i?.setAttribute("data-l10n-id",n.#h[`${t.#p}-label`]),!t.#e)return void t.#r?.remove()}else{if(!t.#e&&!t.#t)return i.classList.remove("done"),void t.#r?.remove();i.classList.add("done"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=t.#r;if(!r){t.#r=r=document.createElement("span"),r.className="tooltip",r.setAttribute("role","tooltip"),r.id=`alt-text-tooltip-${t.#u.id}`;const o=100,a=t.#u._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(t.#s),t.#s=null},{once:!0}),i.addEventListener("mouseenter",()=>{t.#s=setTimeout(()=>{t.#s=null,t.#r.classList.add("show"),t.#u._reportTelemetry({action:"alt_text_tooltip"})},o)},{signal:a}),i.addEventListener("mouseleave",()=>{t.#s&&(clearTimeout(t.#s),t.#s=null),t.#r?.classList.remove("show")},{signal:a})}t.#t?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=t.#e),r.parentNode||i.append(r),t.#u.getImageForAltText()?.setAttribute("aria-describedby",r.id)})()}}return n})();class X{#e=null;#t=null;#n=null;#i=!1;#r=!1;#s=null;#l=null;#c=null;#u="";#a=!1;#d=null;#o=!1;#h=!1;#p=!1;#f=null;#g=0;#v=0;#m=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#y=!1;#b=X._zIndex++;static _borderLineWidth=-1;static _colorManager=new Gy;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=X.prototype._resizeWithKeyboard,t=cc.TRANSLATE_SMALL,i=cc.TRANSLATE_BIG;return fe(this,"_resizerKeyboardManager",new lc([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],X.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[s,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return fe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new o4({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(X._l10n??=e,X._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),-1!==X._borderLineWidth)return;const i=getComputedStyle(document.documentElement);X._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ve("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#y}set _isDraggable(e){this.#y=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#b}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#L(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#a?this.#a=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[s,o]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/s,this.y=(t+r)/o,this.fixAndSetPosition()}#C([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this.fixAndSetPosition()}translate(e,t){this.#C(this.parentDimensions,e,t)}translateInPage(e,t){this.#d||=[this.x,this.y],this.#C(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#d||=[this.x,this.y];const[i,r]=this.parentDimensions;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:c,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[a,l]=this.getBaseTranslation();s+=a,o+=l,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=X,r=i/e,s=i/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:r,y:s,width:o,height:a}=this;if(o*=t,a*=i,r*=t,s*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-o,r)),s=Math.max(0,Math.min(i-a,s));break;case 90:r=Math.max(0,Math.min(t-a,r)),s=Math.min(i,Math.max(o,s));break;case 180:r=Math.min(t,Math.max(o,r)),s=Math.min(i,Math.max(a,s));break;case 270:r=Math.min(t,Math.max(a,r)),s=Math.max(0,Math.min(i-o,s))}this.x=r/=t,this.y=s/=i;const[l,c]=this.getBaseTranslation();r+=l,s+=c;const{style:u}=this.div;u.left=`${(100*r).toFixed(2)}%`,u.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#w(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return X.#w(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return X.#w(e,t,360-this.parentRotation)}#E(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,r]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,this.#r||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),s=!this.#r&&t.endsWith("%");if(r&&s)return;const[o,a]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!this.#r&&!s&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#T(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const r=document.createElement("div");this.#s.append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",this.#M.bind(this,i),{signal:t}),r.addEventListener("contextmenu",Ln,{signal:t}),r.tabIndex=-1}this.div.prepend(this.#s)}#M(e,t){t.preventDefault();const{isMac:i}=Jt.platform;if(0!==t.button||t.ctrlKey&&i)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#I.bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("contextmenu",Ln,{signal:o});const a=this.x,l=this.y,c=this.width,u=this.height,d=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=d,this.div.style.cursor=h,this.#A(a,l,c,u)};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})}#A(e,t,i,r){const s=this.x,o=this.y,a=this.width,l=this.height;s===e&&o===t&&a===i&&l===r||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=s,this.y=o;const[c,u]=this.parentDimensions;this.setDims(c*a,u*l),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=r,this.x=e,this.y=t;const[c,u]=this.parentDimensions;this.setDims(c*i,u*r),this.fixAndSetPosition()},mustExec:!0})}#I(e,t){const[i,r]=this.parentDimensions,s=this.x,o=this.y,a=this.width,l=this.height,c=X.MIN_SIZE/i,u=X.MIN_SIZE/r,d=B=>Math.round(1e4*B)/1e4,h=this.#E(this.rotation),f=(B,se)=>[h[0]*B+h[2]*se,h[1]*B+h[3]*se],p=this.#E(360-this.rotation);let v,m,y=!1,_=!1;switch(e){case"topLeft":y=!0,v=(B,se)=>[0,0],m=(B,se)=>[B,se];break;case"topMiddle":v=(B,se)=>[B/2,0],m=(B,se)=>[B/2,se];break;case"topRight":y=!0,v=(B,se)=>[B,0],m=(B,se)=>[0,se];break;case"middleRight":_=!0,v=(B,se)=>[B,se/2],m=(B,se)=>[0,se/2];break;case"bottomRight":y=!0,v=(B,se)=>[B,se],m=(B,se)=>[0,0];break;case"bottomMiddle":v=(B,se)=>[B/2,se],m=(B,se)=>[B/2,0];break;case"bottomLeft":y=!0,v=(B,se)=>[0,se],m=(B,se)=>[B,0];break;case"middleLeft":_=!0,v=(B,se)=>[0,se/2],m=(B,se)=>[B,se/2]}const b=v(a,l),w=m(a,l);let A=f(...w);const x=d(s+A[0]),T=d(o+A[1]);let E=1,D=1,[k,ue]=this.screenToPageTranslation(t.movementX,t.movementY);if([k,ue]=[p[0]*(B=k/i)+p[2]*(se=ue/r),p[1]*B+p[3]*se],y){const B=Math.hypot(a,l);E=D=Math.max(Math.min(Math.hypot(w[0]-b[0]-k,w[1]-b[1]-ue)/B,1/a,1/l),c/a,u/l)}else _?E=Math.max(c,Math.min(1,Math.abs(w[0]-b[0]-k)))/a:D=Math.max(u,Math.min(1,Math.abs(w[1]-b[1]-ue)))/l;var B,se;const ce=d(a*E),de=d(l*D);A=f(...m(ce,de));const Te=x-A[0],nt=T-A[1];this.width=ce,this.height=de,this.x=Te,this.y=nt,this.setDims(i*ce,r*de),this.fixAndSetPosition()}altTextFinish(){this.#n?.finish()}addEditToolbar(){var e=this;return S(function*(){return e._editToolbar||e.#h||(e._editToolbar=new ac(e),e.div.append(e._editToolbar.render()),e.#n&&(yield e._editToolbar.addAltText(e.#n))),e._editToolbar})()}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){var e=this;return S(function*(){e.#n||(AT.initialize(X._l10n),e.#n=new AT(e),e.#e&&(e.#n.data=e.#e,e.#e=null),yield e.addEditToolbar())})()}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}setGuessedAltText(e){var t=this;return S(function*(){yield t.#n?.setGuessedText(e)})()}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#i?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#N();const[e,t]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),Mh(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Jt.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(this.#a=!0,this._isDraggable?this.#P(e):this.#S(e))}get isSelected(){return this._uiManager.isSelected(this)}#S(e){const{isMac:t}=Jt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#P(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const i=new AbortController,r=this._uiManager.combinedSignal(i);t&&(this.div.classList.add("moving"),this.#g=e.clientX,this.#v=e.clientY,window.addEventListener("pointermove",a=>{const{clientX:l,clientY:c}=a,[u,d]=this.screenToPageTranslation(l-this.#g,c-this.#v);this.#g=l,this.#v=c,this._uiManager.dragSelectedEditors(u,d)},{passive:!0,capture:!0,signal:r}));const s=()=>{i.abort(),t&&this.div.classList.remove("moving"),this.#a=!1,this._uiManager.endDragSession()||this.#S(e)};window.addEventListener("pointerup",s,{signal:r}),window.addEventListener("blur",s,{signal:r})}moveInDOM(){this.#f&&clearTimeout(this.#f),this.#f=setTimeout(()=>{this.#f=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const r=this.parentScale,[s,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/r,u=t/r,d=this.x*s,h=this.y*o,f=this.width*s,p=this.height*o;switch(i){case 0:return[d+c+a,o-h-u-p+l,d+c+f+a,o-h-u+l];case 90:return[d+u+a,o-h+c+l,d+u+p+a,o-h+c+f+l];case 180:return[d-c-f+a,o-h+u+l,d-c+a,o-h+u+p+l];case 270:return[d-u-p+a,o-h-c-f+l,d-u+a,o-h-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,s,o]=e,a=s-i,l=o-r;switch(this.rotation){case 0:return[i,t-o,a,l];case 90:return[i,t-r,l,a];case 180:return[s,t-r,a,l];case 270:return[s,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#N(){if(this.#c||!this.div)return;this.#c=new AbortController;const e=this._uiManager.combinedSignal(this.#c);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#N()}rotate(e){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){Ve("An editor must be serializable")}static deserialize(e,t,i){var r=this;return S(function*(){const s=new r.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});s.rotation=e.rotation,s.#e=e.accessibilityData;const[o,a]=s.pageDimensions,[l,c,u,d]=s.getRectInCurrentCoords(e.rect,a);return s.x=l/o,s.y=c/a,s.width=u/o,s.height=d/a,s})()}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.#c?.abort(),this.#c=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#f&&(clearTimeout(this.#f),this.#f=null),this.#L(),this.removeEditToolbar(),this.#m){for(const e of this.#m.values())clearTimeout(e);this.#m=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#T(),this.#s.classList.remove("hidden"),Mh(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#s.children;if(!this.#t){this.#t=Array.from(t);const o=this.#D.bind(this),a=this.#_.bind(this),l=this._uiManager._signal;for(const c of this.#t){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",this.#x.bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",X._l10nResizer[u])}}const i=this.#t[0];let r=0;for(const o of t){if(o===i)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==r){if(s<r)for(let a=0;a<r-s;a++)this.#s.append(this.#s.firstChild);else if(s>r)for(let a=0;a<s-r;a++)this.#s.firstChild.before(this.#s.lastChild);let o=0;for(const a of t){const c=this.#t[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",X._l10nResizer[c])}}this.#R(0),this.#p=!0,this.#s.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#D(e){X._resizerKeyboardManager.exec(this,e)}#_(e){this.#p&&e.relatedTarget?.parentNode!==this.#s&&this.#L()}#x(e){this.#u=this.#p?e:""}#R(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#p&&this.#I(this.#u,{movementX:e,movementY:t})}#L(){if(this.#p=!1,this.#R(-1),this.#l){const{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=this.#l;this.#A(e,t,i,r),this.#l=null}}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){this.makeResizable(),this.div?.classList.add("selectedEditor"),this._editToolbar?(this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()})}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#o}set isEditing(e){this.#o=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#r=!0;const i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#m||=new Map;const{action:i}=e;let r=this.#m.get(i);return r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),this.#m.delete(i),0===this.#m.size&&(this.#m=null)},X._telemetryTimeout),void this.#m.set(i,r)}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===t?.nodeName&&t.classList.contains("annotationContent")&&t.remove()}}class o4 extends X{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const DT=3285377520,Vn=4294901760,Ii=65535;class ST{constructor(e){this.h1=e?4294967295&e:DT,this.h2=e?4294967295&e:DT}update(e){let t,i;if("string"==typeof e){t=new Uint8Array(2*e.length),i=0;for(let g=0,v=e.length;g<v;g++){const m=e.charCodeAt(g);m<=255?t[i++]=m:(t[i++]=m>>>8,t[i++]=255&m)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),i=t.byteLength}const r=i>>2,s=i-4*r,o=new Uint32Array(t.buffer,0,r);let a=0,l=0,c=this.h1,u=this.h2;const d=3432918353,h=461845907,f=d&Ii,p=h&Ii;for(let g=0;g<r;g++)1&g?(a=o[g],a=a*d&Vn|a*f&Ii,a=a<<15|a>>>17,a=a*h&Vn|a*p&Ii,c^=a,c=c<<13|c>>>19,c=5*c+3864292196):(l=o[g],l=l*d&Vn|l*f&Ii,l=l<<15|l>>>17,l=l*h&Vn|l*p&Ii,u^=l,u=u<<13|u>>>19,u=5*u+3864292196);switch(a=0,s){case 3:a^=t[4*r+2]<<16;case 2:a^=t[4*r+1]<<8;case 1:a^=t[4*r],a=a*d&Vn|a*f&Ii,a=a<<15|a>>>17,a=a*h&Vn|a*p&Ii,1&r?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&Vn|36045*e&Ii,t=4283543511*t&Vn|(2950163797*(t<<16|e>>>16)&Vn)>>>16,e^=t>>>1,e=444984403*e&Vn|60499*e&Ii,t=3301882366*t&Vn|(3120437893*(t<<16|e>>>16)&Vn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const qy=Object.freeze({map:null,hash:"",transfer:void 0});class Yy{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=this.#n.get(e);return void 0===i?t:Object.assign(t,i)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),0===this.#n.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const t of this.#n.values())if(t instanceof X)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=this.#n.get(e);let r=!1;if(void 0!==i)for(const[s,o]of Object.entries(t))i[s]!==o&&(r=!0,i[s]=o);else r=!0,this.#n.set(e,t);r&&this.#i(),t instanceof X&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?Ly(this.#n):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return this.#n.size}#i(){this.#e||(this.#e=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new MT(this)}get serializable(){if(0===this.#n.size)return qy;const e=new Map,t=new ST,i=[],r=Object.create(null);let s=!1;for(const[o,a]of this.#n){const l=a instanceof X?a.serialize(!1,r):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),s||=!!l.bitmap)}if(s)for(const o of e.values())o.bitmap&&i.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:qy}get editorStats(){let e=null;const t=new Map;for(const i of this.#n.values()){if(!(i instanceof X))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:s}=r;t.has(s)||t.set(s,Object.getPrototypeOf(i).constructor),e||=Object.create(null);const o=e[s]||=new Map;for(const[a,l]of Object.entries(r)){if("type"===a)continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const u=c.get(l)??0;c.set(l,u+1)}}for(const[i,r]of t)e[i]=r.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#n.values())!(t instanceof X)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}}class MT extends Yy{#e;constructor(e){super();const{map:t,hash:i,transfer:r}=e.serializable,s=structuredClone(t,r?{transfer:r}:null);this.#e={map:s,hash:i,transfer:r}}get print(){Ve("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return fe(this,"modifiedIds",{ids:new Set,hash:""})}}class a4{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(e){var t=this;return S(function*({systemFontInfo:i,_inspectFont:r}){if(i&&!t.#e.has(i.loadedName)){if(bt(!t.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),t.isFontLoadingAPISupported){const{loadedName:s,src:o,style:a}=i,l=new FontFace(s,o,a);t.addNativeFontFace(l);try{yield l.load(),t.#e.add(s),r?.(i)}catch{re(`Cannot load system font: ${i.baseFontName}, installing it could help to improve PDF rendering.`),t.removeNativeFontFace(l)}return}Ve("Not implemented: loadSystemFont without the Font Loading API.")}}).apply(this,arguments)}bind(e){var t=this;return S(function*(){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void(yield t.loadSystemFont(e));if(t.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){t.addNativeFontFace(r);try{yield r.loaded}catch(s){throw re(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const i=e.createFontFaceRule();if(i){if(t.insertRule(i),t.isSyncFontLoadingSupported)return;yield new Promise(r=>{const s=t._queueLoadingCallback(r);t._prepareFontLoadEvent(e,s)})}})()}get isFontLoadingAPISupported(){return fe(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){let e=!1;return(Bt||typeof navigator<"u"&&"string"==typeof navigator?.userAgent&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),fe(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){const{loadingRequests:i}=this,r={done:!1,complete:function t(){for(bt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}},callback:e};return i.push(r),r}get _loadTestFont(){return fe(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function i(b,w){return b.charCodeAt(w)<<24|b.charCodeAt(w+1)<<16|b.charCodeAt(w+2)<<8|255&b.charCodeAt(w+3)}function r(b,w,A,x){return b.substring(0,w)+x+b.substring(w+A)}let s,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;const d=`lt${Date.now()}${this.loadTestFontId++}`;let h=this._loadTestFont;h=r(h,976,d.length,d);const g=1482184792;let v=i(h,16);for(s=0,o=d.length-3;s<o;s+=4)v=v-g+i(d,s)|0;s<d.length&&(v=v-g+i(d+"XXX",s)|0),h=r(h,16,4,function zq(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,255&n)}(v));const m=`url(data:font/opentype;base64,${btoa(h)});`;this.insertRule(`@font-face {font-family:"${d}";src:${m}}`);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const b of[e.loadedName,d]){const w=this._document.createElement("span");w.textContent="Hi",w.style.fontFamily=b,_.append(w)}this._document.body.append(_),function u(b,w){if(++c>30)return re("Load test font never loaded."),void w();l.font="30px "+b,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?w():setTimeout(u.bind(null,b,w))}(d,()=>{_.remove(),t.complete()})}}class l4{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=!0===t,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${function Qq(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(_T(n))}(this.data)});`;let t;if(this.cssFontInfo){let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}else t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(s){re(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(i)||0===i.length)return this.compiledGlyphs[t]=function(s,o){};const r=[];for(let s=0,o=i.length;s<o;)switch(i[s++]){case 0:{const[a,l,c,u,d,h]=i.slice(s,s+6);r.push(f=>f.bezierCurveTo(a,l,c,u,d,h)),s+=6}break;case 1:{const[a,l]=i.slice(s,s+2);r.push(c=>c.moveTo(a,l)),s+=2}break;case 2:{const[a,l]=i.slice(s,s+2);r.push(c=>c.lineTo(a,l)),s+=2}break;case 3:{const[a,l,c,u]=i.slice(s,s+4);r.push(d=>d.quadraticCurveTo(a,l,c,u)),s+=4}break;case 4:r.push(a=>a.restore());break;case 5:r.push(a=>a.save());break;case 6:bt(2===r.length,"Scale command is only valid at the third position.");break;case 7:{const[a,l,c,u,d,h]=i.slice(s,s+6);r.push(f=>f.transform(a,l,c,u,d,h)),s+=6}break;case 8:{const[a,l]=i.slice(s,s+2);r.push(c=>c.translate(a,l)),s+=2}}return this.compiledGlyphs[t]=function(o,a){r[0](o),r[1](o),o.scale(a,-a);for(let l=2,c=r.length;l<c;l++)r[l](o)}}}class IT{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ve("Abstract method `_createCanvas` called.")}}class xT{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}fetch(e){var t=this;return S(function*({name:i}){if(!t.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!i)throw new Error("CMap name must be specified.");const r=t.baseUrl+i+(t.isCompressed?".bcmap":"");return t._fetch(r).then(s=>({cMapData:s,isCompressed:t.isCompressed})).catch(s=>{throw new Error(`Unable to load ${t.isCompressed?"binary ":""}CMap at: ${r}`)})}).apply(this,arguments)}_fetch(e){return S(function*(){Ve("Abstract method `_fetch` called.")})()}}class TT extends xT{_fetch(e){var t=this;return S(function*(){const i=yield Dh(e,t.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):ia(i)})()}}class PT{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,r,s){return"none"}destroy(e=!1){}}class RT{constructor({baseUrl:e=null}){this.baseUrl=e}fetch(e){var t=this;return S(function*({filename:i}){if(!t.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!i)throw new Error("Font filename must be specified.");const r=`${t.baseUrl}${i}`;return t._fetch(r).catch(s=>{throw new Error(`Unable to load font data at: ${r}`)})}).apply(this,arguments)}_fetch(e){return S(function*(){Ve("Abstract method `_fetch` called.")})()}}class NT extends RT{_fetch(e){return S(function*(){const t=yield Dh(e,"arraybuffer");return new Uint8Array(t)})()}}if(Bt){var Ky=Promise.withResolvers(),Xy=null;(function(){var e=S(function*(){const t=yield import("fs"),i=yield import("http"),r=yield import("https"),s=yield import("url");return new Map(Object.entries({fs:t,http:i,https:r,url:s,canvas:void 0,path2d:void 0}))});return function(){return e.apply(this,arguments)}})()().then(e=>{Xy=e,Ky.resolve()},e=>{re(`loadPackages: ${e}`),Xy=new Map,Ky.resolve()})}class kr{static get promise(){return Ky.promise}static get(e){return Xy?.get(e)}}function kT(n){return Qy.apply(this,arguments)}function Qy(){return(Qy=S(function*(n){const t=yield kr.get("fs").promises.readFile(n);return new Uint8Array(t)})).apply(this,arguments)}function Zy(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),n.clip(r)}class Jy{getPattern(){Ve("Abstract method `getPattern` called.")}}class g4 extends Jy{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let s;if("Stroke"===r||"Fill"===r){const o=t.current.getClippedPathBoundingBox(r,qe(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),i=L.transform(i,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),Zy(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=e.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(i);s.setTransform(d)}else Zy(e,this._bbox),s=this._createGradient(e);return s}}function e_(n,e,t,i,r,s,o,a){const l=e.coords,c=e.colors,u=n.data,d=4*n.width;let h;l[t+1]>l[i+1]&&(h=t,t=i,i=h,h=s,s=o,o=h),l[i+1]>l[r+1]&&(h=i,i=r,r=h,h=o,o=a,a=h),l[t+1]>l[i+1]&&(h=t,t=i,i=h,h=s,s=o,o=h);const f=(l[t]+e.offsetX)*e.scaleX,p=(l[t+1]+e.offsetY)*e.scaleY,g=(l[i]+e.offsetX)*e.scaleX,v=(l[i+1]+e.offsetY)*e.scaleY,m=(l[r]+e.offsetX)*e.scaleX,y=(l[r+1]+e.offsetY)*e.scaleY;if(p>=y)return;const _=c[s],b=c[s+1],w=c[s+2],A=c[o],x=c[o+1],T=c[o+2],E=c[a],D=c[a+1],k=c[a+2],ue=Math.round(p),ce=Math.round(y);let de,Te,nt,B,se,Fr,ks,Un;for(let xt=ue;xt<=ce;xt++){if(xt<v){const $e=xt<p?0:(p-xt)/(p-v);de=f-(f-g)*$e,Te=_-(_-A)*$e,nt=b-(b-x)*$e,B=w-(w-T)*$e}else{let $e;$e=xt>y?1:v===y?0:(v-xt)/(v-y),de=g-(g-m)*$e,Te=A-(A-E)*$e,nt=x-(x-D)*$e,B=T-(T-k)*$e}let ht;ht=xt<p?0:xt>y?1:(p-xt)/(p-y),se=f-(f-m)*ht,Fr=_-(_-E)*ht,ks=b-(b-D)*ht,Un=w-(w-k)*ht;const pa=Math.round(Math.min(de,se)),Sc=Math.round(Math.max(de,se));let $n=d*xt+4*pa;for(let $e=pa;$e<=Sc;$e++)ht=(de-$e)/(de-se),ht<0?ht=0:ht>1&&(ht=1),u[$n++]=Te-(Te-Fr)*ht|0,u[$n++]=nt-(nt-ks)*ht|0,u[$n++]=B-(B-Un)*ht|0,u[$n++]=255}}function m4(n,e,t){const i=e.coords,r=e.colors;let s,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(i.length/a)-1,c=a-1;for(s=0;s<l;s++){let u=s*a;for(let d=0;d<c;d++,u++)e_(n,t,i[u],i[u+1],i[u+a],r[u],r[u+1],r[u+a]),e_(n,t,i[u+a+1],i[u+1],i[u+a],r[u+a+1],r[u+1],r[u+a])}break;case"triangles":for(s=0,o=i.length;s<o;s+=3)e_(n,t,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class v4 extends Jy{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),f=c/d,p=u/h,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/f,scaleY:1/p},y=i.getCanvas("mesh",d+4,h+4),_=y.context,b=_.createImageData(d,h);if(t){const A=b.data;for(let x=0,T=A.length;x<T;x+=4)A[x]=t[0],A[x+1]=t[1],A[x+2]=t[2],A[x+3]=255}for(const A of this._figures)m4(b,A,g);return _.putImageData(b,2,2),{canvas:y.canvas,offsetX:a-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}getPattern(e,t,i,r){let s;if(Zy(e,this._bbox),"Shading"===r)s=L.singularValueDecompose2dScale(qe(e));else if(s=L.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=L.singularValueDecompose2dScale(this.matrix);s=[s[0]*a[0],s[1]*a[1]]}const o=this._createMeshCanvas(s,"Shading"===r?null:this._background,t.cachedCanvases);return"Shading"!==r&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class y4 extends Jy{getPattern(){return"hotpink"}}let b4=(()=>{class n{static MAX_PATTERN_SIZE=3e3;constructor(t,i,r,s,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=i,this.ctx=r,this.canvasGraphicsFactory=s,this.baseTransform=o}createPatternCanvas(t){const{bbox:i,operatorList:r,paintType:s,tilingType:o,color:a,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),Eh("TilingType: "+o);const d=i[0],h=i[1],f=i[2],p=i[3],g=f-d,v=p-h,m=L.singularValueDecompose2dScale(this.matrix),y=L.singularValueDecompose2dScale(this.baseTransform),_=m[0]*y[0],b=m[1]*y[1];let w=g,A=v,x=!1,T=!1;const E=Math.ceil(c*_),D=Math.ceil(u*b);E>=Math.ceil(g*_)?w=c:x=!0,D>=Math.ceil(v*b)?A=u:T=!0;const ce=this.getSizeAndScale(w,this.ctx.canvas.width,_),de=this.getSizeAndScale(A,this.ctx.canvas.height,b),Te=t.cachedCanvases.getCanvas("pattern",ce.size,de.size),nt=Te.context,B=l.createCanvasGraphics(nt);if(B.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(B,s,a),nt.translate(-ce.scale*d,-de.scale*h),B.transform(ce.scale,0,0,de.scale,0,0),nt.save(),this.clipBbox(B,d,h,f,p),B.baseTransform=qe(B.ctx),B.executeOperatorList(r),B.endDrawing(),nt.restore(),x||T){const se=Te.canvas;x&&(w=c),T&&(A=u);const Fr=this.getSizeAndScale(w,this.ctx.canvas.width,_),ks=this.getSizeAndScale(A,this.ctx.canvas.height,b),Un=Fr.size,xt=ks.size,ht=t.cachedCanvases.getCanvas("pattern-workaround",Un,xt),pa=ht.context,Sc=x?Math.floor(g/c):0,$n=T?Math.floor(v/u):0;for(let $e=0;$e<=Sc;$e++)for(let lr=0;lr<=$n;lr++)pa.drawImage(se,Un*$e,xt*lr,Un,xt,0,0,Un,xt);return{canvas:ht.canvas,scaleX:Fr.scale,scaleY:ks.scale,offsetX:d,offsetY:h}}return{canvas:Te.canvas,scaleX:ce.scale,scaleY:de.scale,offsetX:d,offsetY:h}}getSizeAndScale(t,i,r){const s=Math.max(n.MAX_PATTERN_SIZE,i);let o=Math.ceil(t*r);return o>=s?o=s:r=o/t,{scale:r,size:o}}clipBbox(t,i,r,s,o){t.ctx.rect(i,r,s-i,o-r),t.current.updateRectMinMax(qe(t.ctx),[i,r,s,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,r){const s=t.ctx,o=t.current;switch(i){case 1:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,o.fillColor=a.fillStyle,o.strokeColor=a.strokeStyle;break;case 2:const l=L.makeHexColor(r[0],r[1],r[2]);s.fillStyle=l,s.strokeStyle=l,o.fillColor=l,o.strokeColor=l;break;default:throw new $q(`Unsupported paint type: ${i}`)}}getPattern(t,i,r,s){let o=r;"Shading"!==s&&(o=L.transform(o,i.baseTransform),this.matrix&&(o=L.transform(o,this.matrix)));const a=this.createPatternCanvas(i);let l=new DOMMatrix(o);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=t.createPattern(a.canvas,"repeat");return c.setTransform(l),c}}return n})();function FT({src:n,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const a=Jt.isLittleEndian?4278190080:255,[l,c]=o?[s,a]:[a,s],u=i>>3,d=7&i,h=n.length;t=new Uint32Array(t.buffer);let f=0;for(let p=0;p<r;p++){for(const v=e+u;e<v;e++){const m=e<h?n[e]:255;t[f++]=128&m?c:l,t[f++]=64&m?c:l,t[f++]=32&m?c:l,t[f++]=16&m?c:l,t[f++]=8&m?c:l,t[f++]=4&m?c:l,t[f++]=2&m?c:l,t[f++]=1&m?c:l}if(0===d)continue;const g=e<h?n[e++]:255;for(let v=0;v<d;v++)t[f++]=g&1<<7-v?c:l}return{srcPos:e,destPos:f}}class A4{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return void 0!==this.cache[e]?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache)this.canvasFactory.destroy(this.cache[e]),delete this.cache[e]}}function Ih(n,e,t,i,r,s,o,a,l,c){const[u,d,h,f,p,g]=qe(n);if(0===d&&0===h){const _=Math.round(o*u+p),w=Math.round(a*f+g),x=Math.abs(Math.round((o+l)*u+p)-_)||1,E=Math.abs(Math.round((a+c)*f+g)-w)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(f),_,w),n.drawImage(e,t,i,r,s,0,0,x,E),n.setTransform(u,d,h,f,p,g),[x,E]}if(0===u&&0===f){const _=Math.round(a*h+p),w=Math.round(o*d+g),x=Math.abs(Math.round((a+c)*h+p)-_)||1,E=Math.abs(Math.round((o+l)*d+g)-w)||1;return n.setTransform(0,Math.sign(d),Math.sign(h),0,_,w),n.drawImage(e,t,i,r,s,0,0,E,x),n.setTransform(u,d,h,f,p,g),[E,x]}return n.drawImage(e,t,i,r,s,o,a,l,c),[Math.hypot(u,d)*l,Math.hypot(h,f)*c]}class HT{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=vT,this.textMatrixScale=1,this.fontMatrix=ky,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=0,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=L.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=L.applyTransform(t,e),r=L.applyTransform(t.slice(2),e),s=L.applyTransform([t[0],t[3]],e),o=L.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],r[0],s[0],o[0]),this.minY=Math.min(this.minY,i[1],r[1],s[1],o[1]),this.maxX=Math.max(this.maxX,i[0],r[0],s[0],o[0]),this.maxY=Math.max(this.maxY,i[1],r[1],s[1],o[1])}updateScalingPathMinMax(e,t){L.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,s,o,a,l,c,u){const d=L.bezierBoundingBox(t,i,r,s,o,a,l,c,u);u||this.updateRectMinMax(e,d)}getPathBoundingBox(e="Fill",t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if("Stroke"===e){t||Ve("Stroke bounding box must include transform.");const r=L.singularValueDecompose2dScale(t),s=r[0]*this.lineWidth/2,o=r[1]*this.lineWidth/2;i[0]-=s,i[1]-=o,i[2]+=s,i[3]+=o}return i}updateClipFromPath(){const e=L.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e="Fill",t=null){return L.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function UT(n,e){if(typeof ImageData<"u"&&e instanceof ImageData)return void n.putImageData(e,0,0);const t=e.height,i=e.width,r=t%16,s=(t-r)/16,o=0===r?s:s+1,a=n.createImageData(i,16);let c,l=0;const u=e.data,d=a.data;let h,f,p,g;if(e.kind===_h.GRAYSCALE_1BPP){const v=u.byteLength,m=new Uint32Array(d.buffer,0,d.byteLength>>2),y=m.length,_=i+7>>3,b=4294967295,w=Jt.isLittleEndian?4278190080:255;for(h=0;h<o;h++){for(p=h<s?16:r,c=0,f=0;f<p;f++){const A=v-l;let x=0;const T=A>_?i:8*A-7,E=-8&T;let D=0,k=0;for(;x<E;x+=8)k=u[l++],m[c++]=128&k?b:w,m[c++]=64&k?b:w,m[c++]=32&k?b:w,m[c++]=16&k?b:w,m[c++]=8&k?b:w,m[c++]=4&k?b:w,m[c++]=2&k?b:w,m[c++]=1&k?b:w;for(;x<T;x++)0===D&&(k=u[l++],D=128),m[c++]=k&D?b:w,D>>=1}for(;c<y;)m[c++]=0;n.putImageData(a,0,16*h)}}else if(e.kind===_h.RGBA_32BPP){for(f=0,g=16*i*4,h=0;h<s;h++)d.set(u.subarray(l,l+g)),l+=g,n.putImageData(a,0,f),f+=16;h<o&&(g=i*r*4,d.set(u.subarray(l,l+g)),n.putImageData(a,0,f))}else{if(e.kind!==_h.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(p=16,g=i*p,h=0;h<o;h++){for(h>=s&&(p=r,g=i*p),c=0,f=g;f--;)d[c++]=u[l++],d[c++]=u[l++],d[c++]=u[l++],d[c++]=255;n.putImageData(a,0,16*h)}}}function $T(n,e){if(e.bitmap)return void n.drawImage(e.bitmap,0,0);const t=e.height,i=e.width,r=t%16,s=(t-r)/16,o=0===r?s:s+1,a=n.createImageData(i,16);let l=0;const c=e.data,u=a.data;for(let d=0;d<o;d++){const h=d<s?16:r;({srcPos:l}=FT({src:c,srcPos:l,dest:u,width:i,height:h,nonBlackColor:0})),n.putImageData(a,0,16*d)}}function uc(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)void 0!==n[i]&&(e[i]=n[i]);void 0!==n.setLineDash&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function xh(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",void 0!==n.setLineDash&&(n.setLineDash([]),n.lineDashOffset=0),!Bt){const{filter:e}=n;"none"!==e&&""!==e&&(n.filter="none")}}function zT(n,e){if(e)return!0;const t=L.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*ra.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const S4=["butt","round","square"],M4=["miter","round","bevel"],I4={},WT={};class sa{constructor(e,t,i,r,s,{optionalContentConfig:o,markedContentStack:a=null},l,c){this.ctx=e,this.current=new HT(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new A4(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,i){const l=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...qe(this.compositeCtx))}this.ctx.save(),xh(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=qe(this.ctx)}executeOperatorList(e,t,i,r){const s=e.argsArray,o=e.fnArray;let a=t||0;const l=s.length;if(l===a)return a;const c=l-a>10&&"function"==typeof i,u=c?Date.now()+15:0;let d=0;const h=this.commonObjs,f=this.objs;let p;for(;;){if(void 0!==r&&a===r.nextBreakPoint)return r.breakIt(a,i),a;if(p=o[a],p!==oi.dependency)this[p].apply(this,s[a]);else for(const g of s[a]){const v=g.startsWith("g_")?h:f;if(!v.has(g))return v.get(g,i),a}if(a++,a===l)return a;if(c&&++d>10){if(Date.now()>u)return i(),a;d=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const i=e.width??e.displayWidth,r=e.height??e.displayHeight;let u,d,s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=i,l=r,c="prescale1";for(;s>2&&a>1||o>2&&l>1;){let h=a,f=l;s>2&&a>1&&(h=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/h),o>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/f),u=this.cachedCanvases.getCanvas(c,h,f),d=u.context,d.clearRect(0,0,h,f),d.drawImage(e,0,0,a,l,0,0,h,f),e=u.canvas,a=h,l=f,c="prescale1"===c?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:r}=e,s=this.current.fillColor,o=this.current.patternFill,a=qe(t);let l,c,u,d;if((e.bitmap||e.data)&&e.count>1){const T=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),s]),l=this._cachedBitmapsMap.get(T),l||(l=new Map,this._cachedBitmapsMap.set(T,l));const E=l.get(c);if(E&&!o)return{canvas:E,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])};u=E}u||(d=this.cachedCanvases.getCanvas("maskCanvas",i,r),$T(d.context,e));let h=L.transform(a,[1/i,0,0,-1/r,0,0]);h=L.transform(h,[1,0,0,1,0,-r]);const[f,p,g,v]=L.getAxialAlignedBoundingBox([0,0,i,r],h),m=Math.round(g-f)||1,y=Math.round(v-p)||1,_=this.cachedCanvases.getCanvas("fillCanvas",m,y),b=_.context,w=f,A=p;b.translate(-w,-A),b.transform(...h),u||(u=this._scaleImage(d.canvas,tr(b)),u=u.img,l&&o&&l.set(c,u)),b.imageSmoothingEnabled=zT(qe(b),e.interpolate),Ih(b,u,0,0,u.width,u.height,0,0,i,r),b.globalCompositeOperation="source-in";const x=L.transform(tr(b),[1,0,0,1,-w,-A]);return b.fillStyle=o?s.getPattern(t,this,x,"Fill"):s,b.fillRect(0,0,i,r),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,_.canvas)),{canvas:_.canvas,offsetX:Math.round(w),offsetY:Math.round(A)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=S4[e]}setLineJoin(e){this.ctx.lineJoin=M4[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const r=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=r.context;const s=this.ctx;s.setTransform(...qe(this.suspendedCtx)),uc(this.suspendedCtx,s),function C4(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},n.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},n.transform=function(i,r,s,o,a,l){e.transform(i,r,s,o,a,l),this.__originalTransform(i,r,s,o,a,l)},n.setTransform=function(i,r,s,o,a,l){e.setTransform(i,r,s,o,a,l),this.__originalSetTransform(i,r,s,o,a,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){e.rotate(i),this.__originalRotate(i)},n.clip=function(i){e.clip(i),this.__originalClip(i)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,r,s,o,a){e.bezierCurveTo(t,i,r,s,o,a),this.__originalBezierCurveTo(t,i,r,s,o,a)},n.rect=function(t,i,r,s){e.rect(t,i,r,s),this.__originalRect(t,i,r,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),uc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){this.current.activeSMask&&(e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],this.composeSMask(this.suspendedCtx,this.current.activeSMask,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}composeSMask(e,t,i,r){const s=r[0],o=r[1],a=r[2]-s,l=r[3]-o;0===a||0===l||(this.genericComposeSMask(t.context,i,a,l,t.subtype,t.backdrop,t.transferMap,s,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,r,s,o,a,l,c,u,d){let h=e.canvas,f=l-u,p=c-d;if(o){const v=L.makeHexColor(...o);if(f<0||p<0||f+i>h.width||p+r>h.height){const m=this.cachedCanvases.getCanvas("maskExtension",i,r),y=m.context;y.drawImage(h,-f,-p),y.globalCompositeOperation="destination-atop",y.fillStyle=v,y.fillRect(0,0,i,r),y.globalCompositeOperation="source-over",h=m.canvas,f=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const m=new Path2D;m.rect(f,p,i,r),e.clip(m),e.globalCompositeOperation="destination-atop",e.fillStyle=v,e.fillRect(f,p,i,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===s&&a?t.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===s&&(t.filter=this.filterFactory.addLuminosityFilter(a));const g=new Path2D;g.rect(l,c,i,r),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(h,f,p,i,r,l,c,i,r),t.restore()}save(){this.inSMaskMode?(uc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),uc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,s,o){this.ctx.transform(e,t,i,r,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const r=this.ctx,s=this.current;let l,c,o=s.x,a=s.y;const u=qe(r),d=0===u[0]&&0===u[3]||0===u[1]&&0===u[2],h=d?i.slice(0):null;for(let f=0,p=0,g=e.length;f<g;f++)switch(0|e[f]){case oi.rectangle:o=t[p++],a=t[p++];const v=t[p++],m=t[p++],y=o+v,_=a+m;r.moveTo(o,a),0===v||0===m?r.lineTo(y,_):(r.lineTo(y,a),r.lineTo(y,_),r.lineTo(o,_)),d||s.updateRectMinMax(u,[o,a,y,_]),r.closePath();break;case oi.moveTo:o=t[p++],a=t[p++],r.moveTo(o,a),d||s.updatePathMinMax(u,o,a);break;case oi.lineTo:o=t[p++],a=t[p++],r.lineTo(o,a),d||s.updatePathMinMax(u,o,a);break;case oi.curveTo:l=o,c=a,o=t[p+4],a=t[p+5],r.bezierCurveTo(t[p],t[p+1],t[p+2],t[p+3],o,a),s.updateCurvePathMinMax(u,l,c,t[p],t[p+1],t[p+2],t[p+3],o,a,h),p+=6;break;case oi.curveTo2:l=o,c=a,r.bezierCurveTo(o,a,t[p],t[p+1],t[p+2],t[p+3]),s.updateCurvePathMinMax(u,l,c,o,a,t[p],t[p+1],t[p+2],t[p+3],h),o=t[p+2],a=t[p+3],p+=4;break;case oi.curveTo3:l=o,c=a,o=t[p+2],a=t[p+3],r.bezierCurveTo(t[p],t[p+1],o,a,o,a),s.updateCurvePathMinMax(u,l,c,t[p],t[p+1],o,a,o,a,h),p+=4;break;case oi.closePath:r.closePath()}d&&s.updateScalingPathMinMax(u,h),s.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&i?.getPattern?(t.save(),t.strokeStyle=i.getPattern(t,this,tr(t),"Stroke"),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor;let s=!1;this.current.patternFill&&(t.save(),t.fillStyle=i.getPattern(t,this,tr(t),"Fill"),s=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==o&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=I4}eoClip(){this.pendingClip=WT}beginText(){this.current.textMatrix=vT,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||ky,(0===r.fontMatrix[0]||0===r.fontMatrix[3])&&re("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const s=i.loadedName||"sans-serif",o=i.systemFontInfo?.css||`"${s}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const l=i.italic?"italic":"normal";let c=t;t<16?c=16:t>100&&(c=100),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,s,o){this.current.textMatrix=[e,t,i,r,s,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r){const s=this.ctx,o=this.current,a=o.font,l=o.textRenderingMode,c=o.fontSize/o.fontSizeScale,u=3&l,d=!!(4&l),h=o.patternFill&&!a.missingFile;let f;(a.disableFontFace||d||h)&&(f=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||h?(s.save(),s.translate(t,i),s.beginPath(),f(s,c),r&&s.setTransform(...r),(0===u||2===u)&&s.fill(),(1===u||2===u)&&s.stroke(),s.restore()):((0===u||2===u)&&s.fillText(e,t,i),(1===u||2===u)&&s.strokeText(e,t,i)),d&&(this.pendingTextPaths||=[]).push({transform:qe(s),x:t,y:i,fontSize:c,addToPath:f})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return fe(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(0===r)return;const s=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,u=t.textHScale*c,d=e.length,h=i.vertical,f=h?1:-1,p=i.defaultVMetrics,g=r*t.fontMatrix[0],v=0===t.textRenderingMode&&!i.disableFontFace&&!t.patternFill;let m;if(s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),s.scale(u,c>0?-1:1),t.patternFill){s.save();const A=t.fillColor.getPattern(s,this,tr(s),"Fill");m=qe(s),s.restore(),s.fillStyle=A}let y=t.lineWidth;const _=t.textMatrixScale;if(0===_||0===y){const A=3&t.textRenderingMode;(1===A||2===A)&&(y=this.getSinglePixelWidth())}else y/=_;if(1!==o&&(s.scale(o,o),y/=o),s.lineWidth=y,i.isInvalidPDFjsFont){const A=[];let x=0;for(const T of e)A.push(T.unicode),x+=T.width;return s.fillText(A.join(""),0,0),t.x+=x*g*u,s.restore(),void this.compose()}let w,b=0;for(w=0;w<d;++w){const A=e[w];if("number"==typeof A){b+=f*A*r/1e3;continue}let x=!1;const T=(A.isSpace?l:0)+a,E=A.fontChar,D=A.accent;let k,ue,ce=A.width;if(h){const Te=A.vmetric||p,nt=-(A.vmetric?Te[1]:.5*ce)*g;ce=Te?-Te[0]:ce,k=nt/o,ue=(b+Te[2]*g)/o}else k=b/o,ue=0;if(i.remeasure&&ce>0){const Te=1e3*s.measureText(E).width/r*o;if(ce<Te&&this.isFontSubpixelAAEnabled){const nt=ce/Te;x=!0,s.save(),s.scale(nt,1),k/=nt}else ce!==Te&&(k+=(ce-Te)/2e3*r/o)}this.contentVisible&&(A.isInFont||i.missingFile)&&(v&&!D?s.fillText(E,k,ue):(this.paintChar(E,k,ue,m),D&&this.paintChar(D.fontChar,k+r*D.offset.x/o,ue-r*D.offset.y/o,m))),b+=h?ce*g-T*c:ce*g+T*c,x&&s.restore()}h?t.y-=b:t.x+=b*u,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,s=i.fontSize,o=i.fontDirection,a=r.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,u=i.textHScale*o,d=i.fontMatrix||ky,h=e.length;let p,g,v,m;if(3!==i.textRenderingMode&&0!==s){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(u,o),p=0;p<h;++p){if(g=e[p],"number"==typeof g){m=a*g*s/1e3,this.ctx.translate(m,0),i.x+=m*u;continue}const y=(g.isSpace?c:0)+l,_=r.charProcOperatorList[g.operatorListId];_?(this.contentVisible&&(this.processingType3=g,this.save(),t.scale(s,s),t.transform(...d),this.executeOperatorList(_),this.restore()),v=L.applyTransform([g.width,0],d)[0]*s+y,t.translate(v,0),i.x+=v*u):re(`Type3 character "${g.operatorListId}" is not available.`)}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,s,o){this.ctx.rect(i,r,s-i,o-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const i=e[1],r=this.baseTransform||qe(this.ctx);t=new b4(e,i,this.ctx,{createCanvasGraphics:o=>new sa(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=L.makeHexColor(e,t,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=L.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=function _4(n){switch(n[0]){case"RadialAxial":return new g4(n);case"Mesh":return new v4(n);case"Dummy":return new y4}throw new Error(`Unknown IR type: ${n[0]}`)}(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,tr(t),"Shading");const r=tr(t);if(r){const{width:s,height:o}=t.canvas,[a,l,c,u]=L.getAxialAlignedBoundingBox([0,0,s,o],r);this.ctx.fillRect(a,l,c-a,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ve("Should not call beginInlineImage")}beginImageData(){Ve("Should not call beginImageData")}paintFormXObjectBegin(e,t){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=qe(this.ctx),t)&&(this.ctx.rect(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.current.updateRectMinMax(qe(this.ctx),t),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Eh("TODO: Support non-isolated groups."),e.knockout&&re("Knockout groups not supported.");const i=qe(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=L.getAxialAlignedBoundingBox(e.bbox,qe(t));r=L.intersect(r,[0,0,t.canvas.width,t.canvas.height])||[0,0,0,0];const o=Math.floor(r[0]),a=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-o,1),c=Math.max(Math.ceil(r[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(u,l,c),h=d.context;h.translate(-o,-a),h.transform(...i),e.smask?this.smaskStack.push({canvas:d.canvas,context:h,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),uc(t,h),this.ctx=h,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=qe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const s=L.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,i,r,s){if(this.#e(),xh(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(s&&this.annotationCanvasMap){(i=i.slice())[4]-=t[0],i[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=o,t[3]=a;const[l,c]=L.singularValueDecompose2dScale(qe(this.ctx)),{viewportScale:u}=this,d=Math.ceil(o*this.outputScaleX*u),h=Math.ceil(a*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,a*c),xh(this.ctx)}else xh(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new HT(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const i=this.ctx,r=this.processingType3;if(r&&(void 0===r.compiled&&(r.compiled=function D4(n){const{width:e,height:t}=n;if(e>1e3||t>1e3)return null;const r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let a,l,c,o=new Uint8Array(s*(t+1));const u=e+7&-8;let d=new Uint8Array(u*t),h=0;for(const m of n.data){let y=128;for(;y>0;)d[h++]=m&y?0:255,y>>=1}let f=0;for(h=0,0!==d[h]&&(o[0]=1,++f),l=1;l<e;l++)d[h]!==d[h+1]&&(o[l]=d[h]?2:1,++f),h++;for(0!==d[h]&&(o[l]=2,++f),a=1;a<t;a++){h=a*u,c=a*s,d[h-u]!==d[h]&&(o[c]=d[h]?1:8,++f);let m=(d[h]?4:0)+(d[h-u]?8:0);for(l=1;l<e;l++)m=(m>>2)+(d[h+1]?4:0)+(d[h-u+1]?8:0),r[m]&&(o[c+l]=r[m],++f),h++;if(d[h-u]!==d[h]&&(o[c+l]=d[h]?2:4,++f),f>1e3)return null}for(h=u*(t-1),c=a*s,0!==d[h]&&(o[c]=8,++f),l=1;l<e;l++)d[h]!==d[h+1]&&(o[c+l]=d[h]?4:8,++f),h++;if(0!==d[h]&&(o[c+l]=4,++f),f>1e3)return null;const p=new Int32Array([0,s,-1,0,-s,0,0,0,1]),g=new Path2D;for(a=0;f&&a<=t;a++){let m=a*s;const y=m+e;for(;m<y&&!o[m];)m++;if(m===y)continue;g.moveTo(m%s,a);const _=m;let b=o[m];do{const w=p[b];do{m+=w}while(!o[m]);const A=o[m];5!==A&&10!==A?(b=A,o[m]=0):(b=A&51*b>>4,o[m]&=b>>2|b<<2),g.lineTo(m%s,m/s|0),o[m]||--f}while(_!==m);--a}return d=null,o=null,function(m){m.save(),m.scale(1/e,-1/t),m.translate(0,-t),m.fill(g),m.beginPath(),m.restore()}}(e)),r.compiled))return void r.compiled(i);const s=this._createMaskCanvas(e),o=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,s,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=qe(a);a.transform(t,i,r,s,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,d=o.length;u<d;u+=2){const h=L.transform(l,[t,i,r,s,o[u],o[u+1]]),[f,p]=L.applyTransform([0,0],h);a.drawImage(c.canvas,f,p)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const s of e){const{data:o,width:a,height:l,transform:c}=s,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),d=u.context;d.save(),$T(d,this.getObject(o,s)),d.globalCompositeOperation="source-in",d.fillStyle=r?i.getPattern(d,this,tr(t),"Fill"):i,d.fillRect(0,0,a,l),d.restore(),t.save(),t.transform(...c),t.scale(1,-1),Ih(t,u.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):re("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const s=this.getObject(e);if(!s)return void re("Dependent image isn't ready yet");const o=s.width,a=s.height,l=[];for(let c=0,u=r.length;c<u;c+=2)l.push({transform:[t,0,0,i,r[c],r[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:i,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",i,r),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,r=this.ctx;if(this.save(),!Bt){const{filter:a}=r;"none"!==a&&""!==a&&(r.filter="none")}let s;if(r.scale(1/t,-1/i),e.bitmap)s=this.applyTransferMapsToBitmap(e);else if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)s=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,i).context;UT(l,e),s=this.applyTransferMapsToCanvas(l)}const o=this._scaleImage(s,tr(r));r.imageSmoothingEnabled=zT(qe(r),e.interpolate),Ih(r,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const l=this.cachedCanvases.getCanvas("inlineImage",e.width,e.height).context;UT(l,e),r=this.applyTransferMapsToCanvas(l)}for(const s of t)i.save(),i.transform(...s.transform),i.scale(1,-1),Ih(i,r,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){this.markedContentStack.push("OC"===e?{visible:this.optionalContentConfig.isVisible(t)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===WT?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=qe(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:s}=this.ctx.getTransform();let o,a;if(0===i&&0===r){const l=Math.abs(t),c=Math.abs(s);if(l===c)if(0===e)o=a=1/l;else{const u=l*e;o=a=u<1?1/u:1}else if(0===e)o=1/l,a=1/c;else{const u=l*e,d=c*e;o=u<1?1/u:1,a=d<1?1/d:1}}else{const l=Math.abs(t*s-i*r),c=Math.hypot(t,i),u=Math.hypot(r,s);if(0===e)o=u/l,a=c/l;else{const d=e*l;o=u>d?u/d:1,a=c>d?c/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,s]=this.getScaleForStroking();if(t.lineWidth=i||1,1===r&&1===s)return void t.stroke();const o=t.getLineDash();if(e&&t.save(),t.scale(r,s),o.length>0){const a=Math.max(r,s);t.setLineDash(o.map(l=>l/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in oi)void 0!==sa.prototype[n]&&(sa.prototype[oi[n]]=sa.prototype[n]);class dc{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if("string"!=typeof e)throw new Error("Invalid `workerSrc` type.");this.#t=e}}function Mn(n){switch(n instanceof Error||"object"==typeof n&&null!==n||Ve('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Ms(n.message);case"MissingPDFException":return new Ss(n.message);case"PasswordException":return new Oy(n.message,n.code);case"UnexpectedResponseException":return new Ch(n.message,n.status);case"UnknownErrorException":return new Fy(n.message,n.details);default:return new Fy(n.message,n.toString())}}class hc{#e=new AbortController;constructor(e,t,i){this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream)return void this.#i(e);if(e.callback){const i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],1===e.callback)r.resolve(e.data);else{if(2!==e.callback)throw new Error("Unexpected callback case");r.reject(Mn(e.reason))}return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,r=e.sourceName,s=this.comObj;new Promise(function(o){o(t(e.data))}).then(function(o){s.postMessage({sourceName:i,targetName:r,callback:1,callbackId:e.callbackId,data:o})},function(o){s.postMessage({sourceName:i,targetName:r,callback:2,callbackId:e.callbackId,reason:Mn(o)})})}else e.streamId?this.#n(e):t(e.data)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,t,i,r){const s=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:t,desiredSize:c.desiredSize},r),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[s].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:6,streamId:s,desiredSize:c.desiredSize}),u.promise},cancel:c=>{bt(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[s].cancelCall=u,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:1,streamId:s,reason:Mn(c)}),u.promise}},i)}#n(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,d){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=u,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:4,streamId:t,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:3,streamId:t}),delete o.streamSinks[t])},error(c){bt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:5,streamId:t,reason:Mn(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,new Promise(function(c){c(a(e.data,l))}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:8,streamId:t,success:!0})},function(c){s.postMessage({sourceName:i,targetName:r,stream:8,streamId:t,reason:Mn(c)})})}#i(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case 8:e.success?o.startCall.resolve():o.startCall.reject(Mn(e.reason));break;case 7:e.success?o.pullCall.resolve():o.pullCall.reject(Mn(e.reason));break;case 6:if(!a){s.postMessage({sourceName:i,targetName:r,stream:7,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(l){l(a.onPull?.())}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:7,streamId:t,success:!0})},function(l){s.postMessage({sourceName:i,targetName:r,stream:7,streamId:t,reason:Mn(l)})});break;case 4:if(bt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case 3:if(bt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#r(o,t);break;case 5:bt(o,"error should have stream controller"),o.controller.error(Mn(e.reason)),this.#r(o,t);break;case 2:e.success?o.cancelCall.resolve():o.cancelCall.reject(Mn(e.reason)),this.#r(o,t);break;case 1:if(!a)break;new Promise(function(l){l(a.onCancel?.(Mn(e.reason)))}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:2,streamId:t,success:!0})},function(l){s.postMessage({sourceName:i,targetName:r,stream:2,streamId:t,reason:Mn(l)})}),a.sinkCapability.reject(Mn(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}#r(e,t){var i=this;return S(function*(){yield Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete i.streamControllers[t]})()}destroy(){this.#e?.abort(),this.#e=null}}class x4{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return Ly(this.#e)}has(e){return this.#e.has(e)}}const oa=Symbol("INTERNAL");class T4{#e=!1;#t=!1;#n=!1;#i=!0;constructor(e,{name:t,intent:i,usage:r,rbGroups:s}){this.#e=!!(2&e),this.#t=!!(4&e),this.name=t,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:e,view:t}=this.usage;return this.#e?"OFF"!==t?.viewState:!this.#t||"OFF"!==e?.printState}_setVisible(e,t,i=!1){e!==oa&&Ve("Internal method `_setVisible` called."),this.#n=i,this.#i=t}}class P4{#e=null;#t=new Map;#n=null;#i=null;constructor(e,t=2){if(this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,this.#i=e.order;for(const i of e.groups)this.#t.set(i.id,new T4(t,i));if("OFF"===e.baseState)for(const i of this.#t.values())i._setVisible(oa,!1);for(const i of e.on)this.#t.get(i)._setVisible(oa,!0);for(const i of e.off)this.#t.get(i)._setVisible(oa,!1);this.#n=this.getHash()}}#r(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const s=e[r];let o;if(Array.isArray(s))o=this.#r(s);else{if(!this.#t.has(s))return re(`Optional content group not found: ${s}`),!0;o=this.#t.get(s).visible}switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return"And"===i}isVisible(e){if(0===this.#t.size)return!0;if(!e)return Eh("Optional content group not defined."),!0;if("OCG"===e.type)return this.#t.has(e.id)?this.#t.get(e.id).visible:(re(`Optional content group not found: ${e.id}`),!0);if("OCMD"===e.type){if(e.expression)return this.#r(e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return re(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return re(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return re(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!this.#t.has(t))return re(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return re(`Unknown optional content policy ${e.policy}.`),!0}return re(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){const r=this.#t.get(e);if(r){if(i&&t&&r.rbGroups.length)for(const s of r.rbGroups)for(const o of s)o!==e&&this.#t.get(o)?._setVisible(oa,!1,!0);r._setVisible(oa,!!t,!0),this.#e=null}else re(`Optional content group not found: ${e}`)}setOCGState({state:e,preserveRB:t}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const s=this.#t.get(r);if(s)switch(i){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!s.visible,t)}}this.#e=null}get hasInitialVisibility(){return null===this.#n||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?Ly(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(null!==this.#e)return this.#e;const e=new ST;for(const[t,i]of this.#t)e.update(`${t}:${i.visible}`);return this.#e=e.hexdigest()}}class R4{constructor(e,{disableRange:t=!1,disableStream:i=!1}){bt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,s?.length>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;void 0===e?this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i):bt(this._rangeReaders.some(function(s){return s._begin===e&&(s._enqueue(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){void 0===e.total?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){bt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new N4(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new k4(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class N4{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=Uy(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var e=this;return S(function*(){if(e._queuedChunks.length>0)return{value:e._queuedChunks.shift(),done:!1};if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class k4{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var e=this;return S(function*(){if(e._queuedChunk){const i=e._queuedChunk;return e._queuedChunk=null,{value:i,done:!1}}if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function t_(n,e){const t=new Headers;if(!n||!e||"object"!=typeof e)return t;for(const i in e){const r=e[i];void 0!==r&&t.append(i,r)}return t}function n_({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*t)||i||!e||"bytes"!==n.get("Accept-Ranges")||"identity"!==(n.get("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r}function i_(n){const e=n.get("Content-Disposition");if(e){let t=function O4(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let u=a(t);return u=unescape(u),u=l(u),u=c(u),s(u)}if(t=function o(u){const d=[];let h;const f=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(h=f.exec(u));){let[,g,v,m]=h;if(g=parseInt(g,10),g in d){if(0===g)break}else d[g]=[v,m]}const p=[];for(let g=0;g<d.length&&g in d;++g){let[v,m]=d[g];m=a(m),v&&(m=unescape(m),0===g&&(m=l(m))),p.push(m)}return p.join("")}(n),t)return s(c(t));if(t=i("filename","i").exec(n),t){t=t[1];let u=a(t);return u=c(u),s(u)}function i(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function r(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const h=new TextDecoder(u,{fatal:!0}),f=ia(d);d=h.decode(f),e=!1}catch{}}return d}function s(u){return e&&/[\x80-\xff]/.test(u)&&(u=r("utf-8",u),e&&(u=r("iso-8859-1",u))),u}function a(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let h=0;h<d.length;++h){const f=d[h].indexOf('"');-1!==f&&(d[h]=d[h].slice(0,f),d.length=h+1),d[h]=d[h].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){const d=u.indexOf("'");return-1===d?u:r(u.slice(0,d),u.slice(d+1).replace(/^[^']*'/,""))}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,h,f,p){if("q"===f||"Q"===f)return r(h,p=(p=p.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(g,v){return String.fromCharCode(parseInt(v,16))}));try{p=atob(p)}catch{}return r(h,p)})}return""}(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Uy(t))return t}return null}function Ph(n,e){return 404===n||0===n&&e.startsWith("file:")?new Ss('Missing PDF "'+e+'".'):new Ch(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function GT(n){return 200===n||206===n}function qT(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function YT(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(re(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class KT{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=t_(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return bt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new F4(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new L4(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class F4{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),r=t.url;fetch(r,qT(i,this._withCredentials,this._abortController)).then(s=>{if(!GT(s.status))throw Ph(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const o=s.headers,{allowRangeRequests:a,suggestedLength:l}=n_({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=i_(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ms("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return S(function*(){yield e._headersCapability.promise;const{value:t,done:i}=yield e._reader.read();return i?{value:t,done:i}:(e._loaded+=t.byteLength,e.onProgress?.({loaded:e._loaded,total:e._contentLength}),{value:YT(t),done:!1})})()}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class L4{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${i-1}`);const o=r.url;fetch(o,qT(s,this._withCredentials,this._abortController)).then(a=>{if(!GT(a.status))throw Ph(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return S(function*(){yield e._readCapability.promise;const{value:t,done:i}=yield e._reader.read();return i?{value:t,done:i}:(e._loaded+=t.byteLength,e.onProgress?.({loaded:e._loaded}),{value:YT(t),done:!1})})()}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class B4{constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=t_(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const r={begin:e,end:t};for(const s in i)r[s]=i[s];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,o]of this.headers)t.setRequestHeader(s,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=206):r.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(s){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){const i=this.pendingRequests[e];i&&i.onProgress?.(t)}onStateChange(e,t){const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==r.readyState||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===r.status&&this.isHttp)return void i.onError?.(r.status);const s=r.status||200;if((200!==s||206!==i.expectedStatus)&&s!==i.expectedStatus)return void i.onError?.(r.status);const a=function V4(n){const e=n.response;return"string"!=typeof e?e:ia(e).buffer}(r);if(206===s){const l=r.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);i.onDone({begin:parseInt(c[1],10),chunk:a})}else a?i.onDone({begin:0,chunk:a}):i.onError?.(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class j4{constructor(e){this._source=e,this._manager=new B4(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return bt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new H4(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new U4(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class H4{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(o=>{const[a,...l]=o.split(": ");return[a,l.join(": ")]})),{allowRangeRequests:r,suggestedLength:s}=n_({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=i_(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Ph(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){var e=this;return S(function*(){if(e._storedError)throw e._storedError;if(e._cachedChunks.length>0)return{value:e._cachedChunks.shift(),done:!1};if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class U4{constructor(e,t,i){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Ph(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}read(){var e=this;return S(function*(){if(e._storedError)throw e._storedError;if(null!==e._queuedChunk){const i=e._queuedChunk;return e._queuedChunk=null,{value:i,done:!1}}if(e._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return e._requests.push(t),t.promise})()}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const $4=/^[a-z][a-z0-9\-+.]+:/i;function XT(n,e,t){return"http:"===n.protocol?kr.get("http").request(n,{headers:e},t):kr.get("https").request(n,{headers:e},t)}class W4{constructor(e){this.source=e,this.url=function z4(n){if($4.test(n))return new URL(n);const e=kr.get("url");return new URL(e.pathToFileURL(n))}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.headers=t_(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return bt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Y4(this):new G4(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new K4(this,e,t):new q4(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class QT{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return S(function*(){if(yield e._readCapability.promise,e._done)return{value:void 0,done:!0};if(e._storedError)throw e._storedError;const t=e._readableStream.read();return null===t?(e._readCapability=Promise.withResolvers(),e.read()):(e._loaded+=t.length,e.onProgress?.({loaded:e._loaded,total:e._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ms("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ZT{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!e.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var e=this;return S(function*(){if(yield e._readCapability.promise,e._done)return{value:void 0,done:!0};if(e._storedError)throw e._storedError;const t=e._readableStream.read();return null===t?(e._readCapability=Promise.withResolvers(),e.read()):(e._loaded+=t.length,e.onProgress?.({loaded:e._loaded}),{value:new Uint8Array(t).buffer,done:!1})})()}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class G4 extends QT{constructor(e){super(e);const t=Object.fromEntries(e.headers);this._request=XT(this._url,t,r=>{if(404===r.statusCode){const l=new Ss(`Missing PDF "${this._url}".`);return this._storedError=l,void this._headersCapability.reject(l)}this._headersCapability.resolve(),this._setReadableStream(r);const s=new Headers(this._readableStream.headers),{allowRangeRequests:o,suggestedLength:a}=n_({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=i_(s)}),this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class q4 extends ZT{constructor(e,t,i){super(e);const r=Object.fromEntries(e.headers);r.Range=`bytes=${t}-${i-1}`,this._request=XT(this._url,r,o=>{if(404!==o.statusCode)this._setReadableStream(o);else{const a=new Ss(`Missing PDF "${this._url}".`);this._storedError=a}}),this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class Y4 extends QT{constructor(e){super(e);const t=kr.get("fs");t.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},i=>{"ENOENT"===i.code&&(i=new Ss(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class K4 extends ZT{constructor(e,t,i){super(e);const r=kr.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}}class tn{#e=Promise.withResolvers();#t=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#l=0;#c=0;#u=null;#a=null;#d=0;#o=0;#h=Object.create(null);#p=[];#f=null;#g=[];#v=new WeakMap;#m=null;static#y=new Map;static#b=new Map;static#C=new WeakMap;static#w=null;static#E=new Set;constructor({textContentSource:e,container:t,viewport:i}){if(e instanceof ReadableStream)this.#f=e;else{if("object"!=typeof e)throw new Error('No "textContentSource" parameter specified.');this.#f=new ReadableStream({start(l){l.enqueue(e),l.close()}})}this.#t=this.#a=t,this.#o=i.scale*(globalThis.devicePixelRatio||1),this.#d=i.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:s,pageX:o,pageY:a}=i.rawDims;this.#m=[1,0,0,-1,-o,a+s],this.#c=r,this.#l=s,tn.#P(),Is(t,i),this.#e.promise.finally(()=>{tn.#E.delete(this),this.#s=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Jt.platform;return fe(this,"fontFamilyMap",new Map([["sans-serif",(e&&t?"Calibri, ":"")+"sans-serif"],["monospace",(e&&t?"Lucida Console, ":"")+"monospace"]]))}render(){const e=()=>{this.#u.read().then(({value:t,done:i})=>{i?this.#e.resolve():(this.#r??=t.lang,Object.assign(this.#h,t.styles),this.#T(t.items),e())},this.#e.reject)};return this.#u=this.#f.getReader(),tn.#E.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const i=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==this.#d&&(t?.(),this.#d=r,Is(this.#a,{rotation:r})),i!==this.#o){t?.(),this.#o=i;const s={div:null,properties:null,ctx:tn.#I(this.#r)};for(const o of this.#g)s.properties=this.#v.get(o),s.div=o,this.#A(s)}}cancel(){const e=new Ms("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#p}#T(e){if(this.#n)return;this.#s.ctx??=tn.#I(this.#r);const t=this.#g,i=this.#p;for(const r of e){if(t.length>1e5)return re("Ignoring additional textDivs for performance reasons."),void(this.#n=!0);if(void 0!==r.str)i.push(r.str),this.#M(r);else if("beginMarkedContentProps"===r.type||"beginMarkedContent"===r.type){const s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),null!==r.id&&this.#t.setAttribute("id",`${r.id}`),s.append(this.#t)}else"endMarkedContent"===r.type&&(this.#t=this.#t.parentNode)}}#M(e){const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};this.#g.push(t);const r=L.transform(this.#m,e.transform);let s=Math.atan2(r[1],r[0]);const o=this.#h[e.fontName];o.vertical&&(s+=Math.PI/2);let a=this.#i&&o.fontSubstitution||o.fontFamily;a=tn.fontFamilyMap.get(a)||a;const l=Math.hypot(r[2],r[3]),c=l*tn.#N(a,this.#r);let u,d;0===s?(u=r[4],d=r[5]-c):(u=r[4]+c*Math.sin(s),d=r[5]-c*Math.cos(s));const h="calc(var(--scale-factor)*",f=t.style;this.#t===this.#a?(f.left=`${(100*u/this.#c).toFixed(2)}%`,f.top=`${(100*d/this.#l).toFixed(2)}%`):(f.left=`${h}${u.toFixed(2)}px)`,f.top=`${h}${d.toFixed(2)}px)`),f.fontSize=`${h}${(tn.#w*l).toFixed(2)}px)`,f.fontFamily=a,i.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#i&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),0!==s&&(i.angle=s*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const g=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);g!==v&&Math.max(g,v)/Math.min(g,v)>1.5&&(p=!0)}if(p&&(i.canvasWidth=o.vertical?e.height:e.width),this.#v.set(t,i),this.#s.div=t,this.#s.properties=i,this.#A(this.#s),i.hasText&&this.#t.append(t),i.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),this.#t.append(g)}}#A(e){const{div:t,properties:i,ctx:r}=e,{style:s}=t;let o="";if(tn.#w>1&&(o=`scale(${1/tn.#w})`),0!==i.canvasWidth&&i.hasText){const{fontFamily:a}=s,{canvasWidth:l,fontSize:c}=i;tn.#S(r,c*this.#o,a);const{width:u}=r.measureText(t.textContent);u>0&&(o=`scaleX(${l*this.#o/u}) ${o}`)}0!==i.angle&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(s.transform=o)}static cleanup(){if(!(this.#E.size>0)){this.#y.clear();for(const{canvas:e}of this.#b.values())e.remove();this.#b.clear()}}static#I(e=null){let t=this.#b.get(e||="");if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(e,t),this.#C.set(t,{size:0,family:""})}return t}static#S(e,t,i){const r=this.#C.get(e);t===r.size&&i===r.family||(e.font=`${t}px ${i}`,r.size=t,r.family=i)}static#P(){if(null!==this.#w)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#w=e.getBoundingClientRect().height,e.remove()}static#N(e,t){const i=this.#y.get(e);if(i)return i;const r=this.#I(t);r.canvas.width=r.canvas.height=30,this.#S(r,30,e);const s=r.measureText("");let o=s.fontBoundingBoxAscent,a=Math.abs(s.fontBoundingBoxDescent);if(o){const u=o/(o+a);return this.#y.set(e,u),r.canvas.width=r.canvas.height=0,u}r.strokeStyle="red",r.clearRect(0,0,30,30),r.strokeText("g",0,0);let l=r.getImageData(0,0,30,30).data;a=0;for(let u=l.length-1-3;u>=0;u-=4)if(l[u]>0){a=Math.ceil(u/4/30);break}r.clearRect(0,0,30,30),r.strokeText("A",0,30),l=r.getImageData(0,0,30,30).data,o=0;for(let u=0,d=l.length;u<d;u+=4)if(l[u]>0){o=30-Math.floor(u/4/30);break}r.canvas.width=r.canvas.height=0;const c=o?o/(o+a):.8;return this.#y.set(e,c),c}}class fc{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};return function r(s){if(!s)return;let o=null;const a=s.name;if("#text"===a)o=s.value;else{if(!fc.shouldBuildText(a))return;s?.attributes?.textContent?o=s.attributes.textContent:s.value&&(o=s.value)}if(null!==o&&t.push({str:o}),s.children)for(const l of s.children)r(l)}(e),i}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}const Z4=65536,t5=Bt?class h4 extends IT{_createCanvas(e,t){return kr.get("canvas").createCanvas(e,t)}}:class c4 extends IT{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}},n5=Bt?class f4 extends xT{_fetch(e){return S(function*(){return kT(e)})()}}:TT,i5=Bt?class d4 extends PT{}:class u4 extends PT{#e;#t;#n;#i;#r;#s;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#i=e,this.#r=t}get#c(){return this.#t||=new Map}get#u(){return this.#s||=new Map}get#a(){if(!this.#n){const e=this.#r.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const i=this.#r.createElementNS(er,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#n=this.#r.createElementNS(er,"defs"),e.append(i),i.append(this.#n),this.#r.body.append(e)}return this.#n}#d(e){if(1===e.length){const l=e[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=l[d]/255;const u=c.join(",");return[u,u,u]}const[t,i,r]=e,s=new Array(256),o=new Array(256),a=new Array(256);for(let l=0;l<256;l++)s[l]=t[l]/255,o[l]=i[l]/255,a[l]=r[l]/255;return[s.join(","),o.join(","),a.join(",")]}#o(e){if(void 0===this.#e){this.#e="";const t=this.#r.URL;t!==this.#r.baseURI&&(Sh(t)?re('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#c.get(e);if(t)return t;const[i,r,s]=this.#d(e),o=1===e.length?i:`${i}${r}${s}`;if(t=this.#c.get(o),t)return this.#c.set(e,t),t;const a=`g_${this.#i}_transfer_map_${this.#l++}`,l=this.#o(a);this.#c.set(e,l),this.#c.set(o,l);const c=this.#f(a);return this.#v(i,r,s,c),l}addHCMFilter(e,t){const i=`${e}-${t}`,r="base";let s=this.#u.get(r);if(s?.key===i||(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},this.#u.set(r,s)),!e||!t))return s.url;const o=this.#y(e);e=L.makeHexColor(...o);const a=this.#y(t);if(t=L.makeHexColor(...a),this.#a.style.color="","#000000"===e&&"#ffffff"===t||e===t)return s.url;const l=new Array(256);for(let f=0;f<=255;f++){const p=f/255;l[f]=p<=.03928?p/12.92:((p+.055)/1.055)**2.4}const c=l.join(","),u=`g_${this.#i}_hcm_filter`,d=s.filter=this.#f(u);this.#v(c,c,c,d),this.#p(d);const h=(f,p)=>{const g=o[f]/255,v=a[f]/255,m=new Array(p+1);for(let y=0;y<=p;y++)m[y]=g+y/p*(v-g);return m.join(",")};return this.#v(h(0,5),h(1,5),h(2,5),d),s.url=this.#o(u),s.url}addAlphaFilter(e){let t=this.#c.get(e);if(t)return t;const[i]=this.#d([e]),r=`alpha_${i}`;if(t=this.#c.get(r),t)return this.#c.set(e,t),t;const s=`g_${this.#i}_alpha_map_${this.#l++}`,o=this.#o(s);this.#c.set(e,o),this.#c.set(r,o);const a=this.#f(s);return this.#m(i,a),o}addLuminosityFilter(e){let i,r,t=this.#c.get(e||"luminosity");if(t)return t;if(e?([i]=this.#d([e]),r=`luminosity_${i}`):r="luminosity",t=this.#c.get(r),t)return this.#c.set(e,t),t;const s=`g_${this.#i}_luminosity_map_${this.#l++}`,o=this.#o(s);this.#c.set(e,o),this.#c.set(r,o);const a=this.#f(s);return this.#h(a),e&&this.#m(i,a),o}addHighlightHCMFilter(e,t,i,r,s){const o=`${t}-${i}-${r}-${s}`;let a=this.#u.get(e);if(a?.key===o||(a?(a.filter?.remove(),a.key=o,a.url="none",a.filter=null):(a={key:o,url:"none",filter:null},this.#u.set(e,a)),!t||!i))return a.url;const[l,c]=[t,i].map(this.#y.bind(this));let u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[h,f]=[r,s].map(this.#y.bind(this));d<u&&([u,d,h,f]=[d,u,f,h]),this.#a.style.color="";const p=(m,y,_)=>{const b=new Array(256),w=(d-u)/_,A=m/255,x=(y-m)/(255*_);let T=0;for(let E=0;E<=_;E++){const D=Math.round(u+E*w),k=A+E*x;for(let ue=T;ue<=D;ue++)b[ue]=k;T=D+1}for(let E=T;E<256;E++)b[E]=b[T-1];return b.join(",")},g=`g_${this.#i}_hcm_${e}_filter`,v=a.filter=this.#f(g);return this.#p(v),this.#v(p(h[0],f[0],5),p(h[1],f[1],5),p(h[2],f[2],5),v),a.url=this.#o(g),a.url}destroy(e=!1){e&&0!==this.#u.size||(this.#n&&(this.#n.parentNode.parentNode.remove(),this.#n=null),this.#t&&(this.#t.clear(),this.#t=null),this.#l=0)}#h(e){const t=this.#r.createElementNS(er,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){const t=this.#r.createElementNS(er,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#f(e){const t=this.#r.createElementNS(er,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#a.append(t),t}#g(e,t,i){const r=this.#r.createElementNS(er,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)}#v(e,t,i,r){const s=this.#r.createElementNS(er,"feComponentTransfer");r.append(s),this.#g(s,"feFuncR",e),this.#g(s,"feFuncG",t),this.#g(s,"feFuncB",i)}#m(e,t){const i=this.#r.createElementNS(er,"feComponentTransfer");t.append(i),this.#g(i,"feFuncA",e)}#y(e){return this.#a.style.color=e,$y(getComputedStyle(this.#a).getPropertyValue("color"))}},r5=Bt?class p4 extends RT{_fetch(e){return S(function*(){return kT(e)})()}}:NT;function s5(n={}){"string"==typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new o_,{docId:t}=e,i=n.url?function o5(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Bt&&"string"==typeof n)return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,r=n.data?function a5(n){if(Bt&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if("string"==typeof n)return ia(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||"object"==typeof n&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,s=n.httpHeaders||null,o=!0===n.withCredentials,a=n.password??null,l=n.range instanceof eP?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:Z4;let u=n.worker instanceof It?n.worker:null;const d=n.verbosity,h="string"!=typeof n.docBaseUrl||Sh(n.docBaseUrl)?null:n.docBaseUrl,f="string"==typeof n.cMapUrl?n.cMapUrl:null,p=!1!==n.cMapPacked,g=n.CMapReaderFactory||n5,v="string"==typeof n.standardFontDataUrl?n.standardFontDataUrl:null,m=n.StandardFontDataFactory||r5,y=!0!==n.stopAtErrors,_=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,b=!1!==n.isEvalSupported,w="boolean"==typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!Bt,A="boolean"==typeof n.isChrome?n.isChrome:!Jt.platform.isFirefox&&typeof window<"u"&&!!window?.chrome,x=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,T="boolean"==typeof n.disableFontFace?n.disableFontFace:Bt,E=!0===n.fontExtraProperties,D=!0===n.enableXfa,k=n.ownerDocument||globalThis.document,ue=!0===n.disableRange,ce=!0===n.disableStream,de=!0===n.disableAutoFetch,Te=!0===n.pdfBug,nt=n.CanvasFactory||t5,B=n.FilterFactory||i5,se=!0===n.enableHWA,Fr=l?l.length:n.length??NaN,ks="boolean"==typeof n.useSystemFonts?n.useSystemFonts:!Bt&&!T,Un="boolean"==typeof n.useWorkerFetch?n.useWorkerFetch:g===TT&&m===NT&&f&&v&&oc(f,document.baseURI)&&oc(v,document.baseURI);n.canvasFactory&&ET("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&ET("`filterFactory`-instance option, please use `FilterFactory` instead."),function Bq(n){Number.isInteger(n)&&(wh=n)}(d);const ht={canvasFactory:new nt({ownerDocument:k,enableHWA:se}),filterFactory:new B({docId:t,ownerDocument:k}),cMapReaderFactory:Un?null:new g({baseUrl:f,isCompressed:p}),standardFontDataFactory:Un?null:new m({baseUrl:v})};if(!u){const $n={verbosity:d,port:dc.workerPort};u=$n.port?It.fromPort($n):new It($n),e._worker=u}const pa={docId:t,apiVersion:"4.8.69",data:r,password:a,disableAutoFetch:de,rangeChunkSize:c,length:Fr,docBaseUrl:h,enableXfa:D,evaluatorOptions:{maxImageSize:_,disableFontFace:T,ignoreErrors:y,isEvalSupported:b,isOffscreenCanvasSupported:w,isChrome:A,canvasMaxAreaInBytes:x,fontExtraProperties:E,useSystemFonts:ks,cMapUrl:Un?f:null,standardFontDataUrl:Un?v:null}},Sc={disableFontFace:T,fontExtraProperties:E,ownerDocument:k,pdfBug:Te,styleElement:null,loadingParams:{disableAutoFetch:de,enableXfa:D}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const $n=u.messageHandler.sendWithPromise("GetDocRequest",pa,r?[r.buffer]:null);let $e;if(l)$e=new R4(l,{disableRange:ue,disableStream:ce});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let lr;lr=Bt?typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&oc(i)?KT:W4:oc(i)?KT:j4,$e=new lr({url:i,length:Fr,httpHeaders:s,withCredentials:o,rangeChunkSize:c,disableRange:ue,disableStream:ce})}return $n.then(lr=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const G_=new hc(t,lr,u.port),yX=new d5(G_,e,$e,Sc,ht);e._transport=yX,G_.send("Ready",null)})}).catch(e._capability.reject),e}function JT(n){return"object"==typeof n&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0}class o_{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d"+o_.#e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){var e=this;return S(function*(){e.destroyed=!0;try{e._worker?.port&&(e._worker._pendingDestroy=!0),yield e._transport?.destroy()}catch(t){throw e._worker?.port&&delete e._worker._pendingDestroy,t}e._transport=null,e._worker&&(e._worker.destroy(),e._worker=null)})()}}class eP{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Ve("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class l5{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return fe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class c5{#e=null;#t=!1;constructor(e,t,i,r=!1){this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new wT:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new tP,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:s=!1}={}){return new sc({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return fe(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){var e=this;return S(function*(){return e._transport._htmlForXfa?.children[e._pageIndex]||null})()}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=Rr.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:d=!1}){this._stats?.time("Overall");const h=this._transport.getRenderingIntent(i,r,u,d),{renderingIntent:f,cacheKey:p}=h;this.#t=!1,this.#i(),a||=this._transport.getOptionalContentConfig(f);let g=this._intentStates.get(p);g||(g=Object.create(null),this._intentStates.set(p,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const v=!!(4&f);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(h));const m=b=>{g.renderTasks.delete(y),(this._maybeCleanupAfterRender||v)&&(this.#t=!0),this.#n(!v),b?(y.capability.reject(b),this._abortOperatorList({intentState:g,reason:b instanceof Error?b:new Error(b)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},y=new aa({callback:m,params:{canvasContext:e,viewport:t,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:c});(g.renderTasks||=new Set).add(y);const _=y.task;return Promise.all([g.displayReadyCapability.promise,a]).then(([b,w])=>{if(this.destroyed)m();else{if(this._stats?.time("Rendering"),!(w.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");y.initializeGraphics({transparency:b,optionalContentConfig:w}),y.operatorListChanged()}}).catch(m),_}getOperatorList({intent:e="display",annotationMode:t=Rr.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){const o=this._transport.getRenderingIntent(e,t,i,r,!0);let l,a=this._intentStates.get(o.cacheKey);return a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a)),a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))},a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:r=>r.items.length})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>fc.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,r){const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};!function s(){o.read().then(function({value:l,done:c}){c?i(a):(a.lang??=l.lang,Object.assign(a.styles,l.styles),a.items.push(...l.items),s())},r)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const t=this.#n(!1);return e&&t&&(this._stats&&=new wT),t}#n(e=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},5e3),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){const i=this._intentStates.get(t);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:r}){const{map:s,transfer:o}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:r},o).getReader(),c=this._intentStates.get(t);c.streamReader=l;const u=()=>{l.read().then(({value:d,done:h})=>{h?c.streamReader=null:this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const h of c.renderTasks)h.operatorListChanged();this.#n(!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else{if(!c.opListReadCapability)throw d;c.opListReadCapability.reject(d)}}})};u()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Hy){let r=100;return t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),void(e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r))}}if(e.streamReader.cancel(new Ms(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}class u5{#e=new Map;#t=Promise.resolve();postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[r]of this.#e)r.call(this,i)})}addEventListener(e,t,i=null){let r=null;if(i?.signal instanceof AbortSignal){const{signal:s}=i;if(s.aborted)return void re("LoopbackPort - cannot use an `aborted` signal.");const o=()=>this.removeEventListener(e,t);r=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}this.#e.set(t,r)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}class It{static#e=0;static#t=!1;static#n;static{Bt&&(this.#t=!0,dc.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||"null"===i.origin)return!1}catch{return!1}const r=new URL(t,i);return i.origin===r.origin},this._createCDNWrapper=e=>URL.createObjectURL(new Blob([`await import("${e}");`],{type:"text/javascript"}))}constructor({name:e=null,port:t=null,verbosity:i=jq()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(It.#n?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");return(It.#n||=new WeakMap).set(t,this),void this._initializeFromPort(t)}this._initialize()}get promise(){return Bt?Promise.all([kr.promise,this._readyCapability.promise]):this._readyCapability.promise}#i(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new hc("main","worker",e),this._messageHandler.on("ready",function(){}),this.#i()}_initialize(){if(It.#t||It.#r)return void this._setupFakeWorker();let{workerSrc:e}=It;try{It._isSameOrigin(window.location.href,e)||(e=It._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new hc("main","worker",t),r=()=>{s.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:s.signal}),i.on("test",a=>{s.abort(),!this.destroyed&&a?(this._messageHandler=i,this._port=t,this._webWorker=t,this.#i()):r()}),i.on("ready",a=>{if(s.abort(),this.destroyed)r();else try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};return void o()}catch{Eh("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){It.#t||(re("Setting up fake worker."),It.#t=!0),It._setupFakeWorkerGlobal.then(e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const t=new u5;this._port=t;const i="fake"+It.#e++,r=new hc(i+"_worker",i,t);e.setup(r,t),this._messageHandler=new hc(i,i+"_worker",t),this.#i()}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),It.#n?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=this.#n?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new It(e)}static get workerSrc(){if(dc.workerSrc)return dc.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#r(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var e=this;return fe(this,"_setupFakeWorkerGlobal",function(){var i=S(function*(){return e.#r?e.#r:(yield import(e.workerSrc)).WorkerMessageHandler});return function(){return i.apply(this,arguments)}}()())}}class d5{#e=new Map;#t=new Map;#n=new Map;#i=new Map;#r=null;constructor(e,t,i,r,s){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new tP,this.fontLoader=new a4({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(e,t=null){const i=this.#e.get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,r),r}get annotationStorage(){return fe(this,"annotationStorage",new Yy)}getRenderingIntent(e,t=Rr.ENABLE,i=null,r=!1,s=!1){let o=2,a=qy;switch(e){case"any":o=1;break;case"display":break;case"print":o=4;break;default:re(`getRenderingIntent - invalid intent: ${e}`)}const l=4&o&&i instanceof MT?i:this.annotationStorage;switch(t){case Rr.DISABLE:o+=64;break;case Rr.ENABLE:break;case Rr.ENABLE_FORMS:o+=16;break;case Rr.ENABLE_STORAGE:o+=32,a=l.serializable;break;default:re(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=128),s&&(o+=256);const{ids:c,hash:u}=l.modifiedIds;return{renderingIntent:o,cacheKey:[o,a.hash,u].join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#t.values())e.push(i._destroy());this.#t.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),tn.cleanup(),this._networkStream?.cancelAllRequests(new Ms("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){var e=this;const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(r,s)=>{bt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},s.onPull=()=>{this._fullReader.read().then(function({value:o,done:a}){a?s.close():(bt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o]))}).catch(o=>{s.error(o)})},s.onCancel=o=>{this._fullReader.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",function(){var r=S(function*(s){yield e._fullReader.headersReady;const{isStreamingSupported:o,isRangeSupported:a,contentLength:l}=e._fullReader;return(!o||!a)&&(e._lastProgress&&i.onProgress?.(e._lastProgress),e._fullReader.onProgress=c=>{i.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:o,isRangeSupported:a,contentLength:l}});return function(s){return r.apply(this,arguments)}}()),t.on("GetRangeReader",(r,s)=>{bt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(r.begin,r.end);o?(s.onPull=()=>{o.read().then(function({value:a,done:l}){l?s.close():(bt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a]))}).catch(a=>{s.error(a)})},s.onCancel=a=>{o.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}):s.close()}),t.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,i._capability.resolve(new l5(r,this))}),t.on("DocException",function(r){let s;switch(r.name){case"PasswordException":s=new Oy(r.message,r.code);break;case"InvalidPDFException":s=new yT(r.message);break;case"MissingPDFException":s=new Ss(r.message);break;case"UnexpectedResponseException":s=new Ch(r.message,r.status);break;case"UnknownErrorException":s=new Fy(r.message,r.details);break;default:Ve("DocException - expected a valid Error.")}i._capability.reject(s)}),t.on("PasswordRequest",r=>{if(this.#r=Promise.withResolvers(),i.onPassword){const s=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};try{i.onPassword(s,r.code)}catch(o){this.#r.reject(o)}}else this.#r.reject(new Oy(r.message,r.code));return this.#r.promise}),t.on("DataLoaded",r=>{i.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),t.on("StartRenderPage",r=>{this.destroyed||this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),t.on("commonobj",([r,s,o])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:c}=this._params;if("error"in o){const f=o.error;re(`Error during font loading: ${f}`),this.commonObjs.resolve(r,f);break}const u=c&&globalThis.FontInspector?.enabled?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,d=new l4(o,{disableFontFace:a,inspectFont:u});this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l&&d.data&&(d.data=null),this.commonObjs.resolve(r,d)});break;case"CopyLocalImage":const{imageRef:h}=o;bt(h,"The imageRef must be defined.");for(const f of this.#t.values())for(const[,p]of f.objs)if(p?.ref===h)return p.dataLen?(this.commonObjs.resolve(r,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,o);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([r,s,o,a])=>{if(this.destroyed)return;const l=this.#t.get(s);if(!l.objs.has(r)){if(0===l._intentStates.size)return void a?.bitmap?.close();switch(o){case"Image":l.objs.resolve(r,a),a?.dataLen>1e7&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",r=>{this.destroyed||i.onProgress?.({loaded:r.loaded,total:r.total})}),t.on("FetchBuiltInCMap",function(){var r=S(function*(s){if(e.destroyed)throw new Error("Worker was destroyed.");if(!e.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return e.cMapReaderFactory.fetch(s)});return function(s){return r.apply(this,arguments)}}()),t.on("FetchStandardFontData",function(){var r=S(function*(s){if(e.destroyed)throw new Error("Worker was destroyed.");if(!e.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return e.standardFontDataFactory.fetch(s)});return function(s){return r.apply(this,arguments)}}())}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&re("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=this.#n.get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#i.set(s.refStr,e);const o=new c5(t,s,this,this._params.pdfBug);return this.#t.set(t,o),o});return this.#n.set(t,r),r}getPageIndex(e){return JT(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(t=>new P4(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(r=>({info:r[0],metadata:r[1]?new x4(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(){var e=this;return S(function*(t=!1){if(!e.destroyed){yield e.messageHandler.sendWithPromise("Cleanup",null);for(const i of e.#t.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);e.commonObjs.clear(),t||e.fontLoader.clear(),e.#e.clear(),e.filterFactory.destroy(!0),tn.cleanup()}}).apply(this,arguments)}cachedPageNumber(e){return JT(e)?this.#i.get(0===e.gen?`${e.num}R`:`${e.num}R${e.gen}`)??null:null}}const Rh=Symbol("INITIAL_DATA");class tP{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Rh}}get(e,t=null){if(t){const r=this.#t(e);return r.promise.then(()=>t(r.data)),null}const i=this.#e[e];if(!i||i.data===Rh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=this.#e[e];return!!t&&t.data!==Rh}resolve(e,t=null){const i=this.#t(e);i.data=t,i.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Rh&&(yield[e,t])}}}class h5{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class aa{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:h=null}){this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===u&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new h5(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(aa.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");aa.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:s,background:o}=this.params;this.gfx=new sa(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),aa.#t.delete(this._canvas),this.callback(e||new Hy(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var e=this;return S(function*(){e.cancelled||(e.operatorListIdx=e.gfx.executeOperatorList(e.operatorList,e.operatorListIdx,e._continueBound,e.stepper),e.operatorListIdx===e.operatorList.argsArray.length&&(e.running=!1,e.operatorList.lastChunk&&(e.gfx.endDrawing(),aa.#t.delete(e._canvas),e.callback())))})()}}const f5="4.8.69",p5="3634dab10";function nP(n){return Math.floor(255*Math.max(0,Math.min(1,n))).toString(16).padStart(2,"0")}function pc(n){return Math.max(0,Math.min(255,255*n))}class iP{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return[e=pc(e),e,e]}static G_HTML([e]){const t=nP(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(pc)}static RGB_HTML(e){return`#${e.map(nP).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[pc(1-Math.min(1,e+r)),pc(1-Math.min(1,i+r)),pc(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,s=1-t,o=1-i;return["CMYK",r,s,o,Math.min(r,s,o)]}}class g5{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if("string"!=typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ve("Abstract method `_createSVG` called.")}}class a_ extends g5{_createSVG(e){return document.createElementNS(er,e)}}class rP{static setupStorage(e,t,i,r,s){const o=r.getValue(t,{value:null});switch(i.name){case"textarea":if(null!==o.value&&(e.textContent=o.value),"print"===s)break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})});break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(o.value===i.attributes.xfaOn?e.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&e.removeAttribute("checked"),"print"===s)break;e.addEventListener("change",a=>{r.setValue(t,{value:a.target.getAttribute(a.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==o.value&&e.setAttribute("value",o.value),"print"===s)break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})})}break;case"select":if(null!==o.value){e.setAttribute("value",o.value);for(const a of i.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options;r.setValue(t,{value:-1===l.selectedIndex?"":l[l.selectedIndex].value})})}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:s}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;"radio"===o.type&&(o.name=`${o.name}-${r}`);for(const[l,c]of Object.entries(o))if(null!=c)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||"href"!==l&&"newWindow"!==l)&&e.setAttribute(l,c)}a&&s.addLinkAttributes(e,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(e,o.dataId,t,i)}static render(e){const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,s=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:s,linkService:i});const a="richText"!==s,l=e.div;if(l.append(o),e.viewport){const d=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=d}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(0===r.children.length){if(r.value){const d=document.createTextNode(r.value);o.append(d),a&&fc.shouldBuildText(r.name)&&c.push(d)}return{textDivs:c}}const u=[[r,-1,o]];for(;u.length>0;){const[d,h,f]=u.at(-1);if(h+1===d.children.length){u.pop();continue}const p=d.children[++u.at(-1)[1]];if(null===p)continue;const{name:g}=p;if("#text"===g){const m=document.createTextNode(p.value);c.push(m),f.append(m);continue}const v=p?.attributes?.xmlns?document.createElementNS(p.attributes.xmlns,g):document.createElement(g);if(f.append(v),p.attributes&&this.setAttributes({html:v,element:p,storage:t,intent:s,linkService:i}),p.children?.length>0)u.push([p,-1,v]);else if(p.value){const m=document.createTextNode(p.value);a&&fc.shouldBuildText(g)&&c.push(m),v.append(m)}}for(const d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const gc=1e3,xs=new WeakSet;function nr(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class v5{static create(e){switch(e.data.annotationType){case 2:return new sP(e);case 1:return new y5(e);case 20:switch(e.data.fieldType){case"Tx":return new _5(e);case"Btn":return e.data.radioButton?new oP(e):e.data.checkBox?new w5(e):new E5(e);case"Ch":return new C5(e);case"Sig":return new b5(e)}return new Ts(e);case 16:return new l_(e);case 3:return new aP(e);case 4:return new D5(e);case 5:return new S5(e);case 6:return new M5(e);case 8:return new lP(e);case 14:return new x5(e);case 15:return new c_(e);case 7:return new I5(e);case 9:return new cP(e);case 10:return new T5(e);case 11:return new P5(e);case 12:return new R5(e);case 13:return new uP(e);case 17:return new N5(e);default:return new rt(e)}}}class rt{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e?.str||t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return rt._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#i(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#i(e){const{container:{style:t},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}}}=this;i?.splice(0,4,...e);const{width:c,height:u}=nr(e);t.left=100*(e[0]-a)/s+"%",t.top=100*(o-e[3]+l)/o+"%",0===r?(t.width=100*c/s+"%",t.height=100*u/o+"%"):this.setRotation(r)}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof Ts||(s.tabIndex=gc);const{style:o}=s;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof l_){const{rotation:g}=t;return!t.hasOwnCanvas&&0!==g&&this.setRotation(g,s),s}const{width:a,height:l}=nr(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,v=t.borderStyle.verticalCornerRadius;switch(g>0||v>0?o.borderRadius=`calc(${g}px * var(--scale-factor)) / calc(${v}px * var(--scale-factor))`:this instanceof oP&&(o.borderRadius=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`),t.borderStyle.style){case 1:o.borderStyle="solid";break;case 2:o.borderStyle="dashed";break;case 3:re("Unimplemented border style: beveled");break;case 4:re("Unimplemented border style: inset");break;case 5:o.borderBottomStyle="solid"}const m=t.borderColor||null;m?(this.#t=!0,o.borderColor=L.makeHexColor(0|m[0],0|m[1],0|m[2])):o.borderWidth=0}const c=L.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:u,pageHeight:d,pageX:h,pageY:f}=r.rawDims;o.left=100*(c[0]-h)/u+"%",o.top=100*(c[1]-f)/d+"%";const{rotation:p}=t;return t.hasOwnCanvas||0===p?(o.width=100*a/u+"%",o.height=100*l/d+"%"):this.setRotation(p,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:s,height:o}=nr(this.data.rect);let a,l;e%180==0?(a=100*s/i,l=100*o/r):(a=100*o/i,l=100*s/r),t.style.width=`${a}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,r)=>{const s=r.detail[t],o=s[0],a=s.slice(1);r.target.style[i]=iP[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:iP[`${o}_rgb`](a)})};return fe(this,"_commonActions",{display:t=>{const{display:i}=t.detail,r=i%2==1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:1===i||2===i})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail))(e[r]||i[r])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,s]of Object.entries(t)){const o=i[r];o&&(o({detail:{[r]:s},target:e}),delete t[r])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,r,s]=this.data.rect.map(g=>Math.fround(g));if(8===e.length){const[g,v,m,y]=e.subarray(2,6);if(r===g&&s===v&&t===m&&i===y)return}const{style:o}=this.container;let a;if(this.#t){const{borderColor:g,borderWidth:v}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const l=r-t,c=s-i,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const h=u.createElement("defs");d.append(h);const f=u.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),h.append(f);for(let g=2,v=e.length;g<v;g+=8){const m=e[g],y=e[g+1],_=e[g+2],b=e[g+3],w=u.createElement("rect"),A=(_-t)/l,x=(s-y)/c,T=(m-_)/l,E=(y-b)/c;w.setAttribute("x",A),w.setAttribute("y",x),w.setAttribute("width",T),w.setAttribute("height",E),f.append(w),a?.push(`<rect vector-effect="non-scaling-stroke" x="${A}" y="${x}" width="${T}" height="${E}"/>`)}this.#t&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{data:e}=this,t=this.#n=new l_({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){Ve("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:o,exportValues:a}of r){if(-1===s||o===t)continue;const l="string"==typeof a?a:null,c=document.querySelector(`[data-element-id="${o}"]`);!c||xs.has(c)?i.push({id:o,exportValue:l,domElement:c}):re(`_getElementsByName - element not allowed: ${o}`)}return i}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,o=r.getAttribute("data-element-id");o!==t&&xs.has(r)&&i.push({id:o,exportValue:s,domElement:r})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class sP extends rt{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(this.#t(i,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(this.#n(i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,i=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const s=i.get(r);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects)return re('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(i||(e.onclick=()=>!1));e.onclick=()=>{i?.();const{fields:r,refs:s,include:o}=t,a=[];if(0!==r.length||0!==s.length){const u=new Set(s);for(const d of r){const h=this._fieldObjects[d]||[];for(const{id:f}of h)u.add(f)}for(const d of Object.values(this._fieldObjects))for(const h of d)u.has(h.id)===o&&a.push(h)}else for(const u of Object.values(this._fieldObjects))a.push(...u);const l=this.annotationStorage,c=[];for(const u of a){const{id:d}=u;switch(c.push(d),u.type){case"text":case"combobox":case"listbox":l.setValue(d,{value:u.defaultValue||""});break;case"checkbox":case"radiobutton":l.setValue(d,{value:u.defaultValue===u.exportValues});break;default:continue}const h=document.querySelector(`[data-element-id="${d}"]`);h&&(xs.has(h)?h.dispatchEvent(new Event("resetform")):re(`_bindResetFormAction - element not allowed: ${d}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}}class y5 extends rt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Ts extends rt{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&("CANVAS"===e.previousSibling?.nodeName&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Jt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,s){i.includes("mouse")?e.addEventListener(i,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(i,o=>{if("blur"===i){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if("focus"===i){if(t.focused)return;t.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o)}})})}_setEventListeners(e,t,i,r){for(const[s,o]of i)("Action"===o||this.data.actions?.[o])&&(("Focus"===o||"Blur"===o)&&(t||={focused:!1}),this._setEventListener(e,t,s,o,r),"Focus"!==o||this.data.actions?.Blur?"Blur"===o&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":L.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||9,s=e.style;let o;const l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-2),u=Math.round(c/(1.35*r))||1;o=Math.min(r,l(c/u/1.35))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-2);o=Math.min(r,l(c/1.35))}s.fontSize=`calc(${o}px * var(--scale-factor))`,s.color=L.makeHexColor(i[0],i[1],i[2]),null!==this.data.textAlignment&&(s.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class _5 extends Ts{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,i,r){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=i),s.setValue(o.id,{[r]:i})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=e.getValue(t,{value:this.data.fieldValue});let s=r.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&s.length>o&&(s=s.slice(0,o));let a=r.formattedValue||this.data.textContent?.join("\n")||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));const l={userValue:s,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=a??s,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",a??s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),xs.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=gc,this._setRequired(i,this.data.required),o&&(i.maxLength=o),i.addEventListener("input",u=>{e.setValue(t,{value:u.target.value}),this.setPropertyOnSiblings(i,"value",u.target.value,"value"),l.formattedValue=null}),i.addEventListener("resetform",u=>{i.value=l.userValue=this.data.defaultFieldValue??"",l.formattedValue=null});let c=u=>{const{formattedValue:d}=l;null!=d&&(u.target.value=d),u.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",d=>{if(l.focused)return;const{target:h}=d;l.userValue&&(h.value=l.userValue),l.lastCommittedValue=h.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),i.addEventListener("updatefromsandbox",d=>{this.showElementAndHideCanvas(d.target),this._dispatchEventFromSandbox({value(f){l.userValue=f.detail.value??"",e.setValue(t,{value:l.userValue.toString()}),f.target.value=l.userValue},formattedValue(f){const{formattedValue:p}=f.detail;l.formattedValue=p,null!=p&&f.target!==document.activeElement&&(f.target.value=p),e.setValue(t,{formattedValue:p})},selRange(f){f.target.setSelectionRange(...f.detail.selRange)},charLimit:f=>{const{charLimit:p}=f.detail,{target:g}=f;if(0===p)return void g.removeAttribute("maxLength");g.setAttribute("maxLength",p);let v=l.userValue;!v||v.length<=p||(v=v.slice(0,p),g.value=l.userValue=v,e.setValue(t,{value:v}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}},d)}),i.addEventListener("keydown",d=>{l.commitKey=1;let h=-1;if("Escape"===d.key?h=0:"Enter"!==d.key||this.data.multiLine?"Tab"===d.key&&(l.commitKey=3):h=2,-1===h)return;const{value:f}=d.target;l.lastCommittedValue!==f&&(l.lastCommittedValue=f,l.userValue=f,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:f,willCommit:!0,commitKey:h,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}))});const u=c;c=null,i.addEventListener("blur",d=>{if(!l.focused||!d.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{value:h}=d.target;l.userValue=h,l.lastCommittedValue!==h&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,willCommit:!0,commitKey:l.commitKey,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}),u(d)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",d=>{l.lastCommittedValue=null;const{data:h,target:f}=d,{value:p,selectionStart:g,selectionEnd:v}=f;let m=g,y=v;switch(d.inputType){case"deleteWordBackward":{const _=p.substring(0,g).match(/\w*[^\w]*$/);_&&(m-=_[0].length);break}case"deleteWordForward":{const _=p.substring(g).match(/^[^\w]*\w*/);_&&(y+=_[0].length);break}case"deleteContentBackward":g===v&&(m-=1);break;case"deleteContentForward":g===v&&(y+=1)}d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:p,change:h||"",willCommit:!1,selStart:m,selEnd:y}})}),this._setEventListeners(i,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.value)}if(c&&i.addEventListener("blur",c),this.data.comb){const d=(this.data.rect[2]-this.data.rect[0])/o;i.classList.add("comb"),i.style.letterSpacing=`calc(${d}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class b5 extends Ts{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class w5 extends Ts{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;"string"==typeof r&&(r="Off"!==r,e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return xs.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=gc,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,i)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(i,{value:l})}),s.addEventListener("resetform",o=>{o.target.checked=(t.defaultFieldValue||"Off")===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{this._dispatchEventFromSandbox({value(l){l.target.checked="Off"!==l.detail.value,e.setValue(i,{value:l.target.checked})}},o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class oP extends Ts{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if("string"==typeof r&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,i))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(xs.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=gc,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,i))e.setValue(c.id,{value:!1});e.setValue(i,{value:l})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=null!=a&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;s.addEventListener("updatefromsandbox",a=>{this._dispatchEventFromSandbox({value:c=>{const u=o===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const h=u&&d.id===i;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}}},a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class E5 extends sP{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class C5 extends Ts{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");xs.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=gc;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const h of r.options)h.selected=h.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,i.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),s=!1),r.append(d)}let o=null;if(s){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),r.prepend(u),o=()=>{u.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=u=>{const d=u?"value":"textContent",{options:h,multiple:f}=r;return f?Array.prototype.filter.call(h,p=>p.selected).map(p=>p[d]):-1===h.selectedIndex?null:h[h.selectedIndex][d]};let l=a(!1);const c=u=>Array.prototype.map.call(u.target.options,h=>({displayValue:h.textContent,exportValue:h.value}));return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",u=>{this._dispatchEventFromSandbox({value(h){o?.();const f=h.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(const g of r.options)g.selected=p.has(g.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(h){r.multiple=!0},remove(h){const f=r.options,p=h.detail.remove;f[p].selected=!1,r.remove(p),f.length>0&&-1===Array.prototype.findIndex.call(f,v=>v.selected)&&(f[0].selected=!0),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},clear(h){for(;0!==r.length;)r.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(h){const{index:f,displayValue:p,exportValue:g}=h.detail.insert,v=r.children[f],m=document.createElement("option");m.textContent=p,m.value=g,v?v.before(m):r.append(m),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},items(h){const{items:f}=h.detail;for(;0!==r.length;)r.remove(0);for(const p of f){const{displayValue:g,exportValue:v}=p,m=document.createElement("option");m.textContent=g,m.value=v,r.append(m)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},indices(h){const f=new Set(h.detail.indices);for(const p of h.target.options)p.selected=f.has(p.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(h){h.target.disabled=!h.detail.editable}},u)}),r.addEventListener("input",u=>{const d=a(!0),h=a(!1);e.setValue(t,{value:d}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:h,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):r.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class l_ extends rt{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:rt._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new A5({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${By}${i}`).join(",")),this.container}}class A5{#e=this.#T.bind(this);#t=this.#S.bind(this);#n=this.#I.bind(this);#i=this.#A.bind(this);#r=null;#s=null;#l=null;#c=null;#u=null;#a=null;#d=null;#o=!1;#h=null;#p=null;#f=null;#g=null;#v=null;#m=null;#y=!1;constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:s,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:d}){this.#s=e,this.#v=r,this.#l=o,this.#g=a,this.#a=l,this.#r=t,this.#f=c,this.#d=u,this.#u=i,this.#c=CT.toDateObject(s),this.trigger=i.flatMap(h=>h.getElementsToTriggerPopup());for(const h of this.trigger)h.addEventListener("click",this.#i),h.addEventListener("mouseenter",this.#n),h.addEventListener("mouseleave",this.#t),h.classList.add("popupTriggerArea");for(const h of i)h.container?.addEventListener("keydown",this.#e);this.#s.hidden=!0,d&&this.#A()}render(){if(this.#h)return;const e=this.#h=document.createElement("div");if(e.className="popup",this.#r){const s=e.style.outlineColor=L.makeHexColor(...this.#r);e.style.backgroundColor=CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?`color-mix(in srgb, ${s} 30%, white)`:L.makeHexColor(...this.#r.map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),({dir:i.dir,str:i.textContent}=this.#v),e.append(t),this.#c){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),t.append(s)}const r=this.#b;if(r)rP.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(this.#l);e.append(s)}this.#s.append(e)}get#b(){const e=this.#g,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#g.html||null}get#C(){return this.#b?.attributes?.style?.fontSize||0}get#w(){return this.#b?.attributes?.style?.color||null}#E(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:this.#w,fontSize:this.#C?`calc(${this.#C}px * var(--scale-factor))`:""}};for(const s of e.split("\n"))t.push({name:"span",value:s,attributes:r});return i}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let s=0,o=r.length;s<o;++s)i.append(document.createTextNode(r[s])),s<o-1&&i.append(document.createElement("br"));return i}#T(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&this.#o)&&this.#A()}updateEdited({rect:e,popupContent:t}){this.#m||={contentsObj:this.#l,richText:this.#g},e&&(this.#p=null),t&&(this.#g=this.#E(t),this.#l=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#m&&(({contentsObj:this.#l,richText:this.#g}=this.#m),this.#m=null,this.#h?.remove(),this.#h=null,this.#p=null)}#M(){if(null!==this.#p)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:s}}}=this.#a;let o=!!this.#d,a=o?this.#d:this.#f;for(const p of this.#u)if(!a||null!==L.intersect(p.data.rect,a)){a=p.data.rect,o=!0;break}const l=L.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]);this.#p=[100*(l[0]+(o?a[2]-a[0]+5:0)-r)/t,100*(l[1]-s)/i];const{style:f}=this.#s;f.left=`${this.#p[0]}%`,f.top=`${this.#p[1]}%`}#A(){this.#o=!this.#o,this.#o?(this.#I(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#e)):(this.#S(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#e))}#I(){this.#h||this.render(),this.isVisible?this.#o&&this.#s.classList.add("focused"):(this.#M(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#S(){this.#s.classList.remove("focused"),!this.#o&&this.isVisible&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#s.hidden=!0)}maybeShow(){this.#y&&(this.#h||this.#I(),this.#y=!1,this.#s.hidden=!1)}get isVisible(){return!1===this.#s.hidden}}class aP extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ne.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class D5 extends rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:i}=nr(e.rect),r=this.svgFactory.create(t,i,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class S5 extends rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:i}=nr(e.rect),r=this.svgFactory.create(t,i,!0),s=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",s/2),o.setAttribute("y",s/2),o.setAttribute("width",t-s),o.setAttribute("height",i-s),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class M5 extends rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:i}=nr(e.rect),r=this.svgFactory.create(t,i,!0),s=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",t/2),o.setAttribute("cy",i/2),o.setAttribute("rx",t/2-s/2),o.setAttribute("ry",i/2-s/2),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class lP extends rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:i,popupRef:r}}=this;if(!t)return this.container;const{width:s,height:o}=nr(e),a=this.svgFactory.create(s,o,!0);let l=[];for(let u=0,d=t.length;u<d;u+=2)l.push(`${t[u]-e[0]},${e[3]-t[u+1]}`);l=l.join(" ");const c=this.#e=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class I5 extends lP{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class x5 extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class c_ extends rt{#e=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?ne.HIGHLIGHT:ne.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:t,borderStyle:i,popupRef:r}}=this,{width:s,height:o}=nr(e),a=this.svgFactory.create(s,o,!0);for(const l of t){let c=[];for(let d=0,h=l.length;d<h;d+=2)c.push(`${l[d]-e[0]},${e[3]-l[d+1]}`);c=c.join(" ");const u=this.svgFactory.createElement(this.svgElementName);this.#e.push(u),u.setAttribute("points",c),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(a),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class cP extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ne.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class T5 extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class P5 extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class R5 extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class uP extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ne.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class N5 extends rt{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let i;t.hasAppearance||0===t.fillAlpha?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(100*t.fillAlpha)}%);`)),i.addEventListener("dblclick",this.#t.bind(this)),this.#e=i;const{isMac:r}=Jt.platform;return e.addEventListener("keydown",s=>{"Enter"===s.key&&(r?s.metaKey:s.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class k5{#e=null;#t=null;#n=new Map;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:o,structTreeLayer:a}){this.div=e,this.#e=t,this.#t=i,this.#i=a||null,this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#n.size>0}#r(e,t){var i=this;return S(function*(){const r=e.firstChild||e,s=r.id=`${By}${t}`,o=yield i.#i?.getAriaAttributes(s);if(o)for(const[a,l]of o)r.setAttribute(a,l);i.div.append(e),i.#e?.moveElementInDOM(i.div,e,r,!1)})()}render(e){var t=this;return S(function*(){const{annotations:i}=e,r=t.div;Is(r,t.viewport);const s=new Map,o={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new a_,annotationStorage:e.annotationStorage||new Yy,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:t,elements:null};for(const a of i){if(a.noHTML)continue;const l=16===a.annotationType;if(l){const d=s.get(a.id);if(!d)continue;o.elements=d}else{const{width:d,height:h}=nr(a.rect);if(d<=0||h<=0)continue}o.data=a;const c=v5.create(o);if(!c.isRenderable)continue;if(!l&&a.popupRef){const d=s.get(a.popupRef);d?d.push(c):s.set(a.popupRef,[c])}const u=c.render();a.hidden&&(u.style.visibility="hidden"),yield t.#r(u,a.id),c._isEditable&&(t.#n.set(c.data.id,c),t._annotationEditorUIManager?.renderAnnotationElement(c))}t.#s()})()}update({viewport:e}){const t=this.div;this.viewport=e,Is(t,{rotation:e.rotation}),this.#s(),t.hidden=!1}#s(){if(!this.#t)return;const e=this.div;for(const[t,i]of this.#t){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?"CANVAS"===s.nodeName?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}}const Nh=/\r\n?|\n/g;class wt extends X{#e;#t="";#n=`${this.id}-editor`;#i=null;#r;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=wt.prototype,t=s=>s.isEmpty(),i=cc.TRANSLATE_SMALL,r=cc.TRANSLATE_BIG;return fe(this,"_keyboardManager",new lc([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}static _type="freetext";static _editorType=ne.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||wt._defaultColor||X._defaultLineColor,this.#r=e.fontSize||wt._defaultFontSize}static initialize(e,t){X.initialize(e,t);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case K.FREETEXT_SIZE:wt._defaultFontSize=t;break;case K.FREETEXT_COLOR:wt._defaultColor=t}}updateParams(e,t){switch(e){case K.FREETEXT_SIZE:this.#s(t);break;case K.FREETEXT_COLOR:this.#l(t)}}static get defaultPropertiesToUpdate(){return[[K.FREETEXT_SIZE,wt._defaultFontSize],[K.FREETEXT_COLOR,wt._defaultColor||X._defaultLineColor]]}get propertiesToUpdate(){return[[K.FREETEXT_SIZE,this.#r],[K.FREETEXT_COLOR,this.#e]]}#s(e){const t=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-this.#r)*this.parentScale),this.#r=r,this.#u()},i=this.#r;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=r=>{this.#e=this.editorDiv.style.color=r},i=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-wt._internalPadding*e,-(wt._internalPadding+this.#r)*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ne.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#c(){const e=[];this.editorDiv.normalize();let t=null;for(const i of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&"BR"===i.nodeName||(e.push(wt.#a(i)),t=i);return e.join("\n")}#u(){const[e,t]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:s}=this,o=s.style.display,a=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",r.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=o,s.classList.toggle("hidden",a)}this.rotation%180==this.parentRotation%180?(this.width=i.width/e,this.height=i.height/t):(this.width=i.height/e,this.height=i.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#c().trimEnd();if(e===t)return;const i=r=>{this.#t=r,r?(this.#d(),this._uiManager.rebuild(this),this.#u()):this.remove()};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){wt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#r}px * var(--scale-factor))`,i.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Mh(this,this.div,["dblclick","keydown"]),this.width){const[r,s]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[a,l]=this.getInitialTranslation();[a,l]=this.pageTranslationToScreen(a,l);const[c,u]=this.pageDimensions,[d,h]=this.pageTranslation;let f,p;switch(this.rotation){case 0:f=e+(o[0]-d)/c,p=t+this.height-(o[1]-h)/u;break;case 90:f=e+(o[0]-d)/c,p=t-(o[1]-h)/u,[a,l]=[l,-a];break;case 180:f=e-this.width+(o[0]-d)/c,p=t-(o[1]-h)/u,[a,l]=[-a,-l];break;case 270:f=e+(o[0]-d-this.height*u)/c,p=t+(o[1]-h-this.width*c)/u,[a,l]=[-l,a]}this.setAt(f*r,p*s,a,l)}else this.setAt(e*r,t*s,this.width*r,this.height*s);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#a(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Nh,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:i}=t;if(1===i.length&&"text/plain"===i[0])return;e.preventDefault();const r=wt.#h(t.getData("text")||"").replaceAll(Nh,"\n");if(!r)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const o=s.getRangeAt(0);if(!r.includes("\n"))return o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),void s.collapseToStart();const{startContainer:a,startOffset:l}=o,c=[],u=[];if(a.nodeType===Node.TEXT_NODE){const f=a.parentElement;if(u.push(a.nodeValue.slice(l).replaceAll(Nh,"")),f!==this.editorDiv){let p=c;for(const g of this.editorDiv.childNodes)g!==f?p.push(wt.#a(g)):p=u}c.push(a.nodeValue.slice(0,l).replaceAll(Nh,""))}else if(a===this.editorDiv){let f=c,p=0;for(const g of this.editorDiv.childNodes)p++===l&&(f=u),f.push(wt.#a(g))}this.#t=`${c.join("\n")}${r}${u.join("\n")}`,this.#d();const d=new Range;let h=c.reduce((f,p)=>f+p.length,0);for(const{firstChild:f}of this.editorDiv.childNodes)if(f.nodeType===Node.TEXT_NODE){const p=f.nodeValue.length;if(h<=p){d.setStart(f,h),d.setEnd(f,h);break}h-=p}s.removeAllRanges(),s.addRange(d)}#d(){if(this.editorDiv.replaceChildren(),this.#t)for(const e of this.#t.split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#o(){return this.#t.replaceAll("\xa0"," ")}static#h(e){return e.replaceAll(" ","\xa0")}get contentDiv(){return this.editorDiv}static deserialize(e,t,i){var r=()=>super.deserialize,s=this;return S(function*(){let o=null;if(e instanceof aP){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:d,id:h,popupRef:f},textContent:p,textPosition:g,parent:{page:{pageNumber:v}}}=e;if(!p||0===p.length)return null;o=e={annotationType:ne.FREETEXT,color:Array.from(c),fontSize:l,value:p.join("\n"),position:g,pageIndex:v-1,rect:u.slice(0),rotation:d,id:h,deleted:!1,popupRef:f}}const a=yield r().call(s,e,t,i);return a.#r=e.fontSize,a.#e=L.makeHexColor(...e.color),a.#t=wt.#h(e.value),a.annotationElementId=e.id||null,a._initialData=o,a})()}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=wt._internalPadding*this.parentScale,i=this.getRect(t,t),r=X._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),s={annotationType:ne.FREETEXT,color:r,fontSize:this.#r,value:this.#o(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?s:this.annotationElementId&&!this.#p(s)?null:(s.id=this.annotationElementId,s)}#p(e){const{value:t,fontSize:i,color:r,pageIndex:s}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==i||e.color.some((o,a)=>o!==r[a])||e.pageIndex!==s}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:i}=t;i.fontSize=`calc(${this.#r}px * var(--scale-factor))`,i.color=this.#e,t.replaceChildren();for(const s of this.#t.split("\n")){const o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),t.append(o)}const r=wt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class dP{toSVGPath(){Ve("Abstract method `toSVGPath` must be implemented.")}get box(){Ve("Abstract getter `box` must be implemented.")}serialize(e,t){Ve("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Ve("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Ve("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}class Ps{#e;#t=[];#n;#i;#r=[];#s=new Float64Array(18);#l;#c;#u;#a;#d;#o;#h=[];static#p=8;static#f=2;static#g=Ps.#p+Ps.#f;constructor({x:e,y:t},i,r,s,o,a=0){this.#e=i,this.#o=s*r,this.#i=o,this.#s.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=a,this.#a=Ps.#p*r,this.#u=Ps.#g*r,this.#d=r,this.#h.push(e,t)}isEmpty(){return isNaN(this.#s[8])}#v(){const e=this.#s.subarray(4,6),t=this.#s.subarray(16,18),[i,r,s,o]=this.#e;return[(this.#l+(e[0]-t[0])/2-i)/s,(this.#c+(e[1]-t[1])/2-r)/o,(this.#l+(t[0]-e[0])/2-i)/s,(this.#c+(t[1]-e[1])/2-r)/o]}add({x:e,y:t}){this.#l=e,this.#c=t;const[i,r,s,o]=this.#e;let[a,l,c,u]=this.#s.subarray(8,12);const d=e-c,h=t-u,f=Math.hypot(d,h);if(f<this.#u)return!1;const p=f-this.#a,g=p/f,v=g*d,m=g*h;let y=a,_=l;a=c,l=u,c+=v,u+=m,this.#h?.push(e,t);const A=-m/p*this.#o,x=v/p*this.#o;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([c+A,u+x],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([c-A,u-x],16),isNaN(this.#s[6])?(0===this.#r.length&&(this.#s.set([a+A,l+x],2),this.#r.push(NaN,NaN,NaN,NaN,(a+A-i)/s,(l+x-r)/o),this.#s.set([a-A,l-x],14),this.#t.push(NaN,NaN,NaN,NaN,(a-A-i)/s,(l-x-r)/o)),this.#s.set([y,_,a,l,c,u],6),!this.isEmpty()):(this.#s.set([y,_,a,l,c,u],6),Math.abs(Math.atan2(_-l,y-a)-Math.atan2(m,v))<Math.PI/2?([a,l,c,u]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((a+c)/2-i)/s,((l+u)/2-r)/o),[a,l,y,_]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((y+a)/2-i)/s,((_+l)/2-r)/o),!0):([y,_,a,l,c,u]=this.#s.subarray(0,6),this.#r.push(((y+5*a)/6-i)/s,((_+5*l)/6-r)/o,((5*a+c)/6-i)/s,((5*l+u)/6-r)/o,((a+c)/2-i)/s,((l+u)/2-r)/o),[c,u,a,l,y,_]=this.#s.subarray(12,18),this.#t.push(((y+5*a)/6-i)/s,((_+5*l)/6-r)/o,((5*a+c)/6-i)/s,((5*l+u)/6-r)/o,((a+c)/2-i)/s,((l+u)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#r,t=this.#t;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#m();const i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);this.#b(i);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return this.#y(i),i.join(" ")}#m(){const[e,t,i,r]=this.#e,[s,o,a,l]=this.#v();return`M${(this.#s[2]-e)/i} ${(this.#s[3]-t)/r} L${(this.#s[4]-e)/i} ${(this.#s[5]-t)/r} L${s} ${o} L${a} ${l} L${(this.#s[16]-e)/i} ${(this.#s[17]-t)/r} L${(this.#s[14]-e)/i} ${(this.#s[15]-t)/r} Z`}#y(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#b(e){const[t,i,r,s]=this.#e,o=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[l,c,u,d]=this.#v();e.push(`L${(o[0]-t)/r} ${(o[1]-i)/s} L${l} ${c} L${u} ${d} L${(a[0]-t)/r} ${(a[1]-i)/s}`)}newFreeDrawOutline(e,t,i,r,s,o){return new hP(e,t,i,r,s,o)}getOutlines(){const e=this.#r,t=this.#t,i=this.#s,[r,s,o,a]=this.#e,l=new Float64Array((this.#h?.length??0)+2);for(let d=0,h=l.length-2;d<h;d+=2)l[d]=(this.#h[d]-r)/o,l[d+1]=(this.#h[d+1]-s)/a;if(l[l.length-2]=(this.#l-r)/o,l[l.length-1]=(this.#c-s)/a,isNaN(i[6])&&!this.isEmpty())return this.#C(l);const c=new Float64Array(this.#r.length+24+this.#t.length);let u=e.length;for(let d=0;d<u;d+=2)isNaN(e[d])?c[d]=c[d+1]=NaN:(c[d]=e[d],c[d+1]=e[d+1]);u=this.#E(c,u);for(let d=t.length-6;d>=6;d-=6)for(let h=0;h<6;h+=2)isNaN(t[d+h])?(c[u]=c[u+1]=NaN,u+=2):(c[u]=t[d+h],c[u+1]=t[d+h+1],u+=2);return this.#w(c,u),this.newFreeDrawOutline(c,l,this.#e,this.#d,this.#n,this.#i)}#C(e){const t=this.#s,[i,r,s,o]=this.#e,[a,l,c,u]=this.#v(),d=new Float64Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-i)/s,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-i)/s,(t[5]-r)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(t[16]-i)/s,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-i)/s,(t[15]-r)/o],0),this.newFreeDrawOutline(d,e,this.#e,this.#d,this.#n,this.#i)}#w(e,t){const i=this.#t;return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+6}#E(e,t){const i=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[s,o,a,l]=this.#e,[c,u,d,h]=this.#v();return e.set([NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(r[0]-s)/a,(r[1]-o)/l],t),t+24}}class hP extends dP{#e;#t=null;#n;#i;#r;#s;#l;constructor(e,t,i,r,s,o){super(),this.#l=e,this.#r=t,this.#e=i,this.#s=r,this.#n=s,this.#i=o,this.#a(o);const{x:a,y:l,width:c,height:u}=this.#t;for(let d=0,h=e.length;d<h;d+=2)e[d]=(e[d]-a)/c,e[d+1]=(e[d+1]-l)/u;for(let d=0,h=t.length;d<h;d+=2)t[d]=(t[d]-a)/c,t[d+1]=(t[d+1]-l)/u}toSVGPath(){const e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,i=this.#l.length;t<i;t+=6)isNaN(this.#l[t])?e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`):e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`);return e.push("Z"),e.join(" ")}serialize([e,t,i,r],s){const o=i-e,a=r-t;let l,c;switch(s){case 0:l=this.#c(this.#l,e,r,o,-a),c=this.#c(this.#r,e,r,o,-a);break;case 90:l=this.#u(this.#l,e,t,o,a),c=this.#u(this.#r,e,t,o,a);break;case 180:l=this.#c(this.#l,i,t,-o,a),c=this.#c(this.#r,i,t,-o,a);break;case 270:l=this.#u(this.#l,i,r,-o,-a),c=this.#u(this.#r,i,r,-o,-a)}return{outline:Array.from(l),points:[Array.from(c)]}}#c(e,t,i,r,s){const o=new Float64Array(e.length);for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*r,o[a+1]=i+e[a+1]*s;return o}#u(e,t,i,r,s){const o=new Float64Array(e.length);for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*r,o[a+1]=i+e[a]*s;return o}#a(e){const t=this.#l;let i=t[4],r=t[5],s=i,o=r,a=i,l=r,c=i,u=r;const d=e?Math.max:Math.min;for(let v=6,m=t.length;v<m;v+=6){if(isNaN(t[v]))s=Math.min(s,t[v+4]),o=Math.min(o,t[v+5]),a=Math.max(a,t[v+4]),l=Math.max(l,t[v+5]),u<t[v+5]?(c=t[v+4],u=t[v+5]):u===t[v+5]&&(c=d(c,t[v+4]));else{const y=L.bezierBoundingBox(i,r,...t.slice(v,v+6));s=Math.min(s,y[0]),o=Math.min(o,y[1]),a=Math.max(a,y[2]),l=Math.max(l,y[3]),u<y[3]?(c=y[2],u=y[3]):u===y[3]&&(c=d(c,y[2]))}i=t[v+4],r=t[v+5]}const h=s-this.#n,f=o-this.#n,p=a-s+2*this.#n,g=l-o+2*this.#n;this.#t={x:h,y:f,width:p,height:g,lastPoint:[c,u]}}get box(){return this.#t}newOutliner(e,t,i,r,s,o=0){return new Ps(e,t,i,r,s,o)}getNewOutline(e,t){const{x:i,y:r,width:s,height:o}=this.#t,[a,l,c,u]=this.#e,d=s*c,h=o*u,f=i*c+a,p=r*u+l,g=this.newOutliner({x:this.#r[0]*d+f,y:this.#r[1]*h+p},this.#e,this.#s,e,this.#i,t??this.#n);for(let v=2;v<this.#r.length;v+=2)g.add({x:this.#r[v]*d+f,y:this.#r[v+1]*h+p});return g.getOutlines()}get mustRemoveSelfIntersections(){return!0}}class fP{#e;#t=[];#n=[];constructor(e,t=0,i=0,r=!0){let s=1/0,o=-1/0,a=1/0,l=-1/0;const u=10**-4;for(const{x:m,y,width:_,height:b}of e){const w=Math.floor((m-t)/u)*u,A=Math.ceil((m+_+t)/u)*u,x=Math.floor((y-t)/u)*u,T=Math.ceil((y+b+t)/u)*u;this.#t.push([w,x,T,!0],[A,x,T,!1]),s=Math.min(s,w),o=Math.max(o,A),a=Math.min(a,x),l=Math.max(l,T)}const d=o-s+2*i,h=l-a+2*i,f=s-i,p=a-i,g=this.#t.at(r?-1:-2),v=[g[0],g[2]];for(const m of this.#t){const[y,_,b]=m;m[0]=(y-f)/d,m[1]=(_-p)/h,m[2]=(b-p)/h}this.#e={x:f,y:p,width:d,height:h,lastPoint:v}}getOutlines(){this.#t.sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of this.#t)t[3]?(e.push(...this.#c(t)),this.#s(t)):(this.#l(t),e.push(...this.#c(t)));return this.#i(e)}#i(e){const t=[],i=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),i.add(l),i.add(c)}const r=[];let s;for(;i.size>0;){const o=i.values().next().value;let[a,l,c,u,d]=o;i.delete(o);let h=a,f=l;for(s=[a,c],r.push(s);;){let p;if(i.has(u))p=u;else{if(!i.has(d))break;p=d}i.delete(p),[a,l,c,u,d]=p,h!==a&&(s.push(h,f,a,f===l?l:c),h=a),f=f===l?c:l}s.push(h,f)}return new O5(r,this.#e)}#r(e){const t=this.#n;let i=0,r=t.length-1;for(;i<=r;){const s=i+r>>1,o=t[s][0];if(o===e)return s;o<e?i=s+1:r=s-1}return r+1}#s([,e,t]){const i=this.#r(e);this.#n.splice(i,0,[e,t])}#l([,e,t]){const i=this.#r(e);for(let r=i;r<this.#n.length;r++){const[s,o]=this.#n[r];if(s!==e)break;if(s===e&&o===t)return void this.#n.splice(r,1)}for(let r=i-1;r>=0;r--){const[s,o]=this.#n[r];if(s!==e)break;if(s===e&&o===t)return void this.#n.splice(r,1)}}#c(e){const[t,i,r]=e,s=[[t,i,r]],o=this.#r(r);for(let a=0;a<o;a++){const[l,c]=this.#n[a];for(let u=0,d=s.length;u<d;u++){const[,h,f]=s[u];if(!(c<=h||f<=l)){if(h>=l){if(f>c)s[u][1]=c;else{if(1===d)return[];s.splice(u,1),u--,d--}continue}s[u][2]=l,f>c&&s.push([t,c,f])}}}return s}}class O5 extends dP{#e;#t;constructor(e,t){super(),this.#t=e,this.#e=t}toSVGPath(){const e=[];for(const t of this.#t){let[i,r]=t;e.push(`M${i} ${r}`);for(let s=2;s<t.length;s+=2){const o=t[s],a=t[s+1];o===i?(e.push(`V${a}`),r=a):a===r&&(e.push(`H${o}`),i=o)}e.push("Z")}return e.join(" ")}serialize([e,t,i,r],s){const o=[],a=i-e,l=r-t;for(const c of this.#t){const u=new Array(c.length);for(let d=0;d<c.length;d+=2)u[d]=e+c[d]*a,u[d+1]=r-c[d+1]*l;o.push(u)}return o}get box(){return this.#e}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}class u_ extends Ps{newFreeDrawOutline(e,t,i,r,s,o){return new F5(e,t,i,r,s,o)}get classNamesForDrawing(){return["highlight","free"]}}class F5 extends hP{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,i,r,s,o=0){return new u_(e,t,i,r,s,o)}}class Bn{#e=null;#t=null;#n;#i=null;#r=!1;#s=!1;#l=null;#c;#u=null;#a=null;#d;static#o=null;static get _keyboardManager(){return fe(this,"_keyboardManager",new lc([[["Escape","mac+Escape"],Bn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Bn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Bn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Bn.prototype._moveToPrevious],[["Home","mac+Home"],Bn.prototype._moveToBeginning],[["End","mac+End"],Bn.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#s=!1,this.#d=K.HIGHLIGHT_COLOR,this.#l=e):(this.#s=!0,this.#d=K.HIGHLIGHT_DEFAULT_COLOR),this.#a=e?._uiManager||t,this.#c=this.#a._eventBus,this.#n=e?.color||this.#a?.highlightColors.values().next().value||"#FFFF98",Bn.#o||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=this.#a._signal;e.addEventListener("click",this.#g.bind(this),{signal:t}),e.addEventListener("keydown",this.#f.bind(this),{signal:t});const i=this.#t=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#n,e.append(i),e}renderMainDropdown(){const e=this.#i=this.#h();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#h(){const e=document.createElement("div"),t=this.#a._signal;e.addEventListener("contextmenu",Ln,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of this.#a.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=i,s.setAttribute("data-l10n-id",Bn.#o[i]);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=r,s.setAttribute("aria-selected",r===this.#n),s.addEventListener("click",this.#p.bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",this.#f.bind(this),{signal:t}),e}#p(e,t){t.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e)return void this.#g(e);const t=e.target.getAttribute("data-color");t&&this.#p(t,e)}_moveToNext(e){this.#m?e.target!==this.#e?e.target.nextSibling?.focus():this.#i.firstChild?.focus():this.#g(e)}_moveToPrevious(e){e.target!==this.#i?.firstChild&&e.target!==this.#e?(this.#m||this.#g(e),e.target.previousSibling?.focus()):this.#m&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){this.#m?this.#i.firstChild?.focus():this.#g(e)}_moveToEnd(e){this.#m?this.#i.lastChild?.focus():this.#g(e)}#f(e){Bn._keyboardManager.exec(this,e)}#g(e){if(this.#m)return void this.hideDropdown();if(this.#r=0===e.detail,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#v.bind(this),{signal:this.#a.combinedSignal(this.#u)})),this.#i)return void this.#i.classList.remove("hidden");const t=this.#i=this.#h();this.#e.append(t)}#v(e){this.#i?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#m(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#m)return void this.#l?.unselect();this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#i)return;const t=this.#a.highlightColors.values();for(const i of this.#i.children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#i?.remove(),this.#i=null}}class st extends X{#e=null;#t=0;#n;#i=null;#r=null;#s=null;#l=null;#c=0;#u=null;#a=null;#d=null;#o=!1;#h=null;#p;#f=null;#g="";#v;#m="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=ne.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=st.prototype;return fe(this,"_keyboardManager",new lc([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||st._defaultColor,this.#v=e.thickness||st._defaultThickness,this.#p=e.opacity||st._defaultOpacity,this.#n=e.boxes||null,this.#m=e.methodOfCreation||"",this.#g=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#o=!0,this.#b(e),this.#M()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#c=e.focusOffset,this.#y(),this.#M(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#o?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#v,methodOfCreation:this.#m}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){const e=new fP(this.#n,.001);this.#a=e.getOutlines(),({x:this.x,y:this.y,width:this.width,height:this.height}=this.#a.box);const t=new fP(this.#n,.0025,.001,"ltr"===this._uiManager.direction);this.#s=t.getOutlines();const{lastPoint:i}=this.#s.box;this.#h=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#b({highlightOutlines:e,highlightId:t,clipPathId:i}){if(this.#a=e,this.#s=e.getNewOutline(this.#v/2+1.5,.0025),t>=0)this.#d=t,this.#i=i,this.parent.drawLayer.finalizeLine(t,e),this.#f=this.parent.drawLayer.drawOutline(this.#s);else if(this.parent){const u=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#d,e),this.parent.drawLayer.updateBox(this.#d,st.#A(this.#a.box,(u-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#f,this.#s),this.parent.drawLayer.updateBox(this.#f,st.#A(this.#s.box,u))}const{x:s,y:o,width:a,height:l}=e.box;switch(this.rotation){case 0:this.x=s,this.y=o,this.width=a,this.height=l;break;case 90:{const[u,d]=this.parentDimensions;this.x=o,this.y=1-s,this.width=a*d/u,this.height=l*u/d;break}case 180:this.x=1-s,this.y=1-o,this.width=a,this.height=l;break;case 270:{const[u,d]=this.parentDimensions;this.x=1-o,this.y=s,this.width=a*d/u,this.height=l*u/d;break}}const{lastPoint:c}=this.#s.box;this.#h=[(c[0]-s)/a,(c[1]-o)/l]}static initialize(e,t){X.initialize(e,t),st._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case K.HIGHLIGHT_DEFAULT_COLOR:st._defaultColor=t;break;case K.HIGHLIGHT_THICKNESS:st._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return this.#h}updateParams(e,t){switch(e){case K.HIGHLIGHT_COLOR:this.#C(t);break;case K.HIGHLIGHT_THICKNESS:this.#w(t)}}static get defaultPropertiesToUpdate(){return[[K.HIGHLIGHT_DEFAULT_COLOR,st._defaultColor],[K.HIGHLIGHT_THICKNESS,st._defaultThickness]]}get propertiesToUpdate(){return[[K.HIGHLIGHT_COLOR,this.color||st._defaultColor],[K.HIGHLIGHT_THICKNESS,this.#v||st._defaultThickness],[K.HIGHLIGHT_FREE,this.#o]]}#C(e){const t=(s,o)=>{this.color=s,this.parent?.drawLayer.changeColor(this.#d,s),this.#r?.updateColor(s),this.#p=o,this.parent?.drawLayer.changeOpacity(this.#d,o)},i=this.color,r=this.#p;this.addCommands({cmd:t.bind(this,e,st._defaultOpacity),undo:t.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#w(e){const t=this.#v,i=r=>{this.#v=r,this.#E(r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}addEditToolbar(){var e=()=>super.addEditToolbar,t=this;return S(function*(){const i=yield e().call(t);return i?(t._uiManager.highlightColors&&(t.#r=new Bn({editor:t}),i.addColorPicker(t.#r)),i):null})()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#P())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#P())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#M(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#T():e&&(this.#M(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#E(e){if(!this.#o)return;this.#b({highlightOutlines:this.#a.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,i]=this.parentDimensions;this.setDims(this.width*t,this.height*i)}#T(){null===this.#d||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#M(e=this.parent){null===this.#d&&(({id:this.#d,clipPathId:this.#i}=e.drawLayer.draw(this.#a,this.color,this.#p)),this.#f=e.drawLayer.drawOutline(this.#s),this.#u&&(this.#u.style.clipPath=this.#i))}static#A({x:e,y:t,width:i,height:r},s){switch(s){case 90:return{x:1-t-r,y:e,width:r,height:i};case 180:return{x:1-e-i,y:1-t-r,width:i,height:r};case 270:return{x:t,y:1-e-i,width:r,height:i}}return{x:e,y:t,width:i,height:r}}rotate(e){const{drawLayer:t}=this.parent;let i;i=this.#o?st.#A(this.#a.box,e=(e-this.rotation+360)%360):st.#A(this,e),t.rotate(this.#d,e),t.rotate(this.#f,e),t.updateBox(this.#d,i),t.updateBox(this.#f,st.#A(this.#s.box,e))}render(){if(this.div)return this.div;const e=super.render();this.#g&&(e.setAttribute("aria-label",this.#g),e.setAttribute("role","mark")),this.#o?e.classList.add("free"):this.div.addEventListener("keydown",this.#I.bind(this),{signal:this._uiManager._signal});const t=this.#u=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#i;const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),Mh(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(this.#f,"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(this.#f,"hovered")}#I(e){st._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#S(!0);break;case 1:case 3:this.#S(!1)}}#S(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#c)}select(){super.select(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"hovered"),this.parent?.drawLayer.addClass(this.#f,"selected"))}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"selected"),this.#o||this.#S(!1))}get _mustFixPosition(){return!this.#o}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(this.#d,e),this.parent.drawLayer.show(this.#f,e))}#P(){return this.#o?this.rotation:0}#N(){if(this.#o)return null;const[e,t]=this.pageDimensions,[i,r]=this.pageTranslation,s=this.#n,o=new Float32Array(8*s.length);let a=0;for(const{x:l,y:c,width:u,height:d}of s){const h=l*e+i,f=(1-c-d)*t+r;o[a]=o[a+4]=h,o[a+1]=o[a+3]=f,o[a+2]=o[a+6]=h+u*e,o[a+5]=o[a+7]=f+d*t,a+=8}return o}#D(e){return this.#a.serialize(e,this.#P())}static startHighlighting(e,t,{target:i,x:r,y:s}){const{x:o,y:a,width:l,height:c}=i.getBoundingClientRect(),u=new AbortController,d=e.combinedSignal(u),f=p=>{u.abort(),this.#x(e,p)};window.addEventListener("blur",f,{signal:d}),window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("pointerdown",p=>{p.preventDefault(),p.stopPropagation()},{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",Ln,{signal:d}),i.addEventListener("pointermove",this.#_.bind(this,e),{signal:d}),this._freeHighlight=new u_({x:r,y:s},[o,a,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static#_(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#x(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(e,t,i){var r=()=>super.deserialize,s=this;return S(function*(){let o=null;if(e instanceof cP){const{data:{quadPoints:v,rect:m,rotation:y,id:_,color:b,opacity:w,popupRef:A},parent:{page:{pageNumber:x}}}=e;o=e={annotationType:ne.HIGHLIGHT,color:Array.from(b),opacity:w,quadPoints:v,boxes:null,pageIndex:x-1,rect:m.slice(0),rotation:y,id:_,deleted:!1,popupRef:A}}else if(e instanceof c_){const{data:{inkLists:v,rect:m,rotation:y,id:_,color:b,borderStyle:{rawWidth:w},popupRef:A},parent:{page:{pageNumber:x}}}=e;o=e={annotationType:ne.HIGHLIGHT,color:Array.from(b),thickness:w,inkLists:v,boxes:null,pageIndex:x-1,rect:m.slice(0),rotation:y,id:_,deleted:!1,popupRef:A}}const{color:a,quadPoints:l,inkLists:c,opacity:u}=e,d=yield r().call(s,e,t,i);d.color=L.makeHexColor(...a),d.#p=u||1,c&&(d.#v=e.thickness),d.annotationElementId=e.id||null,d._initialData=o;const[h,f]=d.pageDimensions,[p,g]=d.pageTranslation;if(l){const v=d.#n=[];for(let m=0;m<l.length;m+=8)v.push({x:(l[m]-p)/h,y:1-(l[m+1]-g)/f,width:(l[m+2]-l[m])/h,height:(l[m+1]-l[m+5])/f});d.#y(),d.#M(),d.rotate(d.rotation)}else if(c){d.#o=!0;const v=c[0],m={x:v[0]-p,y:f-(v[1]-g)},y=new u_(m,[0,0,h,f],1,d.#v/2,!0,.001);for(let w=0,A=v.length;w<A;w+=2)m.x=v[w]-p,m.y=f-(v[w+1]-g),y.add(m);const{id:_,clipPathId:b}=t.drawLayer.draw(y,d.color,d._defaultOpacity,!0);d.#b({highlightOutlines:y.getOutlines(),highlightId:_,clipPathId:b}),d.#M()}return d})()}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),i=X._colorManager.convert(this.color),r={annotationType:ne.HIGHLIGHT,color:i,opacity:this.#p,thickness:this.#v,quadPoints:this.#N(),outlines:this.#D(t),pageIndex:this.pageIndex,rect:t,rotation:this.#P(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#R(r)?null:(r.id=this.annotationElementId,r)}#R(e){const{color:t}=this._initialData;return e.color.some((i,r)=>i!==t[r])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class Nt extends X{#e=0;#t=0;#n=null;#i=new Path2D;#r=!1;#s=null;#l=!1;#c=!1;#u=null;#a=null;#d=0;#o=0;#h=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=ne.INK;constructor(e){super({...e,name:"inkEditor"}),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){X.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case K.INK_THICKNESS:Nt._defaultThickness=t;break;case K.INK_COLOR:Nt._defaultColor=t;break;case K.INK_OPACITY:Nt._defaultOpacity=t/100}}updateParams(e,t){switch(e){case K.INK_THICKNESS:this.#p(t);break;case K.INK_COLOR:this.#f(t);break;case K.INK_OPACITY:this.#g(t)}}static get defaultPropertiesToUpdate(){return[[K.INK_THICKNESS,Nt._defaultThickness],[K.INK_COLOR,Nt._defaultColor||X._defaultLineColor],[K.INK_OPACITY,Math.round(100*Nt._defaultOpacity)]]}get propertiesToUpdate(){return[[K.INK_THICKNESS,this.thickness||Nt._defaultThickness],[K.INK_COLOR,this.color||Nt._defaultColor||X._defaultLineColor],[K.INK_OPACITY,Math.round(100*(this.opacity??Nt._defaultOpacity))]]}#p(e){const t=r=>{this.thickness=r,this.#k()},i=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#f(e){const t=r=>{this.color=r,this.#A()},i=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(e){const t=r=>{this.opacity=r,this.#A()},i=this.opacity;this.addCommands({cmd:t.bind(this,e/=100),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:K.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#N(),this.#D()),this.isAttachedToDOM||(this.parent.add(this),this.#_()),this.#k()))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#n&&(clearTimeout(this.#n),this.#n=null),this.#u?.disconnect(),this.#u=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions;this.setDimensions(this.width*e,this.height*t)}enableEditMode(){this.#r||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.#I())}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#S())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#v(){const{parentRotation:e,parentDimensions:[t,i]}=this;switch(e){case 90:return[0,i,i,t];case 180:return[t,i,t,i];case 270:return[t,0,i,t];default:return[0,0,t,i]}}#m(){const{ctx:e,color:t,opacity:i,thickness:r,parentScale:s,scaleFactor:o}=this;e.lineWidth=r*s/o,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${function i4(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}(i)}`}#y(e,t){this.canvas.addEventListener("contextmenu",Ln,{signal:this._uiManager._signal}),this.#S(),this.#s=new AbortController;const i=this._uiManager.combinedSignal(this.#s);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:i}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:i}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:i}),this.isEditing=!0,this.#c||(this.#c=!0,this.#_(),this.thickness||=Nt._defaultThickness,this.color||=Nt._defaultColor||X._defaultLineColor,this.opacity??=Nt._defaultOpacity),this.currentPath.push([e,t]),this.#l=!1,this.#m(),this.#h=()=>{this.#E(),this.#h&&window.requestAnimationFrame(this.#h)},window.requestAnimationFrame(this.#h)}#b(e,t){const[i,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===i&&t===r)return;const s=this.currentPath;let o=this.#i;if(s.push([e,t]),this.#l=!0,s.length<=2)return o.moveTo(...s[0]),void o.lineTo(e,t);3===s.length&&(this.#i=o=new Path2D,o.moveTo(...s[0])),this.#T(o,...s.at(-3),...s.at(-2),e,t)}#C(){if(0===this.currentPath.length)return;const e=this.currentPath.at(-1);this.#i.lineTo(...e)}#w(e,t){let i;if(this.#h=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#b(e,t),this.#C(),1!==this.currentPath.length)i=this.#M();else{const l=[e,t];i=[[l,l.slice(),l.slice(),l]]}const r=this.#i,s=this.currentPath;this.currentPath=[],this.#i=new Path2D,this.addCommands({cmd:()=>{this.allRawPaths.push(s),this.paths.push(i),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#N(),this.#D()),this.#k())},mustExec:!0})}#E(){if(!this.#l)return;this.#l=!1;Math.ceil(this.thickness*this.parentScale);const t=this.currentPath.slice(-3),i=t.map(u=>u[0]),r=t.map(u=>u[1]),{ctx:c}=(Math.min(...i),Math.max(...i),Math.min(...r),Math.max(...r),this);c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(const u of this.bezierPath2D)c.stroke(u);c.stroke(this.#i),c.restore()}#T(e,t,i,r,s,o,a){const l=(t+r)/2,c=(i+s)/2,u=(r+o)/2,d=(s+a)/2;e.bezierCurveTo(l+2*(r-l)/3,c+2*(s-c)/3,u+2*(r-u)/3,d+2*(s-d)/3,u,d)}#M(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let i,[r,s]=e[0];for(i=1;i<e.length-2;i++){const[h,f]=e[i],[p,g]=e[i+1],v=(h+p)/2,m=(f+g)/2;t.push([[r,s],[r+2*(h-r)/3,s+2*(f-s)/3],[v+2*(h-v)/3,m+2*(f-m)/3],[v,m]]),[r,s]=[v,m]}const[o,a]=e[i],[l,c]=e[i+1];return t.push([[r,s],[r+2*(o-r)/3,s+2*(a-s)/3],[l+2*(o-l)/3,c+2*(a-c)/3],[l,c]]),t}#A(){if(this.isEmpty())return void this.#R();this.#m();const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#R();for(const i of this.bezierPath2D)t.stroke(i)}commit(){this.#r||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#r=!0,this.div.classList.add("disabled"),this.#k(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}#I(){if(this.#a)return;this.#a=new AbortController;const e=this._uiManager.combinedSignal(this.#a);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})}#S(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(e){0!==e.button||!this.isInEditMode()||this.#r||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#y(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#b(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#P(e)}canvasPointerleave(e){this.#P(e)}#P(e){this.#s?.abort(),this.#s=null,this.#I(),this.#n&&clearTimeout(this.#n),this.#n=setTimeout(()=>{this.#n=null,this.canvas.removeEventListener("contextmenu",Ln)},10),this.#w(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#N(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#D(){this.#u=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}),this.#u.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#u?.disconnect(),this.#u=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#r}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[i,r,s,o]=this.#v();if(this.setAt(i,r,0,0),this.setDims(s,o),this.#N(),this.width){const[a,l]=this.parentDimensions;this.setAspectRatio(this.width*a,this.height*l),this.setAt(e*a,t*l,this.width*a,this.height*l),this.#c=!0,this.#_(),this.setDims(this.width*a,this.height*l),this.#A(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#D(),this.div}#_(){if(!this.#c)return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#R()}setDimensions(e,t){const i=Math.round(e),r=Math.round(t);if(this.#d===i&&this.#o===r)return;this.#d=i,this.#o=r,this.canvas.style.visibility="hidden";const[s,o]=this.parentDimensions;this.width=e/s,this.height=t/o,this.fixAndSetPosition(),this.#r&&this.#x(e,t),this.#_(),this.#A(),this.canvas.style.visibility="visible",this.fixDims()}#x(e,t){const i=this.#B(),r=(e-i)/this.#t,s=(t-i)/this.#e;this.scaleFactor=Math.min(r,s)}#R(){const e=this.#B()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#L(e){const t=new Path2D;for(let i=0,r=e.length;i<r;i++){const[s,o,a,l]=e[i];0===i&&t.moveTo(...s),t.bezierCurveTo(o[0],o[1],a[0],a[1],l[0],l[1])}return t}static#H(e,t,i){const[r,s,o,a]=t;switch(i){case 0:for(let l=0,c=e.length;l<c;l+=2)e[l]+=r,e[l+1]=a-e[l+1];break;case 90:for(let l=0,c=e.length;l<c;l+=2){const u=e[l];e[l]=e[l+1]+r,e[l+1]=u+s}break;case 180:for(let l=0,c=e.length;l<c;l+=2)e[l]=o-e[l],e[l+1]+=s;break;case 270:for(let l=0,c=e.length;l<c;l+=2){const u=e[l];e[l]=o-e[l+1],e[l+1]=a-u}break;default:throw new Error("Invalid rotation")}return e}static#j(e,t,i){const[r,s,o,a]=t;switch(i){case 0:for(let l=0,c=e.length;l<c;l+=2)e[l]-=r,e[l+1]=a-e[l+1];break;case 90:for(let l=0,c=e.length;l<c;l+=2){const u=e[l];e[l]=e[l+1]-s,e[l+1]=u-r}break;case 180:for(let l=0,c=e.length;l<c;l+=2)e[l]=o-e[l],e[l+1]-=s;break;case 270:for(let l=0,c=e.length;l<c;l+=2){const u=e[l];e[l]=a-e[l+1],e[l+1]=o-u}break;default:throw new Error("Invalid rotation")}return e}#F(e,t,i,r){const s=[],o=this.thickness/2,a=e*t+o,l=e*i+o;for(const c of this.paths){const u=[],d=[];for(let h=0,f=c.length;h<f;h++){const[p,g,v,m]=c[h];if(p[0]===m[0]&&p[1]===m[1]&&1===f){const D=e*p[0]+a,k=e*p[1]+l;u.push(D,k),d.push(D,k);break}const y=e*p[0]+a,_=e*p[1]+l,b=e*g[0]+a,w=e*g[1]+l,A=e*v[0]+a,x=e*v[1]+l,T=e*m[0]+a,E=e*m[1]+l;0===h&&(u.push(y,_),d.push(y,_)),u.push(b,w,A,x,T,E),d.push(b,w),h===f-1&&d.push(T,E)}s.push({bezier:Nt.#H(u,r,this.rotation),points:Nt.#H(d,r,this.rotation)})}return s}#V(){let e=1/0,t=-1/0,i=1/0,r=-1/0;for(const s of this.paths)for(const[o,a,l,c]of s){const u=L.bezierBoundingBox(...o,...a,...l,...c);e=Math.min(e,u[0]),i=Math.min(i,u[1]),t=Math.max(t,u[2]),r=Math.max(r,u[3])}return[e,i,t,r]}#B(){return this.#r?Math.ceil(this.thickness*this.parentScale):0}#k(e=!1){if(this.isEmpty())return;if(!this.#r)return void this.#A();const t=this.#V(),i=this.#B();this.#t=Math.max(X.MIN_SIZE,t[2]-t[0]),this.#e=Math.max(X.MIN_SIZE,t[3]-t[1]);const r=Math.ceil(i+this.#t*this.scaleFactor),s=Math.ceil(i+this.#e*this.scaleFactor),[o,a]=this.parentDimensions;this.width=r/o,this.height=s/a,this.setAspectRatio(r,s);const l=this.translationX,c=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#_(),this.#A(),this.#d=r,this.#o=s,this.setDims(r,s);const u=e?i/this.scaleFactor/2:0;this.translate(l-this.translationX-u,c-this.translationY-u)}static deserialize(e,t,i){var r=()=>super.deserialize,s=this;return S(function*(){if(e instanceof c_)return null;const o=yield r().call(s,e,t,i);o.thickness=e.thickness,o.color=L.makeHexColor(...e.color),o.opacity=e.opacity;const[a,l]=o.pageDimensions,c=o.width*a,u=o.height*l,d=o.parentScale,h=e.thickness/2;o.#r=!0,o.#d=Math.round(c),o.#o=Math.round(u);const{paths:f,rect:p,rotation:g}=e;for(let{bezier:m}of f){m=Nt.#j(m,p,g);const y=[];o.paths.push(y);let _=d*(m[0]-h),b=d*(m[1]-h);for(let A=2,x=m.length;A<x;A+=6){const ue=d*(m[A+4]-h),ce=d*(m[A+5]-h);y.push([[_,b],[d*(m[A]-h),d*(m[A+1]-h)],[d*(m[A+2]-h),d*(m[A+3]-h)],[ue,ce]]),_=ue,b=ce}const w=s.#L(y);o.bezierPath2D.push(w)}const v=o.#V();return o.#t=Math.max(X.MIN_SIZE,v[2]-v[0]),o.#e=Math.max(X.MIN_SIZE,v[3]-v[1]),o.#x(c,u),o})()}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=X._colorManager.convert(this.ctx.strokeStyle);return{annotationType:ne.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#F(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class d_ extends X{#e=null;#t=null;#n=null;#i=null;#r=null;#s="";#l=null;#c=null;#u=null;#a=!1;#d=!1;static _type="stamp";static _editorType=ne.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#i=e.bitmapUrl,this.#r=e.bitmapFile}static initialize(e,t){X.initialize(e,t)}static get supportedTypes(){return fe(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return fe(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(ne.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#o(e,t=!1){e?(this.#e=e.bitmap,t||(this.#t=e.id,this.#a=e.isSvg),e.file&&(this.#s=e.file.name),this.#f()):this.remove()}#h(){if(this.#n=null,this._uiManager.enableWaiting(!1),this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e)return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(){var e=this;return S(function*(t=null,i=!0){if(e.hasAltTextData())return null;const{mlManager:r}=e._uiManager;if(!r)throw new Error("No ML.");if(!(yield r.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");const{data:s,width:o,height:a}=t||e.copyCanvas(null,null,!0).imageData,l=yield r.guess({name:"altText",request:{data:s,width:o,height:a,channels:s.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return yield e.setGuessedAltText(c),i&&!e.hasAltTextData()&&(e.altTextData={alt:c,decorative:!1}),c}).apply(this,arguments)}#p(){var e=this;if(this.#t)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#o(r,!0)).finally(()=>this.#h());if(this.#i){const r=this.#i;return this.#i=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromUrl(r).then(s=>this.#o(s)).finally(()=>this.#h()))}if(this.#r){const r=this.#r;return this.#r=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromFile(r).then(s=>this.#o(s)).finally(()=>this.#h()))}const t=document.createElement("input");t.type="file",t.accept=d_.supportedTypesStr;const i=this._uiManager._signal;this.#n=new Promise(r=>{t.addEventListener("change",S(function*(){if(t.files&&0!==t.files.length){e._uiManager.enableWaiting(!0);const s=yield e._uiManager.imageManager.getFromFile(t.files[0]);e._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:e._uiManager.useNewAltTextFlow}}),e.#o(s)}else e.remove();r()}),{signal:i}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>this.#h()),t.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#c?.disconnect(),this.#c=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#t&&null===this.#l&&this.#p(),this.isAttachedToDOM||this.parent.add(this))):this.#t&&this.#p()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#r||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#f():this.#p(),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(e*i,t*r,this.width*i,this.height*r)}return this.div}#f(){const{div:e}=this;let{width:t,height:i}=this.#e;const[r,s]=this.pageDimensions,o=.75;if(this.width)t=this.width*r,i=this.height*s;else if(t>o*r||i>o*s){const u=Math.min(o*r/t,o*s/i);t*=u,i*=u}const[a,l]=this.parentDimensions;this.setDims(t*a/r,i*l/s),this._uiManager.enableWaiting(!1);const c=this.#l=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(t,i),this.#b(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&c.setAttribute("aria-label",this.#s)}copyCanvas(e,t,i=!1){e||(e=224);const{width:r,height:s}=this.#e,o=new zy;let a=this.#e,l=r,c=s,u=null;if(t){if(r>t||s>t){const A=Math.min(t/r,t/s);l=Math.floor(r*A),c=Math.floor(s*A)}u=document.createElement("canvas");const h=u.width=Math.ceil(l*o.sx),f=u.height=Math.ceil(c*o.sy);this.#a||(a=this.#v(h,f));const p=u.getContext("2d");p.filter=this._uiManager.hcmFilter;let g="white",v="#cfcfd8";"none"!==this._uiManager.hcmFilter?v="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",v="#42414d");const m=15,y=m*o.sx,_=m*o.sy,b=new OffscreenCanvas(2*y,2*_),w=b.getContext("2d");w.fillStyle=g,w.fillRect(0,0,2*y,2*_),w.fillStyle=v,w.fillRect(0,0,y,_),w.fillRect(y,_,y,_),p.fillStyle=p.createPattern(b,"repeat"),p.fillRect(0,0,h,f),p.drawImage(a,0,0,a.width,a.height,0,0,h,f)}let d=null;if(i){let h,f;if(o.symmetric&&a.width<e&&a.height<e)h=a.width,f=a.height;else if(a=this.#e,r>e||s>e){const v=Math.min(e/r,e/s);h=Math.floor(r*v),f=Math.floor(s*v),this.#a||(a=this.#v(h,f))}const g=new OffscreenCanvas(h,f).getContext("2d",{willReadFrequently:!0});g.drawImage(a,0,0,a.width,a.height,0,0,h,f),d={width:h,height:f,data:g.getImageData(0,0,h,f).data}}return{canvas:u,width:l,height:c,imageData:d}}#g(e,t){const[i,r]=this.parentDimensions;this.width=e/i,this.height=t/r,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#u&&clearTimeout(this.#u),this.#u=setTimeout(()=>{this.#u=null,this.#m(e,t)},200)}#v(e,t){const{width:i,height:r}=this.#e;let s=i,o=r,a=this.#e;for(;s>2*e||o>2*t;){const l=s,c=o;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const u=new OffscreenCanvas(s,o);u.getContext("2d").drawImage(a,0,0,l,c,0,0,s,o),a=u.transferToImageBitmap()}return a}#m(e,t){const i=new zy,r=Math.ceil(e*i.sx),s=Math.ceil(t*i.sy),o=this.#l;if(!o||o.width===r&&o.height===s)return;o.width=r,o.height=s;const a=this.#a?this.#e:this.#v(r,s),l=o.getContext("2d");l.filter=this._uiManager.hcmFilter,l.drawImage(a,0,0,a.width,a.height,0,0,r,s)}getImageForAltText(){return this.#l}#y(e){if(e){if(this.#a){const r=this._uiManager.imageManager.getSvgUrl(this.#t);if(r)return r}const t=document.createElement("canvas");return({width:t.width,height:t.height}=this.#e),t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#a){const[t,i]=this.pageDimensions,r=Math.round(this.width*t*ra.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*ra.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,s);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,r,s),o.transferToImageBitmap()}return structuredClone(this.#e)}#b(){this._uiManager._signal&&(this.#c=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.#g(t.width,t.height)}),this.#c.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#c?.disconnect(),this.#c=null},{once:!0}))}static deserialize(e,t,i){var r=()=>super.deserialize,s=this;return S(function*(){let o=null;if(e instanceof uP){const{data:{rect:v,rotation:m,id:y,structParent:_,popupRef:b},container:w,parent:{page:{pageNumber:A}}}=e,x=w.querySelector("canvas"),T=i.imageManager.getFromCanvas(w.id,x);x.remove();const E=(yield t._structTree.getAriaAttributes(`${By}${y}`))?.get("aria-label")||"";o=e={annotationType:ne.STAMP,bitmapId:T.id,bitmap:T.bitmap,pageIndex:A-1,rect:v.slice(0),rotation:m,id:y,deleted:!1,accessibilityData:{decorative:!1,altText:E},isSvg:!1,structParent:_,popupRef:b}}const a=yield r().call(s,e,t,i),{rect:l,bitmap:c,bitmapUrl:u,bitmapId:d,isSvg:h,accessibilityData:f}=e;d&&i.imageManager.isValidId(d)?(a.#t=d,c&&(a.#e=c)):a.#i=u,a.#a=h;const[p,g]=a.pageDimensions;return a.width=(l[2]-l[0])/p,a.height=(l[3]-l[1])/g,a.annotationElementId=e.id||null,f&&(a.altTextData=f),a._initialData=o,a.#d=!!o,a})()}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:ne.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#a,structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:s}=this.serializeAltText(!1);if(!r&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const a=this.#C(i);if(a.isSame)return null;a.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,null===t)return i;t.stamps||=new Map;const o=this.#a?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(t.stamps.has(this.#t)){if(this.#a){const a=t.stamps.get(this.#t);o>a.area&&(a.area=o,a.serialized.bitmap.close(),a.serialized.bitmap=this.#y(!1))}}else t.stamps.set(this.#t,{area:o,serialized:i}),i.bitmap=this.#y(!1);return i}#C(e){const{rect:t,pageIndex:i,accessibilityData:{altText:r}}=this._initialData,s=e.rect.every((l,c)=>Math.abs(l-t[c])<1),o=e.pageIndex===i,a=(e.accessibilityData?.alt||"")===r;return{isSame:s&&o&&a,isSameAltText:a}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}let L5=(()=>{class n{#e;#t=!1;#n=null;#i=null;#r=null;#s=new Map;#l=!1;#c=!1;#u=!1;#a=null;#d=null;#o;static _initialized=!1;static#h=new Map([wt,Nt,d_,st].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:r,structTreeLayer:s,accessibilityManager:o,annotationLayer:a,drawLayer:l,textLayer:c,viewport:u,l10n:d}){const h=[...n.#h.values()];if(!n._initialized){n._initialized=!0;for(const f of h)f.initialize(d,t)}t.registerEditorTypes(h),this.#o=t,this.pageIndex=i,this.div=r,this.#e=o,this.#n=a,this.viewport=u,this.#a=c,this.drawLayer=l,this._structTree=s,this.#o.addLayer(this)}get isEmpty(){return 0===this.#s.size}get isInvisible(){return this.isEmpty&&this.#o.getMode()===ne.NONE}updateToolbar(t){this.#o.updateToolbar(t)}updateMode(t=this.#o.getMode()){switch(this.#m(),t){case ne.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case ne.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case ne.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;for(const r of n.#h.values())i.toggle(`${r._type}Editing`,t===r._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#a?.div}addInkEditorIfNeeded(t){if(this.#o.getMode()===ne.INK){if(!t)for(const r of this.#s.values())if(r.isEmpty())return void r.setInBackground();this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(t){this.#o.setEditingState(t)}addCommands(t){this.#o.addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}enable(){var t=this;return S(function*(){t.div.tabIndex=0,t.togglePointerEvents(!0);const i=new Set;for(const s of t.#s.values())s.enableEditing(),s.show(!0),s.annotationElementId&&(t.#o.removeChangedExistingAnnotation(s),i.add(s.annotationElementId));if(!t.#n)return;const r=t.#n.getEditableAnnotations();for(const s of r){if(s.hide(),t.#o.isDeletedAnnotationElement(s.data.id)||i.has(s.data.id))continue;const o=yield t.deserialize(s);o&&(t.addOrRebuild(o),o.enableEditing())}})()}disable(){this.#u=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,i=new Map;for(const s of this.#s.values())if(s.disableEditing(),s.annotationElementId){if(null!==s.serialize()){t.set(s.annotationElementId,s);continue}i.set(s.annotationElementId,s),this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#n){const s=this.#n.getEditableAnnotations();for(const o of s){const{id:a}=o.data;if(this.#o.isDeletedAnnotationElement(a))continue;let l=i.get(a);l?(l.resetAnnotationElement(o),l.show(!1),o.show()):(l=t.get(a),l&&(this.#o.addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show())}}this.#m(),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const s of n.#h.values())r.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#u=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#o.getActive()!==t&&this.#o.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#a?.div&&!this.#d){this.#d=new AbortController;const t=this.#o.combinedSignal(this.#d);this.#a.div.addEventListener("pointerdown",this.#p.bind(this),{signal:t}),this.#a.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#a?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#a.div.classList.remove("highlighting"))}#p(t){this.#o.unselectAll();const{target:i}=t;if(i===this.#a.div||("img"===i.getAttribute("role")||i.classList.contains("endOfContent"))&&this.#a.div.contains(i)){const{isMac:r}=Jt.platform;if(0!==t.button||t.ctrlKey&&r)return;this.#o.showAllEditors("highlight",!0,!0),this.#a.div.classList.add("free"),this.toggleDrawing(),st.startHighlighting(this,"ltr"===this.#o.direction,{target:this.#a.div,x:t.x,y:t.y}),this.#a.div.addEventListener("pointerup",()=>{this.#a.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#o._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#o.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:i}=t;i&&this.#o.isDeletedAnnotationElement(i)&&this.#o.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#e?.removePointerInTextLayer(t.contentDiv),!this.#u&&t.annotationElementId&&this.#o.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#o.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#o.addDeletedAnnotationElement(t.annotationElementId),X.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(t.parent!==this||!t.isAttachedToDOM){if(this.changeParent(t),this.#o.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#o.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#o._signal}),i.focus())},0)),t._structTreeParentId=this.#e?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getNextId(){return this.#o.getId()}get#f(){return n.#h.get(this.#o.getMode())}combinedSignal(t){return this.#o.combinedSignal(t)}#g(t){const i=this.#f;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(t,i){this.#o.updateToolbar(t),this.#o.updateMode(t);const{offsetX:r,offsetY:s}=this.#v(),o=this.getNextId(),a=this.#g({parent:this,id:o,x:r,y:s,uiManager:this.#o,isCentered:!0,...i});a&&this.add(a)}deserialize(t){var i=this;return S(function*(){return(yield n.#h.get(t.annotationType??t.annotationEditorType)?.deserialize(t,i,i.#o))||null})()}createAndAddNewEditor(t,i,r={}){const s=this.getNextId(),o=this.#g({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#o,isCentered:i,...r});return o&&this.add(o),o}#v(){const{x:t,y:i,width:r,height:s}=this.div.getBoundingClientRect(),o=Math.max(0,t),a=Math.max(0,i),u=(o+Math.min(window.innerWidth,t+r))/2-t,d=(a+Math.min(window.innerHeight,i+s))/2-i,[h,f]=this.viewport.rotation%180==0?[u,d]:[d,u];return{offsetX:h,offsetY:f}}addNewEditor(){this.createAndAddNewEditor(this.#v(),!0)}setSelected(t){this.#o.setSelected(t)}toggleSelected(t){this.#o.toggleSelected(t)}unselect(t){this.#o.unselect(t)}pointerup(t){const{isMac:i}=Jt.platform;if(!(0!==t.button||t.ctrlKey&&i)&&t.target===this.div&&this.#l){if(this.#l=!1,!this.#t)return void(this.#t=!0);if(this.#o.getMode()===ne.STAMP)return void this.#o.unselectAll();this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(this.#o.getMode()===ne.HIGHLIGHT&&this.enableTextSelection(),this.#l)return void(this.#l=!1);const{isMac:i}=Jt.platform;if(0!==t.button||t.ctrlKey&&i||t.target!==this.div)return;this.#l=!0;const r=this.#o.getActive();this.#t=!r||r.isEmpty()}findNewParent(t,i,r){const s=this.#o.findParent(i,r);return null!==s&&s!==this&&(s.changeParent(t),!0)}destroy(){this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#e?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#o.removeLayer(this)}#m(){this.#c=!0;for(const t of this.#s.values())t.isEmpty()&&t.remove();this.#c=!1}render({viewport:t}){this.viewport=t,Is(this.div,t);for(const i of this.#o.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#o.commitOrRemove(),this.#m();const i=this.viewport.rotation,r=t.rotation;if(this.viewport=t,Is(this.div,{rotation:r}),i!==r)for(const s of this.#s.values())s.rotate(r);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#o.viewParameters.realScale}}return n})();class Ht{#e=null;#t=0;#n=new Map;#i=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(this.#e){if(this.#e!==e){if(this.#n.size>0)for(const t of this.#n.values())t.remove(),e.append(t);this.#e=e}}else this.#e=e}static get _svgFactory(){return fe(this,"_svgFactory",new a_)}static#r(e,{x:t=0,y:i=0,width:r=1,height:s=1}={}){const{style:o}=e;o.top=100*i+"%",o.left=100*t+"%",o.width=100*r+"%",o.height=100*s+"%"}#s(e){const t=Ht._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute("aria-hidden",!0),Ht.#r(t,e),t}#l(e,t){const i=Ht._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${t}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const s=Ht._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r}draw(e,t,i,r=!1){const s=this.#t++,o=this.#s(e.box);o.classList.add(...e.classNamesForDrawing);const a=Ht._svgFactory.createElement("defs");o.append(a);const l=Ht._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("d",e.toSVGPath()),r&&this.#i.set(s,l);const u=this.#l(a,c),d=Ht._svgFactory.createElement("use");return o.append(d),o.setAttribute("fill",t),o.setAttribute("fill-opacity",i),d.setAttribute("href",`#${c}`),this.#n.set(s,o),{id:s,clipPathId:`url(#${u})`}}drawOutline(e){const t=this.#t++,i=this.#s(e.box);i.classList.add(...e.classNamesForOutlining);const r=Ht._svgFactory.createElement("defs");i.append(r);const s=Ht._svgFactory.createElement("path");r.append(s);const o=`path_p${this.pageIndex}_${t}`;let a;if(s.setAttribute("id",o),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke"),e.mustRemoveSelfIntersections){const u=Ht._svgFactory.createElement("mask");r.append(u),a=`mask_p${this.pageIndex}_${t}`,u.setAttribute("id",a),u.setAttribute("maskUnits","objectBoundingBox");const d=Ht._svgFactory.createElement("rect");u.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const h=Ht._svgFactory.createElement("use");u.append(h),h.setAttribute("href",`#${o}`),h.setAttribute("stroke","none"),h.setAttribute("fill","black"),h.setAttribute("fill-rule","nonzero"),h.classList.add("mask")}const l=Ht._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${o}`),a&&l.setAttribute("mask",`url(#${a})`);const c=l.cloneNode();return i.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.#n.set(t,i),t}finalizeLine(e,t){const i=this.#i.get(e);this.#i.delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){this.#n.get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){this.#i.get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){Ht.#r(this.#n.get(e),t)}show(e,t){this.#n.get(e).classList.toggle("hidden",!t)}rotate(e,t){this.#n.get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){this.#n.get(e).setAttribute("fill",t)}changeOpacity(e,t){this.#n.get(e).setAttribute("fill-opacity",t)}addClass(e,t){this.#n.get(e).classList.add(t)}removeClass(e,t){this.#n.get(e).classList.remove(t)}getSVGRoot(e){return this.#n.get(e)}remove(e){this.#i.delete(e),null!==this.#e&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(const e of this.#n.values())e.remove();this.#n.clear(),this.#i.clear()}}var V5=Q.AbortException,B5=Q.AnnotationEditorLayer,j5=Q.AnnotationEditorParamsType,pP=Q.AnnotationEditorType,H5=Q.AnnotationEditorUIManager,U5=Q.AnnotationLayer,$5=Q.AnnotationMode,z5=Q.ColorPicker,W5=Q.DOMSVGFactory,G5=Q.DrawLayer,q5=Q.FeatureTest,gP=Q.GlobalWorkerOptions,Y5=Q.ImageKind,K5=Q.InvalidPDFException,X5=Q.MissingPDFException,Q5=Q.OPS,Z5=Q.OutputScale,J5=Q.PDFDataRangeTransport,e6=Q.PDFDateString,t6=Q.PDFWorker,n6=Q.PasswordResponses,i6=Q.PermissionFlag,r6=Q.PixelsPerInch,s6=Q.RenderingCancelledException,o6=Q.TextLayer,a6=Q.UnexpectedResponseException,l6=Q.Util,mP=Q.VerbosityLevel,c6=Q.XfaLayer,u6=Q.build,d6=Q.createValidAbsoluteUrl,h6=Q.fetchData,vP=Q.getDocument,f6=Q.getFilenameFromUrl,p6=Q.getPdfFilenameFromUrl,g6=Q.getXfaPageViewport,m6=Q.isDataScheme,v6=Q.isPdfFile,y6=Q.noContextMenu,_6=Q.normalizeUnicode,b6=Q.setLayerDimensions,w6=Q.shadow,kh=Q.version;function yP(n,e){this.v=n,this.k=e}function _P(n){return new yP(n,0)}function bP(n){return function(){return new mc(n.apply(this,arguments))}}function mc(n){var e,t;function i(s,o){try{var a=n[s](o),l=a.value,c=l instanceof yP;Promise.resolve(c?l.v:l).then(function(u){if(c){var d="return"===s?"return":"next";if(!l.k||u.done)return i(d,u);u=n[d](u).value}r(a.done?"return":"normal",u)},function(u){i("throw",u)})}catch(u){r("throw",u)}}function r(s,o){switch(s){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(s,o){return new Promise(function(a,l){var c={key:s,arg:o,resolve:a,reject:l,next:null};t?t=t.next=c:(e=t=c,i(s,o))})},"function"!=typeof n.return&&(this.return=void 0)}function Oh(n){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var i=t.done;return Promise.resolve(t.value).then(function(r){return{value:r,done:i}})}return(Oh=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new Oh(n)}mc.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},mc.prototype.next=function(n){return this._invoke("next",n)},mc.prototype.throw=function(n){return this._invoke("throw",n)},mc.prototype.return=function(n){return this._invoke("return",n)};var vc={d:(n,e)=>{for(var t in e)vc.o(e,t)&&!vc.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e)},Ye=globalThis.pdfjsViewer={};vc.d(Ye,{AnnotationLayerBuilder:()=>VP,DownloadManager:()=>y9,EventBus:()=>b_,FindState:()=>Or,GenericL10n:()=>or,LinkTarget:()=>Rs,PDFFindController:()=>r9,PDFHistory:()=>hY,PDFLinkService:()=>jh,PDFPageView:()=>cR,PDFScriptingManager:()=>DY,PDFSinglePageViewer:()=>xY,PDFViewer:()=>hR,ProgressBar:()=>O6,RenderingStates:()=>tt,ScrollMode:()=>ge,SimpleLinkService:()=>m_,SpreadMode:()=>Ut,StructTreeLayerBuilder:()=>aR,TextLayerBuilder:()=>da,XfaLayerBuilder:()=>lR,parseQueryString:()=>Fh});const tt={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},ge={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},Ut={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};function DP(n,e,t=!1){let i=n.offsetParent;if(!i)return void console.error("offsetParent is not set -- cannot scroll");let r=n.offsetTop+n.clientTop,s=n.offsetLeft+n.clientLeft;for(;i.clientHeight===i.scrollHeight&&i.clientWidth===i.scrollWidth||t&&(i.classList.contains("markedContent")||"hidden"===getComputedStyle(i).overflow);)if(r+=i.offsetTop,s+=i.offsetLeft,i=i.offsetParent,!i)return;e&&(void 0!==e.top&&(r+=e.top),void 0!==e.left&&(s+=e.left,i.scrollLeft=s)),i.scrollTop=r}function Fh(n){const e=new Map;for(const[t,i]of new URLSearchParams(n))e.set(t.toLowerCase(),i);return e}const SP=/[\x00-\x1F]/g;function yc(n,e=!1){return SP.test(n)?e?n.replaceAll(SP,t=>"\0"===t?"":" "):n.replaceAll("\0",""):n}function _c(n,e,t=0){let i=t,r=n.length-1;if(r<0||!e(n[r]))return n.length;if(e(n[i]))return i;for(;i<r;){const s=i+r>>1;e(n[s])?r=s:i=s+1}return i}function MP(n){if(Math.floor(n)===n)return[n,1];const e=1/n;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];const i=n>1?e:n;let l,r=0,s=1,o=1,a=1;for(;;){const c=r+o,u=s+a;if(u>8)break;i<=c/u?(o=c,a=u):(r=c,s=u)}return l=i-r/s<o/a-i?i===n?[r,s]:[s,r]:i===n?[o,a]:[a,o],l}function Lh(n,e){return n-n%e}function IP(n){return Number.isInteger(n)&&n%90==0}function xP(n){return n.width<=n.height}new Promise(function(n){window.requestAnimationFrame(n)});const N6=document.documentElement.style;class O6{#e=null;#t=null;#n=0;#i=null;#r=!0;constructor(e){this.#e=e.classList,this.#i=e.style}get percent(){return this.#n}set percent(e){this.#n=function k6(n,e,t){return Math.min(Math.max(n,e),t)}(e,0,100),isNaN(e)?this.#e.add("indeterminate"):(this.#e.remove("indeterminate"),this.#i.setProperty("--progressBar-percent",`${this.#n}%`))}setWidth(e){if(!e)return;const i=e.parentNode.offsetWidth-e.offsetWidth;i>0&&this.#i.setProperty("--progressBar-end-offset",`${i}px`)}setDisableAutoFetch(e=5e3){100===this.#n||isNaN(this.#n)||(this.#t&&clearTimeout(this.#t),this.show(),this.#t=setTimeout(()=>{this.#t=null,this.hide()},e))}hide(){this.#r&&(this.#r=!1,this.#e.add("hidden"))}show(){this.#r||(this.#r=!0,this.#e.remove("hidden"))}}const Vh=function(){const n=document.createElement("div");return n.style.width="round(down, calc(1.6666666666666665 * 792px), 1px)","calc(1320px)"===n.style.width?Math.fround:e=>e}();function Bh(n){return function L6(n){return n<11904}(n)?function V6(n){return!(65408&n)}(n)?function H6(n){return 32===n||9===n||13===n||10===n}(n)?0:function B6(n){return n>=97&&n<=122||n>=65&&n<=90}(n)||function j6(n){return n>=48&&n<=57}(n)||95===n?1:2:function G6(n){return 3584==(65408&n)}(n)?7:160===n?0:1:function U6(n){return n>=13312&&n<=40959||n>=63744&&n<=64255}(n)?3:function $6(n){return n>=12448&&n<=12543}(n)?4:function z6(n){return n>=12352&&n<=12447}(n)?5:function W6(n){return n>=65376&&n<=65439}(n)?6:1}let TP;const Or={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},PP={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},RP=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let NP;const Q6=new RegExp("\\p{M}+","gu"),Z6=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),J6=new RegExp("([^\\p{M}])\\p{M}*$","u"),e9=new RegExp("^\\p{M}*([^\\p{M}])","u"),t9=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,kP=new Map,OP=new Map;let f_=null,p_=null;function g_(n){const e=[];let t,i;for(;null!==(t=t9.exec(n));){let{index:f}=t;for(const p of t[0]){let g=kP.get(p);g||(g=p.normalize("NFD").length,kP.set(p,g)),e.push([g,f++])}}if(0===e.length&&f_)i=f_;else if(e.length>0&&p_)i=p_;else{const y=`([${Object.keys(PP).join("")}])|([${function q6(){return TP||="\xa0\xa8\xaa\xaf\xb2-\xb5\xb8-\xba\xbc-\xbe\u0132-\u0133\u013f-\u0140\u0149\u017f\u01c4-\u01cc\u01f1-\u01f3\u02b0-\u02b8\u02d8-\u02dd\u02e0-\u02e4\u0374\u037a\u037e\u0384-\u0385\u0387\u03d0-\u03d6\u03f0-\u03f2\u03f4-\u03f5\u03f9\u0587\u0675-\u0678\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e33\u0eb3\u0edc-\u0edd\u0f0c\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u10fc\u1d2c-\u1d2e\u1d30-\u1d3a\u1d3c-\u1d4d\u1d4f-\u1d6a\u1d78\u1d9b-\u1dbf\u1e9a-\u1e9b\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbd-\u1fc1\u1fc9\u1fcb\u1fcd-\u1fcf\u1fd3\u1fdb\u1fdd-\u1fdf\u1fe3\u1feb\u1fed-\u1fef\u1ff9\u1ffb\u1ffd-\u1ffe\u2000-\u200a\u2011\u2017\u2024-\u2026\u202f\u2033-\u2034\u2036-\u2037\u203c\u203e\u2047-\u2049\u2057\u205f\u2070-\u2071\u2074-\u208e\u2090-\u209c\u20a8\u2100-\u2103\u2105-\u2107\u2109-\u2113\u2115-\u2116\u2119-\u211d\u2120-\u2122\u2124\u2126\u2128\u212a-\u212d\u212f-\u2131\u2133-\u2139\u213b-\u2140\u2145-\u2149\u2150-\u217f\u2189\u222c-\u222d\u222f-\u2230\u2329-\u232a\u2460-\u24ea\u2a0c\u2a74-\u2a76\u2adc\u2c7c-\u2c7d\u2d6f\u2e9f\u2ef3\u2f00-\u2fd5\u3000\u3036\u3038-\u303a\u309b-\u309c\u309f\u30ff\u3131-\u318e\u3192-\u319f\u3200-\u321e\u3220-\u3247\u3250-\u327e\u3280-\u33ff\ua69c-\ua69d\ua770\ua7f2-\ua7f4\ua7f8-\ua7f9\uab5c-\uab5f\uab69\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfc\ufe10-\ufe19\ufe30-\ufe44\ufe47-\ufe52\ufe54-\ufe66\ufe68-\ufe6b\ufe70-\ufe72\ufe74\ufe76-\ufefc\uff01-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\uffe0-\uffe6",TP}()}])|((?:\u3099|\u309a)\\n)|(\\p{M}+(?:-\\n)?)|(\\p{Ll}-\\n\\p{Lu})|(\\S-\\n)|((?:\\p{Ideographic}|[\u3040-\u30ff])\\n)|(\\n)`;i=0===e.length?f_=new RegExp(y+"|(\\u0000)","gum"):p_=new RegExp(y+"|([\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f])","gum")}const r=[];for(;null!==(t=Q6.exec(n));)r.push([t[0].length,t.index]);let s=n.normalize("NFD");const o=[[0,0]];let a=0,l=0,c=0,u=0,d=0,h=!1;return s=s.replace(i,(f,p,g,v,m,y,_,b,w,A,x)=>{if(x-=u,p){const T=PP[p],E=T.length;for(let D=1;D<E;D++)o.push([x-c+D,c-D]);return c-=E-1,T}if(g){let T=OP.get(g);T||(T=g.normalize("NFKC"),OP.set(g,T));const E=T.length;for(let D=1;D<E;D++)o.push([x-c+D,c-D]);return c-=E-1,T}if(v)return h=!0,x+d===r[a]?.[1]?++a:(o.push([x-1-c+1,c-1]),c-=1,u+=1),o.push([x-c+1,c]),u+=1,d+=1,v.charAt(0);if(m){const T=m.endsWith("\n"),E=T?m.length-2:m.length;h=!0;let D=E;x+d===r[a]?.[1]&&(D-=r[a][0],++a);for(let k=1;k<=D;k++)o.push([x-1-c+k,c-k]);return c-=D,u+=D,T?(o.push([(x+=E-1)-c+1,1+c]),c+=1,u+=1,d+=1,m.slice(0,E)):m}if(y)return o.push([x-c+3,1+c]),c+=1,u+=1,d+=1,y.replace("\n","");if(_)return o.push([x-c+(_.length-2),1+c]),c+=1,u+=1,d+=1,_.slice(0,-2);if(b)return o.push([x-c+(b.length-1),c]),u+=1,d+=1,b.slice(0,-1);if(w)return o.push([x-c+1,c-1]),c-=1,u+=1,d+=1," ";if(x+d===e[l]?.[1]){const T=e[l][0]-1;++l;for(let E=1;E<=T;E++)o.push([x-(c-E),c-E]);c-=T,u+=T}return A}),o.push([s.length,c]),[s,o,h]}class r9{#e=null;#t=!0;#n=0;constructor({linkService:e,eventBus:t,updateMatchesCountOnProgress:i=!0}){this._linkService=e,this._eventBus=t,this.#t=i,this.onIsPageVisible=null,this.#r(),t._on("find",this.#i.bind(this)),t._on("findbarclose",this.#y.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#e}setDocument(e){this._pdfDocument&&this.#r(),e&&(this._pdfDocument=e,this._firstPageCapability.resolve())}#i(e){if(!e)return;const t=this._pdfDocument,{type:i}=e;(null===this.#e||this.#l(e))&&(this._dirtyMatch=!0),this.#e=e,"highlightallchange"!==i&&this.#w(Or.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||t&&this._pdfDocument!==t)return;this.#d();const r=!this._highlightMatches,s=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),i?this._dirtyMatch?this.#p():"again"===i?(this.#p(),r&&this.#e.highlightAll&&this.#h()):"highlightallchange"===i?(s?this.#p():this._highlightMatches=!0,this.#h()):this.#p():this._findTimeout=setTimeout(()=>{this.#p(),this._findTimeout=null},250)})}scrollMatchIntoView({element:e=null,selectedLeft:t=0,pageIndex:i=-1,matchIndex:r=-1}){this._scrollMatches&&e&&-1!==r&&r===this._selected.matchIdx&&-1!==i&&i===this._selected.pageIdx&&(this._scrollMatches=!1,DP(e,{top:-50,left:t+-400},!0))}#r(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#n=0,this.#e=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=Promise.withResolvers()}get#s(){const{query:e}=this.#e;return"string"==typeof e?(e!==this._rawQuery&&(this._rawQuery=e,[this._normalizedQuery]=g_(e)),this._normalizedQuery):(e||[]).filter(t=>!!t).map(t=>g_(t)[0])}#l(e){const t=e.query,i=this.#e.query,r=typeof t;if(r!==typeof i)return!0;if("string"===r){if(t!==i)return!0}else if(JSON.stringify(t)!==JSON.stringify(i))return!0;switch(e.type){case"again":const o=this._selected.pageIdx+1,a=this._linkService;return o>=1&&o<=a.pagesCount&&o!==a.page&&!(this.onIsPageVisible?.(o)??1);case"highlightallchange":return!1}return!0}#c(e,t,i){let r=e.slice(0,t).match(J6);if(r){const s=e.charCodeAt(t),o=r[1].charCodeAt(0);if(Bh(s)===Bh(o))return!1}if(r=e.slice(t+i).match(e9),r){const s=e.charCodeAt(t+i-1),o=r[1].charCodeAt(0);if(Bh(s)===Bh(o))return!1}return!0}#u(e,t){const{matchDiacritics:i}=this.#e;let r=!1;return(e=e.replaceAll(Z6,(o,a,l,c,u,d)=>a?`[ ]*\\${a}[ ]*`:l?`[ ]*${l}[ ]*`:c?"[ ]+":i?u||d:u?RP.has(u.charCodeAt(0))?u:"":t?(r=!0,`${d}\\p{M}*`):d)).endsWith("[ ]*")&&(e=e.slice(0,e.length-4)),i&&t&&(NP||=String.fromCharCode(...RP),r=!0,e=`${e}(?=[${NP}]|[^\\p{M}]|$)`),[r,e]}#a(e){const t=this.#s;if(0===t.length)return;const r=this.match(t,this._pageContents[e],e),s=this._pageMatches[e]=[],o=this._pageMatchesLength[e]=[],a=this._pageDiffs[e];r?.forEach(({index:c,length:u})=>{const[d,h]=function i9(n,e,t){if(!n)return[e,t];const i=e,r=e+t-1;let s=_c(n,u=>u[0]>=i);n[s][0]>i&&--s;let o=_c(n,u=>u[0]>=r,s);n[o][0]>r&&--o;const a=i+n[s][1];return[a,r+n[o][1]+1-a]}(a,c,u);h&&(s.push(d),o.push(h))}),this.#e.highlightAll&&this.#o(e),this._resumePageIdx===e&&(this._resumePageIdx=null,this.#g());const l=s.length;this._matchesCountTotal+=l,this.#t?l>0&&this.#C():++this.#n===this._linkService.pagesCount&&this.#C()}match(e,t,i){const r=this._hasDiacritics[i];let s=!1;if("string"==typeof e?[s,e]=this.#u(e,r):e=e.sort().reverse().map(d=>{const[h,f]=this.#u(d,r);return s||=h,`(${f})`}).join("|"),!e)return;const{caseSensitive:o,entireWord:a}=this.#e;e=new RegExp(e,`g${s?"u":""}${o?"":"i"}`);const c=[];let u;for(;null!==(u=e.exec(t));)a&&!this.#c(t,u.index,u[0].length)||c.push({index:u.index,length:u[0].length});return c}#d(){if(this._extractTextPromises.length>0)return;let e=Promise.resolve();const t={disableNormalization:!0};for(let i=0,r=this._linkService.pagesCount;i<r;i++){const{promise:s,resolve:o}=Promise.withResolvers();this._extractTextPromises[i]=s,e=e.then(()=>this._pdfDocument.getPage(i+1).then(a=>a.getTextContent(t)).then(a=>{const l=[];for(const c of a.items)l.push(c.str),c.hasEOL&&l.push("\n");[this._pageContents[i],this._pageDiffs[i],this._hasDiacritics[i]]=g_(l.join("")),o()},a=>{console.error(`Unable to get text content for page ${i+1}`,a),this._pageContents[i]="",this._pageDiffs[i]=null,this._hasDiacritics[i]=!1,o()}))}}#o(e){this._scrollMatches&&this._selected.pageIdx===e&&(this._linkService.page=e+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}#h(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#p(){const e=this.#e.findPrevious,t=this._linkService.page-1,i=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=t,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#n=0,this._matchesCountTotal=0,this.#h();for(let o=0;o<i;o++)this._pendingFindMatches.has(o)||(this._pendingFindMatches.add(o),this._extractTextPromises[o].then(()=>{this._pendingFindMatches.delete(o),this.#a(o)}))}if(0===this.#s.length)return void this.#w(Or.FOUND);if(this._resumePageIdx)return;const s=this._offset;if(this._pagesToSearch=i,null!==s.matchIdx){if(!e&&s.matchIdx+1<this._pageMatches[s.pageIdx].length||e&&s.matchIdx>0)return s.matchIdx=e?s.matchIdx-1:s.matchIdx+1,void this.#m(!0);this.#v(e)}this.#g()}#f(e){const t=this._offset,i=e.length,r=this.#e.findPrevious;return i?(t.matchIdx=r?i-1:0,this.#m(!0),!0):(this.#v(r),!!(t.wrapped&&(t.matchIdx=null,this._pagesToSearch<0))&&(this.#m(!1),!0))}#g(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let e=null;do{const t=this._offset.pageIdx;if(e=this._pageMatches[t],!e){this._resumePageIdx=t;break}}while(!this.#f(e))}#v(e){const t=this._offset,i=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1,t.matchIdx=null,this._pagesToSearch--,(t.pageIdx>=i||t.pageIdx<0)&&(t.pageIdx=e?i-1:0,t.wrapped=!0)}#m(e=!1){let t=Or.NOT_FOUND;const i=this._offset.wrapped;if(this._offset.wrapped=!1,e){const r=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,t=i?Or.WRAPPED:Or.FOUND,-1!==r&&r!==this._selected.pageIdx&&this.#o(r)}this.#w(t,this.#e.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this.#o(this._selected.pageIdx))}#y(e){const t=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||t&&this._pdfDocument!==t||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#w(Or.FOUND),this._highlightMatches=!1,this.#h())})}#b(){const{pageIdx:e,matchIdx:t}=this._selected;let i=0,r=this._matchesCountTotal;if(-1!==t){for(let s=0;s<e;s++)i+=this._pageMatches[s]?.length||0;i+=t+1}return(i<1||i>r)&&(i=r=0),{current:i,total:r}}#C(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#b()})}#w(e,t=!1){!this.#t&&(this.#n!==this._linkService.pagesCount||e===Or.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:t,entireWord:this.#e?.entireWord??null,matchesCount:this.#b(),rawQuery:this.#e?.query??null})}}const Rs={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};class jh{externalLinkEnabled=!0;constructor({eventBus:e,externalLinkTarget:t=null,externalLinkRel:i=null,ignoreDestinationZoom:r=!1}={}){this.eventBus=e,this.externalLinkTarget=t,this.externalLinkRel=i,this._ignoreDestinationZoom=r,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(e,t=null){this.baseUrl=t,this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1}set page(e){this.pdfDocument&&(this.pdfViewer.currentPageNumber=e)}get rotation(){return this.pdfDocument?this.pdfViewer.pagesRotation:0}set rotation(e){this.pdfDocument&&(this.pdfViewer.pagesRotation=e)}get isInPresentationMode(){return!!this.pdfDocument&&this.pdfViewer.isInPresentationMode}goToDestination(e){var t=this;return S(function*(){if(!t.pdfDocument)return;let i,r,s;if("string"==typeof e?(i=e,r=yield t.pdfDocument.getDestination(e)):(i=null,r=yield e),!Array.isArray(r))return void console.error(`goToDestination: "${r}" is not a valid destination array, for dest="${e}".`);const[o]=r;if(o&&"object"==typeof o){if(s=t.pdfDocument.cachedPageNumber(o),!s)try{s=(yield t.pdfDocument.getPageIndex(o))+1}catch{return void console.error(`goToDestination: "${o}" is not a valid page reference, for dest="${e}".`)}}else Number.isInteger(o)&&(s=o+1);!s||s<1||s>t.pagesCount?console.error(`goToDestination: "${s}" is not a valid page number, for dest="${e}".`):(t.pdfHistory&&(t.pdfHistory.pushCurrentPosition(),t.pdfHistory.push({namedDest:i,explicitDest:r,pageNumber:s})),t.pdfViewer.scrollPageIntoView({pageNumber:s,destArray:r,ignoreDestinationZoom:t._ignoreDestinationZoom}))})()}goToPage(e){if(!this.pdfDocument)return;const t="string"==typeof e&&this.pdfViewer.pageLabelToPageNumber(e)||0|e;Number.isInteger(t)&&t>0&&t<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(t)),this.pdfViewer.scrollPageIntoView({pageNumber:t})):console.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`)}addLinkAttributes(e,t,i=!1){if(!t||"string"!=typeof t)throw new Error('A valid "url" parameter must provided.');const r=i?Rs.BLANK:this.externalLinkTarget,s=this.externalLinkRel;this.externalLinkEnabled?e.href=e.title=t:(e.href="",e.title=`Disabled: ${t}`,e.onclick=()=>!1);let o="";switch(r){case Rs.NONE:break;case Rs.SELF:o="_self";break;case Rs.BLANK:o="_blank";break;case Rs.PARENT:o="_parent";break;case Rs.TOP:o="_top"}e.target=o,e.rel="string"==typeof s?s:"noopener noreferrer nofollow"}getDestinationHash(e){if("string"==typeof e){if(e.length>0)return this.getAnchorUrl("#"+escape(e))}else if(Array.isArray(e)){const t=JSON.stringify(e);if(t.length>0)return this.getAnchorUrl("#"+escape(t))}return this.getAnchorUrl("")}getAnchorUrl(e){return this.baseUrl?this.baseUrl+e:e}setHash(e){if(!this.pdfDocument)return;let t,i;if(e.includes("=")){const r=Fh(e);if(r.has("search")){const s=r.get("search").replaceAll('"',""),o="true"===r.get("phrase");this.eventBus.dispatch("findfromurlhash",{source:this,query:o?s:s.match(/\S+/g)})}if(r.has("page")&&(t=0|r.get("page")||1),r.has("zoom")){const s=r.get("zoom").split(","),o=s[0],a=parseFloat(o);o.includes("Fit")?"Fit"===o||"FitB"===o?i=[null,{name:o}]:"FitH"===o||"FitBH"===o||"FitV"===o||"FitBV"===o?i=[null,{name:o},s.length>1?0|s[1]:null]:"FitR"===o?5!==s.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:o},0|s[1],0|s[2],0|s[3],0|s[4]]:console.error(`PDFLinkService.setHash: "${o}" is not a valid zoom value.`):i=[null,{name:"XYZ"},s.length>1?0|s[1]:null,s.length>2?0|s[2]:null,a?a/100:o]}return i?this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:i,allowNegativeOffset:!0}):t&&(this.page=t),r.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:r.get("pagemode")}),void(r.has("nameddest")&&this.goToDestination(r.get("nameddest")))}i=unescape(e);try{i=JSON.parse(i),Array.isArray(i)||(i=i.toString())}catch{}"string"==typeof i||jh.#e(i)?this.goToDestination(i):console.error(`PDFLinkService.setHash: "${unescape(e)}" is not a valid destination.`)}executeNamedAction(e){if(this.pdfDocument){switch(e){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:e})}}executeSetOCGState(e){var t=this;return S(function*(){if(!t.pdfDocument)return;const i=t.pdfDocument,r=yield t.pdfViewer.optionalContentConfigPromise;i===t.pdfDocument&&(r.setOCGState(e),t.pdfViewer.optionalContentConfigPromise=Promise.resolve(r))})()}static#e(e){if(!Array.isArray(e)||e.length<2)return!1;const[t,i,...r]=e;if(("object"!=typeof t||!Number.isInteger(t?.num)||!Number.isInteger(t?.gen))&&!Number.isInteger(t)||"object"!=typeof i||"string"!=typeof i?.name)return!1;const s=r.length;let o=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return 0===s;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(4!==s)return!1;o=!1;break;default:return!1}for(const a of r)if(!("number"==typeof a||o&&null===a))return!1;return!0}}class m_ extends jh{setDocument(e,t=null){}}const{AbortException:o9,AnnotationEditorLayer:a9,AnnotationEditorType:In,AnnotationEditorUIManager:l9,AnnotationLayer:c9,AnnotationMode:ir,createValidAbsoluteUrl:u9,DrawLayer:d9,fetchData:FP,getPdfFilenameFromUrl:h9,isPdfFile:f9,normalizeUnicode:p9,OutputScale:g9,PermissionFlag:Hh,PixelsPerInch:rr,RenderingCancelledException:v_,setLayerDimensions:m9,shadow:Uh,TextLayer:v9,version:LP,XfaLayer:y_}=globalThis.pdfjsLib;class VP{#e=null;#t=null;constructor({pdfPage:e,linkService:t,downloadManager:i,annotationStorage:r=null,imageResourcesPath:s="",renderForms:o=!0,enableScripting:a=!1,hasJSActionsPromise:l=null,fieldObjectsPromise:c=null,annotationCanvasMap:u=null,accessibilityManager:d=null,annotationEditorUIManager:h=null,onAppend:f=null}){this.pdfPage=e,this.linkService=t,this.downloadManager=i,this.imageResourcesPath=s,this.renderForms=o,this.annotationStorage=r,this.enableScripting=a,this._hasJSActionsPromise=l||Promise.resolve(!1),this._fieldObjectsPromise=c||Promise.resolve(null),this._annotationCanvasMap=u,this._accessibilityManager=d,this._annotationEditorUIManager=h,this.#e=f,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=t.eventBus}render(e,t){var i=this;return S(function*(r,s,o="display"){if(i.div){if(i._cancelled||!i.annotationLayer)return;return void i.annotationLayer.update({viewport:r.clone({dontFlip:!0})})}const[a,l,c]=yield Promise.all([i.pdfPage.getAnnotations({intent:o}),i._hasJSActionsPromise,i._fieldObjectsPromise]);if(i._cancelled)return;const u=i.div=document.createElement("div");u.className="annotationLayer",i.#e?.(u),0!==a.length?(i.annotationLayer=new c9({div:u,accessibilityManager:i._accessibilityManager,annotationCanvasMap:i._annotationCanvasMap,annotationEditorUIManager:i._annotationEditorUIManager,page:i.pdfPage,viewport:r.clone({dontFlip:!0}),structTreeLayer:s?.structTreeLayer||null}),yield i.annotationLayer.render({annotations:a,imageResourcesPath:i.imageResourcesPath,renderForms:i.renderForms,linkService:i.linkService,downloadManager:i.downloadManager,annotationStorage:i.annotationStorage,enableScripting:i.enableScripting,hasJSActions:l,fieldObjects:c}),i.linkService.isInPresentationMode&&i.#n(3),i.#t||(i.#t=new AbortController,i._eventBus?._on("presentationmodechanged",d=>{i.#n(d.state)},{signal:i.#t.signal}))):i.hide()}).apply(this,arguments)}cancel(){this._cancelled=!0,this.#t?.abort(),this.#t=null}hide(){this.div&&(this.div.hidden=!0)}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}#n(e){if(!this.div)return;let t=!1;switch(e){case 3:t=!0;break;case 1:break;default:return}for(const i of this.div.childNodes)i.hasAttribute("data-internal-link")||(i.inert=t)}}function BP(n,e){const t=document.createElement("a");if(!t.click)throw new Error('DownloadManager: "a.click()" is not supported.');t.href=n,t.target="_parent","download"in t&&(t.download=e),(document.body||document.documentElement).append(t),t.click(),t.remove()}class y9{#e=new WeakMap;downloadData(e,t,i){BP(URL.createObjectURL(new Blob([e],{type:i})),t)}openOrDownloadData(e,t,i=null){const s=f9(t)?"application/pdf":"";return this.downloadData(e,t,s),!1}download(e,t,i){let r;if(e)r=URL.createObjectURL(new Blob([e],{type:"application/pdf"}));else{if(!u9(t,"http://example.com"))return void console.error(`download - not a valid URL: ${t}`);r=t+"#pdfjs.action=download"}BP(r,i)}}function __(){return(__=S(function*({target:n,name:e,delay:t=0}){if("object"!=typeof n||!e||"string"!=typeof e||!(Number.isInteger(t)&&t>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");const{promise:i,resolve:r}=Promise.withResolvers(),s=new AbortController;function o(c){s.abort(),clearTimeout(l),r(c)}n[n instanceof b_?"_on":"addEventListener"](e,o.bind(null,"event"),{signal:s.signal});const l=setTimeout(o.bind(null,"timeout"),t);return i})).apply(this,arguments)}class b_{#e=Object.create(null);on(e,t,i=null){this._on(e,t,{external:!0,once:i?.once,signal:i?.signal})}off(e,t,i=null){this._off(e,t)}dispatch(e,t){const i=this.#e[e];if(!i||0===i.length)return;let r;for(const{listener:s,external:o,once:a}of i.slice(0))a&&this._off(e,s),o?(r||=[]).push(s):s(t);if(r){for(const s of r)s(t);r=null}}_on(e,t,i=null){let r=null;if(i?.signal instanceof AbortSignal){const{signal:o}=i;if(o.aborted)return void console.error("Cannot use an `aborted` signal.");const a=()=>this._off(e,t);r=()=>o.removeEventListener("abort",a),o.addEventListener("abort",a)}(this.#e[e]||=[]).push({listener:t,external:!0===i?.external,once:!0===i?.once,rmAbort:r})}_off(e,t,i=null){const r=this.#e[e];if(r)for(let s=0,o=r.length;s<o;s++){const a=r[s];if(a.listener===t)return a.rmAbort?.(),void r.splice(s,1)}}}class $h{constructor(e){this.value=e}valueOf(){return this.value}}class ct extends $h{constructor(e="???"){super(e)}toString(e){return`{${this.value}}`}}class sr extends $h{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),this.value.toString(10)}}}class bc extends $h{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),new Date(this.value).toISOString()}}}function E9(n,e,t){return t===e||t instanceof sr&&e instanceof sr&&t.value===e.value||e instanceof sr&&"string"==typeof t&&t===n.memoizeIntlObject(Intl.PluralRules,e.opts).select(e.value)}function UP(n,e,t){return e[t]?ua(n,e[t].value):(n.reportError(new RangeError("No default")),new ct)}function w_(n,e){const t=[],i=Object.create(null);for(const r of e)"narg"===r.type?i[r.name]=wc(n,r.value):t.push(wc(n,r));return{positional:t,named:i}}function wc(n,e){switch(e.type){case"str":return e.value;case"num":return new sr(e.value,{minimumFractionDigits:e.precision});case"var":return function C9(n,{name:e}){let t;if(n.params){if(!Object.prototype.hasOwnProperty.call(n.params,e))return new ct(`$${e}`);t=n.params[e]}else{if(!n.args||!Object.prototype.hasOwnProperty.call(n.args,e))return n.reportError(new ReferenceError(`Unknown variable: $${e}`)),new ct(`$${e}`);t=n.args[e]}if(t instanceof $h)return t;switch(typeof t){case"string":return t;case"number":return new sr(t);case"object":if(t instanceof Date)return new bc(t.getTime());default:return n.reportError(new TypeError(`Variable type not supported: $${e}, ${typeof t}`)),new ct(`$${e}`)}}(n,e);case"mesg":return function A9(n,{name:e,attr:t}){const i=n.bundle._messages.get(e);if(!i)return n.reportError(new ReferenceError(`Unknown message: ${e}`)),new ct(e);if(t){const r=i.attributes[t];return r?ua(n,r):(n.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new ct(`${e}.${t}`))}return i.value?ua(n,i.value):(n.reportError(new ReferenceError(`No value: ${e}`)),new ct(e))}(n,e);case"term":return function D9(n,{name:e,attr:t,args:i}){const r=`-${e}`,s=n.bundle._terms.get(r);if(!s)return n.reportError(new ReferenceError(`Unknown term: ${r}`)),new ct(r);if(t){const a=s.attributes[t];if(a){n.params=w_(n,i).named;const l=ua(n,a);return n.params=null,l}return n.reportError(new ReferenceError(`Unknown attribute: ${t}`)),new ct(`${r}.${t}`)}n.params=w_(n,i).named;const o=ua(n,s.value);return n.params=null,o}(n,e);case"func":return function S9(n,{name:e,args:t}){let i=n.bundle._functions[e];if(!i)return n.reportError(new ReferenceError(`Unknown function: ${e}()`)),new ct(`${e}()`);if("function"!=typeof i)return n.reportError(new TypeError(`Function ${e}() is not callable`)),new ct(`${e}()`);try{let r=w_(n,t);return i(r.positional,r.named)}catch(r){return n.reportError(r),new ct(`${e}()`)}}(n,e);case"select":return function M9(n,{selector:e,variants:t,star:i}){let r=wc(n,e);if(r instanceof ct)return UP(n,t,i);for(const s of t)if(E9(n,r,wc(n,s.key)))return ua(n,s.value);return UP(n,t,i)}(n,e);default:return new ct}}function $P(n,e){if(n.dirty.has(e))return n.reportError(new RangeError("Cyclic reference")),new ct;n.dirty.add(e);const t=[],i=n.bundle._useIsolating&&e.length>1;for(const r of e)if("string"!=typeof r){if(n.placeables++,n.placeables>100)throw n.dirty.delete(e),new RangeError(`Too many placeables expanded: ${n.placeables}, max allowed is 100`);i&&t.push("\u2068"),t.push(wc(n,r).toString(n)),i&&t.push("\u2069")}else t.push(n.bundle._transform(r));return n.dirty.delete(e),t.join("")}function ua(n,e){return"string"==typeof e?n.bundle._transform(e):$P(n,e)}class I9{constructor(e,t,i){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=t,this.args=i}reportError(e){if(!(this.errors&&e instanceof Error))throw e;this.errors.push(e)}memoizeIntlObject(e,t){let i=this.bundle._intls.get(e);i||(i={},this.bundle._intls.set(e,i));let r=JSON.stringify(t);return i[r]||(i[r]=new e(this.bundle.locales,t)),i[r]}}function zh(n,e){const t=Object.create(null);for(const[i,r]of Object.entries(n))e.includes(i)&&(t[i]=r.valueOf());return t}const zP=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function x9(n,e){let t=n[0];if(t instanceof ct)return new ct(`NUMBER(${t.valueOf()})`);if(t instanceof sr)return new sr(t.valueOf(),{...t.opts,...zh(e,zP)});if(t instanceof bc)return new sr(t.valueOf(),{...zh(e,zP)});throw new TypeError("Invalid argument to NUMBER")}const WP=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function T9(n,e){let t=n[0];if(t instanceof ct)return new ct(`DATETIME(${t.valueOf()})`);if(t instanceof bc)return new bc(t.valueOf(),{...t.opts,...zh(e,WP)});if(t instanceof sr)return new bc(t.valueOf(),{...zh(e,WP)});throw new TypeError("Invalid argument to DATETIME")}const GP=new Map;class R9{constructor(e,{functions:t,useIsolating:i=!0,transform:r=s=>s}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(e)?e:[e],this._functions={NUMBER:x9,DATETIME:T9,...t},this._useIsolating=i,this._transform=r,this._intls=function P9(n){const e=Array.isArray(n)?n.join(" "):n;let t=GP.get(e);return void 0===t&&(t=new Map,GP.set(e,t)),t}(e)}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e,{allowOverrides:t=!1}={}){const i=[];for(let r=0;r<e.body.length;r++){let s=e.body[r];if(s.id.startsWith("-")){if(!1===t&&this._terms.has(s.id)){i.push(new Error(`Attempt to override an existing term: "${s.id}"`));continue}this._terms.set(s.id,s)}else{if(!1===t&&this._messages.has(s.id)){i.push(new Error(`Attempt to override an existing message: "${s.id}"`));continue}this._messages.set(s.id,s)}}return i}formatPattern(e,t=null,i=null){if("string"==typeof e)return this._transform(e);let r=new I9(this,i,t);try{return $P(r,e).toString(r)}catch(s){if(r.errors&&s instanceof Error)return r.errors.push(s),(new ct).toString(r);throw s}}}const E_=/^(-?[a-zA-Z][\w-]*) *= */gm,qP=/\.([a-zA-Z][\w-]*) *= */y,N9=/\*?\[/y,C_=/(-?[0-9]+(?:\.([0-9]+))?)/y,k9=/([a-zA-Z][\w-]*)/y,YP=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,O9=/^[A-Z][A-Z0-9_-]*$/,Wh=/([^{}\n\r]+)/y,F9=/([^\\"\n\r]*)/y,KP=/\\([\\"])/y,XP=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,L9=/^\n+/,QP=/ +$/,V9=/ *\r?\n/g,B9=/( *)$/,j9=/{\s*/y,ZP=/\s*}/y,H9=/\[\s*/y,U9=/\s*] */y,$9=/\s*\(\s*/y,z9=/\s*->\s*/y,W9=/\s*:\s*/y,G9=/\s*,?\s*/y,q9=/\s+/y;class Y9{constructor(e){this.body=[],E_.lastIndex=0;let t=0;for(;;){let E=E_.exec(e);if(null===E)break;t=E_.lastIndex;try{this.body.push(l(E[1]))}catch(D){if(D instanceof SyntaxError)continue;throw D}}function i(E){return E.lastIndex=t,E.test(e)}function r(E,D){if(e[t]===E)return t++,!0;if(D)throw new D(`Expected ${E}`);return!1}function s(E,D){if(i(E))return t=E.lastIndex,!0;if(D)throw new D(`Expected ${E.toString()}`);return!1}function o(E){E.lastIndex=t;let D=E.exec(e);if(null===D)throw new SyntaxError(`Expected ${E.toString()}`);return t=E.lastIndex,D}function a(E){return o(E)[1]}function l(E){let D=u(),k=function c(){let E=Object.create(null);for(;i(qP);){let D=a(qP),k=u();if(null===k)throw new SyntaxError("Expected attribute value");E[D]=k}return E}();if(null===D&&0===Object.keys(k).length)throw new SyntaxError("Expected message value or attributes");return{id:E,value:D,attributes:k}}function u(){let E;if(i(Wh)&&(E=a(Wh)),"{"===e[t]||"}"===e[t])return d(E?[E]:[],1/0);let D=A();return D?E?d([E,D],D.length):(D.value=x(D.value,L9),d([D],D.length)):E?x(E,QP):null}function d(E=[],D){for(;;){if(i(Wh)){E.push(a(Wh));continue}if("{"===e[t]){E.push(h());continue}if("}"===e[t])throw new SyntaxError("Unbalanced closing brace");let de=A();if(!de)break;E.push(de),D=Math.min(D,de.length)}let k=E.length-1,ue=E[k];"string"==typeof ue&&(E[k]=x(ue,QP));let ce=[];for(let de of E)de instanceof JP&&(de=de.value.slice(0,de.value.length-D)),de&&ce.push(de);return ce}function h(){s(j9,SyntaxError);let E=f();if(s(ZP))return E;if(s(z9)){let D=function v(){let k,E=[],D=0;for(;i(N9);){r("*")&&(k=D);let ue=m(),ce=u();if(null===ce)throw new SyntaxError("Expected variant value");E[D++]={key:ue,value:ce}}if(0===D)return null;if(void 0===k)throw new SyntaxError("Expected default variant");return{variants:E,star:k}}();return s(ZP,SyntaxError),{type:"select",selector:E,...D}}throw new SyntaxError("Unclosed placeable")}function f(){if("{"===e[t])return h();if(i(YP)){let[,E,D,k=null]=o(YP);if("$"===E)return{type:"var",name:D};if(s($9)){let ue=function p(){let E=[];for(;;){switch(e[t]){case")":return t++,E;case void 0:throw new SyntaxError("Unclosed argument list")}E.push(g()),s(G9)}}();if("-"===E)return{type:"term",name:D,attr:k,args:ue};if(O9.test(D))return{type:"func",name:D,args:ue};throw new SyntaxError("Function names must be all upper-case")}return"-"===E?{type:"term",name:D,attr:k,args:[]}:{type:"mesg",name:D,attr:k}}return y()}function g(){let E=f();return"mesg"!==E.type?E:s(W9)?{type:"narg",name:E.name,value:y()}:E}function m(){let E;return s(H9,SyntaxError),E=i(C_)?_():{type:"str",value:a(k9)},s(U9,SyntaxError),E}function y(){if(i(C_))return _();if('"'===e[t])return function b(){r('"',SyntaxError);let E="";for(;;){if(E+=a(F9),"\\"!==e[t]){if(r('"'))return{type:"str",value:E};throw new SyntaxError("Unclosed string literal")}E+=w()}}();throw new SyntaxError("Invalid expression")}function _(){let[,E,D=""]=o(C_),k=D.length;return{type:"num",value:parseFloat(E),precision:k}}function w(){if(i(KP))return a(KP);if(i(XP)){let[,E,D]=o(XP),k=parseInt(E||D,16);return k<=55295||57344<=k?String.fromCodePoint(k):"\ufffd"}throw new SyntaxError("Unknown escape sequence")}function A(){let E=t;switch(s(q9),e[t]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return T(e.slice(E,t))}return" "===e[t-1]&&T(e.slice(E,t))}function x(E,D){return E.replace(D,"")}function T(E){let D=E.replace(V9,"\n"),k=B9.exec(E)[1].length;return new JP(D,k)}}}class JP{constructor(e,t){this.value=e,this.length=t}}const K9=/<|&#?\w+;/,X9={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},Q9={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function Z9(n,e){const{value:t}=e;if("string"==typeof t)if("title"===n.localName&&"http://www.w3.org/1999/xhtml"===n.namespaceURI)n.textContent=t;else if(K9.test(t)){const i=n.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");i.innerHTML=t,function J9(n,e){for(const t of n.childNodes)if(t.nodeType!==t.TEXT_NODE){if(t.hasAttribute("data-l10n-name")){const i=tY(e,t);n.replaceChild(i,t);continue}if(iY(t)){const i=nY(t);n.replaceChild(i,t);continue}console.warn(`An element of forbidden type "${t.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),n.replaceChild(A_(t),t)}e.textContent="",e.appendChild(n)}(i.content,n)}else n.textContent=t;eR(e,n)}function eY(n,e){if(!n)return!1;for(let t of n)if(t.name===e)return!0;return!1}function eR(n,e){const t=e.hasAttribute("data-l10n-attrs")?e.getAttribute("data-l10n-attrs").split(",").map(i=>i.trim()):null;for(const i of Array.from(e.attributes))tR(i.name,e,t)&&!eY(n.attributes,i.name)&&e.removeAttribute(i.name);if(n.attributes)for(const i of Array.from(n.attributes))tR(i.name,e,t)&&e.getAttribute(i.name)!==i.value&&e.setAttribute(i.name,i.value)}function tY(n,e){const t=e.getAttribute("data-l10n-name"),i=n.querySelector(`[data-l10n-name="${t}"]`);return i?i.localName!==e.localName?(console.warn(`An element named "${t}" was found in the translation but its type ${e.localName} didn't match the element found in the source (${i.localName}).`),A_(e)):(n.removeChild(i),nR(e,i.cloneNode(!1))):(console.warn(`An element named "${t}" wasn't found in the source.`),A_(e))}function nY(n){const e=n.ownerDocument.createElement(n.localName);return nR(n,e)}function A_(n){return n.ownerDocument.createTextNode(n.textContent)}function iY(n){const e=X9[n.namespaceURI];return e&&e.includes(n.localName)}function tR(n,e,t=null){if(t&&t.includes(n))return!0;const i=Q9[e.namespaceURI];if(!i)return!1;const r=n.toLowerCase(),s=e.localName;if(i.global.includes(r))return!0;if(!i[s])return!1;if(i[s].includes(r))return!0;if("http://www.w3.org/1999/xhtml"===e.namespaceURI&&"input"===s&&"value"===r){const o=e.type.toLowerCase();if("submit"===o||"button"===o||"reset"===o)return!0}return!1}function nR(n,e){return e.textContent=n.textContent,eR(n,e),e}class iR extends Array{static from(e){return e instanceof this?e:new this(e)}}Symbol;class rY extends iR{constructor(e){if(super(),Symbol.asyncIterator in Object(e))this.iterator=e[Symbol.asyncIterator]();else{if(!(Symbol.iterator in Object(e)))throw new TypeError("Argument must implement the iteration protocol.");this.iterator=e[Symbol.iterator]()}}[Symbol.asyncIterator](){const e=this;let t=0;return{next:()=>S(function*(){return e.length<=t&&e.push(e.iterator.next()),e[t++]})()}}touchNext(){var e=this;return S(function*(t=1){let i=0;for(;i++<t;){const r=e[e.length-1];if(r&&(yield r).done)break;e.push(e.iterator.next())}return e[e.length-1]}).apply(this,arguments)}}class sY{constructor(e=[],t){this.resourceIds=e,this.generateBundles=t,this.onChange(!0)}addResourceIds(e,t=!1){return this.resourceIds.push(...e),this.onChange(t),this.resourceIds.length}removeResourceIds(e){return this.resourceIds=this.resourceIds.filter(t=>!e.includes(t)),this.onChange(),this.resourceIds.length}formatWithFallback(e,t){var i=this;return S(function*(){const r=[];let s=!1;var l,o=!1,a=!1;try{for(var u,c=function E6(n){var e,t,i,r=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(t&&null!=(e=n[t]))return e.call(n);if(i&&null!=(e=n[i]))return new Oh(e.call(n));t="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}(i.bundles);o=!(u=yield c.next()).done;o=!1){const d=u.value;{s=!0;const h=lY(t,d,e,r);if(0===h.size)break;if(typeof console<"u"){const f=d.locales[0],p=Array.from(h).join(", ");console.warn(`[fluent] Missing translations in ${f}: ${p}`)}}}}catch(d){a=!0,l=d}finally{try{o&&null!=c.return&&(yield c.return())}finally{if(a)throw l}}return!s&&typeof console<"u"&&console.warn(`[fluent] Request for keys failed because no resource bundles got generated.\n  keys: ${JSON.stringify(e)}.\n  resourceIds: ${JSON.stringify(i.resourceIds)}.`),r})()}formatMessages(e){return this.formatWithFallback(e,aY)}formatValues(e){return this.formatWithFallback(e,oY)}formatValue(e,t){var i=this;return S(function*(){const[r]=yield i.formatValues([{id:e,args:t}]);return r})()}handleEvent(){this.onChange()}onChange(e=!1){this.bundles=rY.from(this.generateBundles(this.resourceIds)),e&&this.bundles.touchNext(2)}}function oY(n,e,t,i){return t.value?n.formatPattern(t.value,i,e):null}function aY(n,e,t,i){const r={value:null,attributes:null};t.value&&(r.value=n.formatPattern(t.value,i,e));let s=Object.keys(t.attributes);if(s.length>0){r.attributes=new Array(s.length);for(let[o,a]of s.entries()){let l=n.formatPattern(t.attributes[a],i,e);r.attributes[o]={name:a,value:l}}}return r}function lY(n,e,t,i){const r=[],s=new Set;return t.forEach(({id:o,args:a},l)=>{if(void 0!==i[l])return;let c=e.getMessage(o);if(c){if(r.length=0,i[l]=n(e,r,c,a),r.length>0&&typeof console<"u"){const u=e.locales[0],d=r.join(", ");console.warn(`[fluent][resolver] errors in ${u}/${o}: ${d}.`)}}else s.add(o)}),s}const Ns="data-l10n-id",Ec="data-l10n-args",cY=`[${Ns}]`;class uY extends sY{constructor(e,t){super(e,t),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[Ns,Ec]}}onChange(e=!1){super.onChange(e),this.roots&&this.translateRoots()}setAttributes(e,t,i){return e.setAttribute(Ns,t),i?e.setAttribute(Ec,JSON.stringify(i)):e.removeAttribute(Ec),e}getAttributes(e){return{id:e.getAttribute(Ns),args:JSON.parse(e.getAttribute(Ec)||null)}}connectRoot(e){for(const t of this.roots)if(t===e||t.contains(e)||e.contains(t))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==e.ownerDocument.defaultView)throw new Error("Cannot connect a root:\n          DOMLocalization already has a root from a different window.")}else this.windowElement=e.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver(t=>this.translateMutations(t));this.roots.add(e),this.mutationObserver.observe(e,this.observerConfig)}disconnectRoot(e){return this.roots.delete(e),this.pauseObserving(),0===this.roots.size?(this.mutationObserver=null,this.windowElement&&this.pendingrAF&&this.windowElement.cancelAnimationFrame(this.pendingrAF),this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){const e=Array.from(this.roots);return Promise.all(e.map(t=>this.translateFragment(t)))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(const e of this.roots)this.mutationObserver.observe(e,this.observerConfig)}translateMutations(e){for(const t of e)switch(t.type){case"attributes":t.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(t.target);break;case"childList":for(const i of t.addedNodes)if(i.nodeType===i.ELEMENT_NODE)if(i.childElementCount)for(const r of this.getTranslatables(i))this.pendingElements.add(r);else i.hasAttribute(Ns)&&this.pendingElements.add(i)}this.pendingElements.size>0&&null===this.pendingrAF&&(this.pendingrAF=this.windowElement.requestAnimationFrame(()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null}))}translateFragment(e){return this.translateElements(this.getTranslatables(e))}translateElements(e){var t=this;return S(function*(){if(!e.length)return;const i=e.map(t.getKeysForElement),r=yield t.formatMessages(i);return t.applyTranslations(e,r)})()}applyTranslations(e,t){this.pauseObserving();for(let i=0;i<e.length;i++)void 0!==t[i]&&Z9(e[i],t[i]);this.resumeObserving()}getTranslatables(e){const t=Array.from(e.querySelectorAll(cY));return"function"==typeof e.hasAttribute&&e.hasAttribute(Ns)&&t.push(e),t}getKeysForElement(e){return{id:e.getAttribute(Ns),args:JSON.parse(e.getAttribute(Ec)||null)}}}class Gh{#e;#t;#n;#i;constructor({lang:e,isRTL:t},i=null){this.#n=Gh.#r(e),this.#i=i,this.#e=t??Gh.#s(this.#n)?"rtl":"ltr"}_setL10n(e){this.#i=e}getLanguage(){return this.#n}getDirection(){return this.#e}get(e){var t=this;return S(function*(i,r=null,s){return Array.isArray(i)?(i=i.map(l=>({id:l})),(yield t.#i.formatMessages(i)).map(l=>l.value)):(yield t.#i.formatMessages([{id:i,args:r}]))[0]?.value||s}).apply(this,arguments)}translate(e){var t=this;return S(function*(){(t.#t||=new Set).add(e);try{t.#i.connectRoot(e),yield t.#i.translateRoots()}catch{}})()}translateOnce(e){var t=this;return S(function*(){try{yield t.#i.translateElements([e])}catch(i){console.error(`translateOnce: "${i}".`)}})()}destroy(){var e=this;return S(function*(){if(e.#t){for(const t of e.#t)e.#i.disconnectRoot(t);e.#t.clear(),e.#t=null}e.#i.pauseObserving()})()}pause(){this.#i.pauseObserving()}resume(){this.#i.resumeObserving()}static#r(e){return{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[e=e?.toLowerCase()||"en-us"]||e}static#s(e){const t=e.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(t)}}function rR(n,e){const t=new Y9(e),i=new R9(n),r=i.addResource(t);return r.length&&console.error("L10n errors",r),i}class or extends Gh{constructor(e){super({lang:e});const t=e?or.#e.bind(or,"en-us",this.getLanguage()):or.#i.bind(or,this.getLanguage());this._setL10n(new uY([],t))}static#e(e,t){var i=this;return bP(function*(){const{baseURL:r,paths:s}=yield _P(i.#n()),o=[t];if(e!==t){const a=t.split("-",1)[0];a!==t&&o.push(a),o.push(e)}for(const a of o){const l=yield _P(i.#t(a,r,s));l?yield l:"en-us"===a&&(yield i.#r(a))}})()}static#t(e,t,i){return S(function*(){const r=i[e];if(!r)return null;const s=new URL(r,t),o=yield FP(s,"text");return rR(e,o)})()}static#n(){return S(function*(){try{const{href:e}=document.querySelector('link[type="application/l10n"]'),t=yield FP(e,"json");return{baseURL:e.replace(/[^/]*$/,"")||"./",paths:t}}catch{}return{baseURL:"./",paths:Object.create(null)}})()}static#i(e){var t=this;return bP(function*(){yield t.#r(e)})()}static#r(e){return S(function*(){return rR(e,'pdfjs-previous-button =\n    .title = Previous Page\npdfjs-previous-button-label = Previous\npdfjs-next-button =\n    .title = Next Page\npdfjs-next-button-label = Next\npdfjs-page-input =\n    .title = Page\npdfjs-of-pages = of { $pagesCount }\npdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })\npdfjs-zoom-out-button =\n    .title = Zoom Out\npdfjs-zoom-out-button-label = Zoom Out\npdfjs-zoom-in-button =\n    .title = Zoom In\npdfjs-zoom-in-button-label = Zoom In\npdfjs-zoom-select =\n    .title = Zoom\npdfjs-presentation-mode-button =\n    .title = Switch to Presentation Mode\npdfjs-presentation-mode-button-label = Presentation Mode\npdfjs-open-file-button =\n    .title = Open File\npdfjs-open-file-button-label = Open\npdfjs-print-button =\n    .title = Print\npdfjs-print-button-label = Print\npdfjs-save-button =\n    .title = Save\npdfjs-save-button-label = Save\npdfjs-download-button =\n    .title = Download\npdfjs-download-button-label = Download\npdfjs-bookmark-button =\n    .title = Current Page (View URL from Current Page)\npdfjs-bookmark-button-label = Current Page\npdfjs-tools-button =\n    .title = Tools\npdfjs-tools-button-label = Tools\npdfjs-first-page-button =\n    .title = Go to First Page\npdfjs-first-page-button-label = Go to First Page\npdfjs-last-page-button =\n    .title = Go to Last Page\npdfjs-last-page-button-label = Go to Last Page\npdfjs-page-rotate-cw-button =\n    .title = Rotate Clockwise\npdfjs-page-rotate-cw-button-label = Rotate Clockwise\npdfjs-page-rotate-ccw-button =\n    .title = Rotate Counterclockwise\npdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise\npdfjs-cursor-text-select-tool-button =\n    .title = Enable Text Selection Tool\npdfjs-cursor-text-select-tool-button-label = Text Selection Tool\npdfjs-cursor-hand-tool-button =\n    .title = Enable Hand Tool\npdfjs-cursor-hand-tool-button-label = Hand Tool\npdfjs-scroll-page-button =\n    .title = Use Page Scrolling\npdfjs-scroll-page-button-label = Page Scrolling\npdfjs-scroll-vertical-button =\n    .title = Use Vertical Scrolling\npdfjs-scroll-vertical-button-label = Vertical Scrolling\npdfjs-scroll-horizontal-button =\n    .title = Use Horizontal Scrolling\npdfjs-scroll-horizontal-button-label = Horizontal Scrolling\npdfjs-scroll-wrapped-button =\n    .title = Use Wrapped Scrolling\npdfjs-scroll-wrapped-button-label = Wrapped Scrolling\npdfjs-spread-none-button =\n    .title = Do not join page spreads\npdfjs-spread-none-button-label = No Spreads\npdfjs-spread-odd-button =\n    .title = Join page spreads starting with odd-numbered pages\npdfjs-spread-odd-button-label = Odd Spreads\npdfjs-spread-even-button =\n    .title = Join page spreads starting with even-numbered pages\npdfjs-spread-even-button-label = Even Spreads\npdfjs-document-properties-button =\n    .title = Document Properties\u2026\npdfjs-document-properties-button-label = Document Properties\u2026\npdfjs-document-properties-file-name = File name:\npdfjs-document-properties-file-size = File size:\npdfjs-document-properties-size-kb = { NUMBER($kb, maximumSignificantDigits: 3) } KB ({ $b } bytes)\npdfjs-document-properties-size-mb = { NUMBER($mb, maximumSignificantDigits: 3) } MB ({ $b } bytes)\npdfjs-document-properties-title = Title:\npdfjs-document-properties-author = Author:\npdfjs-document-properties-subject = Subject:\npdfjs-document-properties-keywords = Keywords:\npdfjs-document-properties-creation-date = Creation Date:\npdfjs-document-properties-modification-date = Modification Date:\npdfjs-document-properties-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }\npdfjs-document-properties-creator = Creator:\npdfjs-document-properties-producer = PDF Producer:\npdfjs-document-properties-version = PDF Version:\npdfjs-document-properties-page-count = Page Count:\npdfjs-document-properties-page-size = Page Size:\npdfjs-document-properties-page-size-unit-inches = in\npdfjs-document-properties-page-size-unit-millimeters = mm\npdfjs-document-properties-page-size-orientation-portrait = portrait\npdfjs-document-properties-page-size-orientation-landscape = landscape\npdfjs-document-properties-page-size-name-a-three = A3\npdfjs-document-properties-page-size-name-a-four = A4\npdfjs-document-properties-page-size-name-letter = Letter\npdfjs-document-properties-page-size-name-legal = Legal\npdfjs-document-properties-page-size-dimension-string = { $width } \xd7 { $height } { $unit } ({ $orientation })\npdfjs-document-properties-page-size-dimension-name-string = { $width } \xd7 { $height } { $unit } ({ $name }, { $orientation })\npdfjs-document-properties-linearized = Fast Web View:\npdfjs-document-properties-linearized-yes = Yes\npdfjs-document-properties-linearized-no = No\npdfjs-document-properties-close-button = Close\npdfjs-print-progress-message = Preparing document for printing\u2026\npdfjs-print-progress-percent = { $progress }%\npdfjs-print-progress-close-button = Cancel\npdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.\npdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.\npdfjs-toggle-sidebar-button =\n    .title = Toggle Sidebar\npdfjs-toggle-sidebar-notification-button =\n    .title = Toggle Sidebar (document contains outline/attachments/layers)\npdfjs-toggle-sidebar-button-label = Toggle Sidebar\npdfjs-document-outline-button =\n    .title = Show Document Outline (double-click to expand/collapse all items)\npdfjs-document-outline-button-label = Document Outline\npdfjs-attachments-button =\n    .title = Show Attachments\npdfjs-attachments-button-label = Attachments\npdfjs-layers-button =\n    .title = Show Layers (double-click to reset all layers to the default state)\npdfjs-layers-button-label = Layers\npdfjs-thumbs-button =\n    .title = Show Thumbnails\npdfjs-thumbs-button-label = Thumbnails\npdfjs-current-outline-item-button =\n    .title = Find Current Outline Item\npdfjs-current-outline-item-button-label = Current Outline Item\npdfjs-findbar-button =\n    .title = Find in Document\npdfjs-findbar-button-label = Find\npdfjs-additional-layers = Additional Layers\npdfjs-thumb-page-title =\n    .title = Page { $page }\npdfjs-thumb-page-canvas =\n    .aria-label = Thumbnail of Page { $page }\npdfjs-find-input =\n    .title = Find\n    .placeholder = Find in document\u2026\npdfjs-find-previous-button =\n    .title = Find the previous occurrence of the phrase\npdfjs-find-previous-button-label = Previous\npdfjs-find-next-button =\n    .title = Find the next occurrence of the phrase\npdfjs-find-next-button-label = Next\npdfjs-find-highlight-checkbox = Highlight All\npdfjs-find-match-case-checkbox-label = Match Case\npdfjs-find-match-diacritics-checkbox-label = Match Diacritics\npdfjs-find-entire-word-checkbox-label = Whole Words\npdfjs-find-reached-top = Reached top of document, continued from bottom\npdfjs-find-reached-bottom = Reached end of document, continued from top\npdfjs-find-match-count =\n    { $total ->\n        [one] { $current } of { $total } match\n       *[other] { $current } of { $total } matches\n    }\npdfjs-find-match-count-limit =\n    { $limit ->\n        [one] More than { $limit } match\n       *[other] More than { $limit } matches\n    }\npdfjs-find-not-found = Phrase not found\npdfjs-page-scale-width = Page Width\npdfjs-page-scale-fit = Page Fit\npdfjs-page-scale-auto = Automatic Zoom\npdfjs-page-scale-actual = Actual Size\npdfjs-page-scale-percent = { $scale }%\npdfjs-page-landmark =\n    .aria-label = Page { $page }\npdfjs-loading-error = An error occurred while loading the PDF.\npdfjs-invalid-file-error = Invalid or corrupted PDF file.\npdfjs-missing-file-error = Missing PDF file.\npdfjs-unexpected-response-error = Unexpected server response.\npdfjs-rendering-error = An error occurred while rendering the page.\npdfjs-annotation-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }\npdfjs-text-annotation-type =\n    .alt = [{ $type } Annotation]\npdfjs-password-label = Enter the password to open this PDF file.\npdfjs-password-invalid = Invalid password. Please try again.\npdfjs-password-ok-button = OK\npdfjs-password-cancel-button = Cancel\npdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.\npdfjs-editor-free-text-button =\n    .title = Text\npdfjs-editor-free-text-button-label = Text\npdfjs-editor-ink-button =\n    .title = Draw\npdfjs-editor-ink-button-label = Draw\npdfjs-editor-stamp-button =\n    .title = Add or edit images\npdfjs-editor-stamp-button-label = Add or edit images\npdfjs-editor-highlight-button =\n    .title = Highlight\npdfjs-editor-highlight-button-label = Highlight\npdfjs-highlight-floating-button1 =\n    .title = Highlight\n    .aria-label = Highlight\npdfjs-highlight-floating-button-label = Highlight\npdfjs-editor-remove-ink-button =\n    .title = Remove drawing\npdfjs-editor-remove-freetext-button =\n    .title = Remove text\npdfjs-editor-remove-stamp-button =\n    .title = Remove image\npdfjs-editor-remove-highlight-button =\n    .title = Remove highlight\npdfjs-editor-free-text-color-input = Color\npdfjs-editor-free-text-size-input = Size\npdfjs-editor-ink-color-input = Color\npdfjs-editor-ink-thickness-input = Thickness\npdfjs-editor-ink-opacity-input = Opacity\npdfjs-editor-stamp-add-image-button =\n    .title = Add image\npdfjs-editor-stamp-add-image-button-label = Add image\npdfjs-editor-free-highlight-thickness-input = Thickness\npdfjs-editor-free-highlight-thickness-title =\n    .title = Change thickness when highlighting items other than text\npdfjs-free-text2 =\n    .aria-label = Text Editor\n    .default-content = Start typing\u2026\npdfjs-ink =\n    .aria-label = Draw Editor\npdfjs-ink-canvas =\n    .aria-label = User-created image\npdfjs-editor-alt-text-button =\n    .aria-label = Alt text\npdfjs-editor-alt-text-button-label = Alt text\npdfjs-editor-alt-text-edit-button =\n    .aria-label = Edit alt text\npdfjs-editor-alt-text-dialog-label = Choose an option\npdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can\u2019t see the image or when it doesn\u2019t load.\npdfjs-editor-alt-text-add-description-label = Add a description\npdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.\npdfjs-editor-alt-text-mark-decorative-label = Mark as decorative\npdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.\npdfjs-editor-alt-text-cancel-button = Cancel\npdfjs-editor-alt-text-save-button = Save\npdfjs-editor-alt-text-decorative-tooltip = Marked as decorative\npdfjs-editor-alt-text-textarea =\n    .placeholder = For example, \u201cA young man sits down at a table to eat a meal\u201d\npdfjs-editor-resizer-top-left =\n    .aria-label = Top left corner \u2014 resize\npdfjs-editor-resizer-top-middle =\n    .aria-label = Top middle \u2014 resize\npdfjs-editor-resizer-top-right =\n    .aria-label = Top right corner \u2014 resize\npdfjs-editor-resizer-middle-right =\n    .aria-label = Middle right \u2014 resize\npdfjs-editor-resizer-bottom-right =\n    .aria-label = Bottom right corner \u2014 resize\npdfjs-editor-resizer-bottom-middle =\n    .aria-label = Bottom middle \u2014 resize\npdfjs-editor-resizer-bottom-left =\n    .aria-label = Bottom left corner \u2014 resize\npdfjs-editor-resizer-middle-left =\n    .aria-label = Middle left \u2014 resize\npdfjs-editor-highlight-colorpicker-label = Highlight color\npdfjs-editor-colorpicker-button =\n    .title = Change color\npdfjs-editor-colorpicker-dropdown =\n    .aria-label = Color choices\npdfjs-editor-colorpicker-yellow =\n    .title = Yellow\npdfjs-editor-colorpicker-green =\n    .title = Green\npdfjs-editor-colorpicker-blue =\n    .title = Blue\npdfjs-editor-colorpicker-pink =\n    .title = Pink\npdfjs-editor-colorpicker-red =\n    .title = Red\npdfjs-editor-highlight-show-all-button-label = Show all\npdfjs-editor-highlight-show-all-button =\n    .title = Show all\npdfjs-editor-new-alt-text-dialog-edit-label = Edit alt text (image description)\npdfjs-editor-new-alt-text-dialog-add-label = Add alt text (image description)\npdfjs-editor-new-alt-text-textarea =\n    .placeholder = Write your description here\u2026\npdfjs-editor-new-alt-text-description = Short description for people who can\u2019t see the image or when the image doesn\u2019t load.\npdfjs-editor-new-alt-text-disclaimer1 = This alt text was created automatically and may be inaccurate.\npdfjs-editor-new-alt-text-disclaimer-learn-more-url = Learn more\npdfjs-editor-new-alt-text-create-automatically-button-label = Create alt text automatically\npdfjs-editor-new-alt-text-not-now-button = Not now\npdfjs-editor-new-alt-text-error-title = Couldn\u2019t create alt text automatically\npdfjs-editor-new-alt-text-error-description = Please write your own alt text or try again later.\npdfjs-editor-new-alt-text-error-close-button = Close\npdfjs-editor-new-alt-text-ai-model-downloading-progress = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\n    .aria-valuetext = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)\npdfjs-editor-new-alt-text-added-button =\n    .aria-label = Alt text added\npdfjs-editor-new-alt-text-added-button-label = Alt text added\npdfjs-editor-new-alt-text-missing-button =\n    .aria-label = Missing alt text\npdfjs-editor-new-alt-text-missing-button-label = Missing alt text\npdfjs-editor-new-alt-text-to-review-button =\n    .aria-label = Review alt text\npdfjs-editor-new-alt-text-to-review-button-label = Review alt text\npdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer = Created automatically: { $generatedAltText }\npdfjs-image-alt-text-settings-button =\n    .title = Image alt text settings\npdfjs-image-alt-text-settings-button-label = Image alt text settings\npdfjs-editor-alt-text-settings-dialog-label = Image alt text settings\npdfjs-editor-alt-text-settings-automatic-title = Automatic alt text\npdfjs-editor-alt-text-settings-create-model-button-label = Create alt text automatically\npdfjs-editor-alt-text-settings-create-model-description = Suggests descriptions to help people who can\u2019t see the image or when the image doesn\u2019t load.\npdfjs-editor-alt-text-settings-download-model-label = Alt text AI model ({ $totalSize } MB)\npdfjs-editor-alt-text-settings-ai-model-description = Runs locally on your device so your data stays private. Required for automatic alt text.\npdfjs-editor-alt-text-settings-delete-model-button = Delete\npdfjs-editor-alt-text-settings-download-model-button = Download\npdfjs-editor-alt-text-settings-downloading-model-button = Downloading\u2026\npdfjs-editor-alt-text-settings-editor-title = Alt text editor\npdfjs-editor-alt-text-settings-show-dialog-button-label = Show alt text editor right away when adding an image\npdfjs-editor-alt-text-settings-show-dialog-description = Helps you make sure all your images have alt text.\npdfjs-editor-alt-text-settings-close-button = Close')})()}}function S_(){return document.location.hash}class hY{#e=null;constructor({linkService:e,eventBus:t}){this.linkService=e,this.eventBus=t,this._initialized=!1,this._fingerprint="",this.reset(),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",i=>{this._isPagesLoaded=!!i.pagesCount},{once:!0})})}initialize({fingerprint:e,resetHistory:t=!1,updateUrl:i=!1}){if(!e||"string"!=typeof e)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const r=""!==this._fingerprint&&this._fingerprint!==e;this._fingerprint=e,this._updateUrl=!0===i,this._initialized=!0,this.#d();const s=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=S_(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this.#r(s,!0)||t){const{hash:a,page:l,rotation:c}=this.#l(!0);return!a||r||t?void this.#t(null,!0):void this.#t({hash:a,page:l,rotation:c},!0)}const o=s.destination;this.#s(o,s.uid,!0),void 0!==o.rotation&&(this._initialRotation=o.rotation),o.dest?(this._initialBookmark=JSON.stringify(o.dest),this._destination.page=null):o.hash?this._initialBookmark=o.hash:o.page&&(this._initialBookmark=`page=${o.page}`)}reset(){this._initialized&&(this.#a(),this._initialized=!1,this.#o()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:e=null,explicitDest:t,pageNumber:i}){if(!this._initialized)return;if(e&&"string"!=typeof e)return void console.error(`PDFHistory.push: "${e}" is not a valid namedDest parameter.`);if(!Array.isArray(t))return void console.error(`PDFHistory.push: "${t}" is not a valid explicitDest parameter.`);if(!this.#i(i)&&(null!==i||this._destination))return void console.error(`PDFHistory.push: "${i}" is not a valid pageNumber parameter.`);const r=e||JSON.stringify(t);if(!r)return;let s=!1;if(this._destination&&(function fY(n,e){return"string"==typeof n&&"string"==typeof e&&(n===e||Fh(n).get("nameddest")===e)}(this._destination.hash,r)||function pY(n,e){function t(i,r){if(typeof i!=typeof r||Array.isArray(i)||Array.isArray(r))return!1;if(null!==i&&"object"==typeof i&&null!==r){if(Object.keys(i).length!==Object.keys(r).length)return!1;for(const s in i)if(!t(i[s],r[s]))return!1;return!0}return i===r||Number.isNaN(i)&&Number.isNaN(r)}if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(let i=0,r=n.length;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}(this._destination.dest,t))){if(this._destination.page)return;s=!0}this._popStateInProgress&&!s||(this.#t({dest:t,hash:r,page:i,rotation:this.linkService.rotation},s),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(e){if(this._initialized){if(!this.#i(e))return void console.error(`PDFHistory.pushPage: "${e}" is not a valid page number.`);this._destination?.page!==e&&(this._popStateInProgress||(this.#t({dest:null,hash:`page=${e}`,page:e,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this.#n()}back(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this.#r(e)&&e.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this.#r(e)&&e.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}#t(e,t=!1){const i=t||!this._destination,r={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:e};let s;if(this.#s(e,r.uid),this._updateUrl&&e?.hash){const o=document.location.href.split("#",1)[0];o.startsWith("file://")||(s=`${o}#${e.hash}`)}i?window.history.replaceState(r,"",s):window.history.pushState(r,"",s)}#n(e=!1){if(!this._position)return;let t=this._position;if(e&&(t=Object.assign(Object.create(null),this._position),t.temporary=!0),!this._destination)return void this.#t(t);if(this._destination.temporary)return void this.#t(t,!0);if(this._destination.hash===t.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let i=!1;if(this._destination.page>=t.first&&this._destination.page<=t.page){if(void 0!==this._destination.dest||!this._destination.first)return;i=!0}this.#t(t,i)}#i(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}#r(e,t=!1){if(!e)return!1;if(e.fingerprint!==this._fingerprint){if(!t)return!1;{if("string"!=typeof e.fingerprint||e.fingerprint.length!==this._fingerprint.length)return!1;const[i]=performance.getEntriesByType("navigation");if("reload"!==i?.type)return!1}}return!(!Number.isInteger(e.uid)||e.uid<0||null===e.destination||"object"!=typeof e.destination)}#s(e,t,i=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),i&&e?.temporary&&delete e.temporary,this._destination=e,this._uid=t,this._maxUid=Math.max(this._maxUid,t),this._numPositionUpdates=0}#l(e=!1){const t=unescape(S_()).substring(1),i=Fh(t),r=i.get("nameddest")||"";let s=0|i.get("page");return(!this.#i(s)||e&&r.length>0)&&(s=null),{hash:t,page:s,rotation:this.linkService.rotation}}#c({location:e}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this.#n(!0),this._updateViewareaTimeout=null},1e3))}#u({state:e}){const t=S_(),i=this._currentHash!==t;if(this._currentHash=t,!e){this._uid++;const{hash:s,page:o,rotation:a}=this.#l();return void this.#t({hash:s,page:o,rotation:a},!0)}if(!this.#r(e))return;this._popStateInProgress=!0,i&&(this._blockHashChange++,function _9(n){return __.apply(this,arguments)}({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const r=e.destination;this.#s(r,e.uid,!0),IP(r.rotation)&&(this.linkService.rotation=r.rotation),r.dest?this.linkService.goToDestination(r.dest):r.hash?this.linkService.setHash(r.hash):r.page&&(this.linkService.page=r.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}#a(){(!this._destination||this._destination.temporary)&&this.#n()}#d(){if(this.#e)return;this.#e=new AbortController;const{signal:e}=this.#e;this.eventBus._on("updateviewarea",this.#c.bind(this),{signal:e}),window.addEventListener("popstate",this.#u.bind(this),{signal:e}),window.addEventListener("pagehide",this.#a.bind(this),{signal:e})}#o(){this.#e?.abort(),this.#e=null}}class gY{#e=null;#t=null;#n=null;#i=null;#r=null;#s;constructor(e){this.pdfPage=e.pdfPage,this.accessibilityManager=e.accessibilityManager,this.l10n=e.l10n,this.l10n||=new or,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#s=e.uiManager,this.#e=e.annotationLayer||null,this.#r=e.textLayer||null,this.#t=e.drawLayer||null,this.#n=e.onAppend||null,this.#i=e.structTreeLayer||null}render(e){var t=this;return S(function*(i,r="display"){if("display"!==r||t._cancelled)return;const s=i.clone({dontFlip:!0});if(t.div)return t.annotationEditorLayer.update({viewport:s}),void t.show();const o=t.div=document.createElement("div");o.className="annotationEditorLayer",o.hidden=!0,o.dir=t.#s.direction,t.#n?.(o),t.annotationEditorLayer=new a9({uiManager:t.#s,div:o,structTreeLayer:t.#i,accessibilityManager:t.accessibilityManager,pageIndex:t.pdfPage.pageNumber-1,l10n:t.l10n,viewport:s,annotationLayer:t.#e,textLayer:t.#r,drawLayer:t.#t}),t.annotationEditorLayer.render({viewport:s,div:o,annotations:null,intent:r}),t.show()}).apply(this,arguments)}cancel(){this._cancelled=!0,this.div&&this.annotationEditorLayer.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isInvisible||(this.div.hidden=!1)}}{var M_=new Map;const n=navigator.userAgent||"",e=navigator.platform||"",t=navigator.maxTouchPoints||1,i=/Android/.test(n);(/\b(iPad|iPhone|iPod)(?=;)/.test(n)||"MacIntel"===e&&t>1||i)&&M_.set("maxCanvasPixels",5242880),i&&M_.set("useSystemFonts",!1)}const I_={BOOLEAN:1,NUMBER:2,OBJECT:4,STRING:8,UNDEFINED:16},Ti={allowedGlobalEvents:{value:null,kind:1},canvasMaxAreaInBytes:{value:-1,kind:5},isInAutomation:{value:!1,kind:1},localeProperties:{value:{lang:navigator.language||"en-US"},kind:1},nimbusDataStr:{value:"",kind:1},supportsCaretBrowsingMode:{value:!1,kind:1},supportsDocumentFonts:{value:!0,kind:1},supportsIntegratedFind:{value:!1,kind:1},supportsMouseWheelZoomCtrlKey:{value:!0,kind:1},supportsMouseWheelZoomMetaKey:{value:!0,kind:1},supportsPinchToZoom:{value:!0,kind:1},toolbarDensity:{value:0,kind:17},altTextLearnMoreUrl:{value:"",kind:130},annotationEditorMode:{value:0,kind:130},annotationMode:{value:2,kind:130},cursorToolOnLoad:{value:0,kind:130},debuggerSrc:{value:"./debugger.mjs",kind:2},defaultZoomDelay:{value:400,kind:130},defaultZoomValue:{value:"",kind:130},disableHistory:{value:!1,kind:2},disablePageLabels:{value:!1,kind:130},enableAltText:{value:!1,kind:130},enableAltTextModelDownload:{value:!0,kind:146},enableGuessAltText:{value:!0,kind:146},enableHighlightFloatingButton:{value:!1,kind:130},enableNewAltTextWhenAddingImage:{value:!0,kind:130},enablePermissions:{value:!1,kind:130},enablePrintAutoRotate:{value:!0,kind:130},enableScripting:{value:!0,kind:130},enableUpdatedAddImage:{value:!1,kind:130},externalLinkRel:{value:"noopener noreferrer nofollow",kind:2},externalLinkTarget:{value:0,kind:130},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:130},historyUpdateUrl:{value:!1,kind:130},ignoreDestinationZoom:{value:!1,kind:130},imageResourcesPath:{value:"./images/",kind:2},maxCanvasPixels:{value:2**25,kind:2},forcePageColors:{value:!1,kind:130},pageColorsBackground:{value:"Canvas",kind:130},pageColorsForeground:{value:"CanvasText",kind:130},pdfBugEnabled:{value:!1,kind:130},printResolution:{value:150,kind:2},sidebarViewOnLoad:{value:-1,kind:130},scrollModeOnLoad:{value:-1,kind:130},spreadModeOnLoad:{value:-1,kind:130},textLayerMode:{value:1,kind:130},viewOnLoad:{value:0,kind:130},cMapPacked:{value:!0,kind:4},cMapUrl:{value:"../web/cmaps/",kind:4},disableAutoFetch:{value:!1,kind:132},disableFontFace:{value:!1,kind:132},disableRange:{value:!1,kind:132},disableStream:{value:!1,kind:132},docBaseUrl:{value:"",kind:4},enableHWA:{value:!0,kind:134},enableXfa:{value:!0,kind:132},fontExtraProperties:{value:!1,kind:4},isEvalSupported:{value:!0,kind:4},isOffscreenCanvasSupported:{value:!0,kind:4},maxImageSize:{value:-1,kind:4},pdfBug:{value:!1,kind:4},standardFontDataUrl:{value:"../web/standard_fonts/",kind:4},useSystemFonts:{value:void 0,kind:4,type:I_.BOOLEAN+I_.UNDEFINED},verbosity:{value:1,kind:4},workerPort:{value:null,kind:8},workerSrc:{value:"../build/pdf.worker.mjs",kind:8},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:2},sandboxBundleSrc:{value:"../build/pdf.sandbox.mjs",kind:2},viewerCssTheme:{value:0,kind:130},enableFakeMLManager:{value:!0,kind:2},disablePreferences:{value:!1,kind:2}};class mY{static eventBus;static#e=new Map;static{for(const e in Ti)this.#e.set(e,Ti[e].value);for(const[e,t]of M_)this.#e.set(e,t);this._hasInvokedSet=!1,this._checkDisablePreferences=()=>!!this.get("disablePreferences")||(this._hasInvokedSet&&console.warn('The Preferences may override manually set AppOptions; please use the "disablePreferences"-option to prevent that.'),!1)}static get(e){return this.#e.get(e)}static getAll(e=null,t=!1){const i=Object.create(null);for(const r in Ti){const s=Ti[r];e&&!(e&s.kind)||(i[r]=t?s.value:this.#e.get(r))}return i}static set(e,t){this.setAll({[e]:t})}static setAll(e,t=!1){let i;this._hasInvokedSet||=!0;for(const r in e){const s=Ti[r],o=e[r];if(!s||!(typeof o==typeof s.value||I_[(typeof o).toUpperCase()]&s.type))continue;const{kind:a}=s;t&&!(1&a||128&a)||(this.eventBus&&16&a&&(i||=new Map).set(r,o),this.#e.set(r,o))}if(i)for(const[r,s]of i)this.eventBus.dispatch(r.toLowerCase(),{source:this,value:s})}}class vY{#e=null;constructor(e){this.pageIndex=e.pageIndex}render(){var e=this;return S(function*(t="display"){"display"!==t||e.#e||e._cancelled||(e.#e=new d9({pageIndex:e.pageIndex}))}).apply(this,arguments)}cancel(){this._cancelled=!0,this.#e&&(this.#e.destroy(),this.#e=null)}setParent(e){this.#e?.setParent(e)}getDrawLayer(){return this.#e}}const oR={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},yY=/^H(\d+)$/;class aR{#e;#t=null;#n;#i=new Map;#r;#s=null;constructor(e,t){this.#e=e.getStructTree(),this.#r=t}render(){var e=this;return S(function*(){if(e.#n)return e.#n;const{promise:t,resolve:i,reject:r}=Promise.withResolvers();e.#n=t;try{e.#t=e.#u(yield e.#e)}catch(s){r(s)}return e.#e=null,e.#t?.classList.add("structTree"),i(e.#t),t})()}getAriaAttributes(e){var t=this;return S(function*(){try{return yield t.render(),t.#i.get(e)}catch{}return null})()}hide(){this.#t&&!this.#t.hidden&&(this.#t.hidden=!0)}show(){this.#t?.hidden&&(this.#t.hidden=!1)}#l(e,t){const{alt:i,id:r,lang:s}=e;if(void 0!==i){let o=!1;const a=yc(i);for(const l of e.children)if("annotation"===l.type){let c=this.#i.get(l.id);c||(c=new Map,this.#i.set(l.id,c)),c.set("aria-label",a),o=!0}o||t.setAttribute("aria-label",a)}void 0!==r&&t.setAttribute("aria-owns",r),void 0!==s&&t.setAttribute("lang",yc(s,!0))}#c(e,t){const{alt:i,bbox:r,children:s}=e,o=s?.[0];if(!this.#r||!i||!r||"content"!==o?.type)return!1;const{id:a}=o;if(!a)return!1;t.setAttribute("aria-owns",a);const l=document.createElement("span");(this.#s||=new Map).set(a,l),l.setAttribute("role","img"),l.setAttribute("aria-label",yc(i));const{pageHeight:c,pageX:u,pageY:d}=this.#r,h="calc(var(--scale-factor)*",{style:f}=l;return f.width=`${h}${r[2]-r[0]}px)`,f.height=`${h}${r[3]-r[1]}px)`,f.left=`${h}${r[0]-u}px)`,f.top=`${h}${c-r[3]+d}px)`,!0}addElementsToTextLayer(){if(this.#s){for(const[e,t]of this.#s)document.getElementById(e)?.append(t);this.#s.clear(),this.#s=null}}#u(e){if(!e)return null;const t=document.createElement("span");if("role"in e){const{role:i}=e,r=i.match(yY);if(r?(t.setAttribute("role","heading"),t.setAttribute("aria-level",r[1])):oR[i]&&t.setAttribute("role",oR[i]),"Figure"===i&&this.#c(e,t))return t}if(this.#l(e,t),e.children)if(1===e.children.length&&"id"in e.children[0])this.#l(e.children[0],t);else for(const i of e.children)t.append(this.#u(i));return t}}class Cc{#e=!1;#t=null;#n=new Map;#i=new Map;setTextMapping(e){this.#t=e}static#r(e,t){const i=e.getBoundingClientRect(),r=t.getBoundingClientRect();if(0===i.width&&0===i.height)return 1;if(0===r.width&&0===r.height)return-1;const a=i.y+i.height/2,u=r.y+r.height/2;return a<=r.y&&u>=i.y+i.height?-1:u<=i.y&&a>=r.y+r.height?1:i.x+i.width/2-(r.x+r.width/2)}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(Cc.#r),this.#n.size>0){const e=this.#t;for(const[t,i]of this.#n)document.getElementById(t)?this.#s(t,e[i]):this.#n.delete(t)}for(const[e,t]of this.#i)this.addPointerInTextLayer(e,t);this.#i.clear()}disable(){this.#e&&(this.#i.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(e){if(!this.#e)return void this.#i.delete(e);const t=this.#t;if(!t||0===t.length)return;const{id:i}=e,r=this.#n.get(i);if(void 0===r)return;const s=t[r];this.#n.delete(i);let o=s.getAttribute("aria-owns");o?.includes(i)&&(o=o.split(" ").filter(a=>a!==i).join(" "),o?s.setAttribute("aria-owns",o):(s.removeAttribute("aria-owns"),s.setAttribute("role","presentation")))}#s(e,t){const i=t.getAttribute("aria-owns");i?.includes(e)||t.setAttribute("aria-owns",i?`${i} ${e}`:e),t.removeAttribute("role")}addPointerInTextLayer(e,t){const{id:i}=e;if(!i)return null;if(!this.#e)return this.#i.set(e,t),null;t&&this.removePointerInTextLayer(e);const r=this.#t;if(!r||0===r.length)return null;const s=_c(r,c=>Cc.#r(e,c)<0),o=Math.max(0,s-1),a=r[o];this.#s(i,a),this.#n.set(i,o);const l=a.parentNode;return l?.classList.contains("markedContent")?l.id:null}moveElementInDOM(e,t,i,r){const s=this.addPointerInTextLayer(i,r);if(!e.hasChildNodes())return e.append(t),s;const o=Array.from(e.childNodes).filter(c=>c!==t);if(0===o.length)return s;const a=i||t,l=_c(o,c=>Cc.#r(a,c)<0);return 0===l?o[0].before(t):o[l-1].after(t),s}}class _Y{#e=null;constructor({findController:e,eventBus:t,pageIndex:i}){this.findController=e,this.matches=[],this.eventBus=t,this.pageIdx=i,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(e,t){this.textDivs=e,this.textContentItemsStr=t}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this.#e||(this.#e=new AbortController,this.eventBus._on("updatetextlayermatches",e=>{(e.pageIndex===this.pageIdx||-1===e.pageIndex)&&this._updateMatches()},{signal:this.#e.signal})),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this.#e?.abort(),this.#e=null,this._updateMatches(!0))}_convertMatches(e,t){if(!e)return[];const{textContentItemsStr:i}=this;let r=0,s=0;const o=i.length-1,a=[];for(let l=0,c=e.length;l<c;l++){let u=e[l];for(;r!==o&&u>=s+i[r].length;)s+=i[r].length,r++;r===i.length&&console.error("Could not find a matching mapping");const d={begin:{divIdx:r,offset:u-s}};for(u+=t[l];r!==o&&u>s+i[r].length;)s+=i[r].length,r++;d.end={divIdx:r,offset:u-s},a.push(d)}return a}_renderMatches(e){if(0===e.length)return;const{findController:t,pageIdx:i}=this,{textContentItemsStr:r,textDivs:s}=this,o=i===t.selected.pageIdx,a=t.selected.matchIdx;let c=null;function d(m,y){const _=m.divIdx;return s[_].textContent="",h(_,0,m.offset,y)}function h(m,y,_,b){let w=s[m];if(w.nodeType===Node.TEXT_NODE){const T=document.createElement("span");w.before(T),T.append(w),s[m]=T,w=T}const A=r[m].substring(y,_),x=document.createTextNode(A);if(b){const T=document.createElement("span");return T.className=`${b} appended`,T.append(x),w.append(T),b.includes("selected")?T.offsetLeft:0}return w.append(x),0}let f=a,p=f+1;if(t.state.highlightAll)f=0,p=e.length;else if(!o)return;let g=-1,v=-1;for(let m=f;m<p;m++){const y=e[m],_=y.begin;if(_.divIdx===g&&_.offset===v)continue;g=_.divIdx,v=_.offset;const b=y.end,w=o&&m===a,A=w?" selected":"";let x=0;if(c&&_.divIdx===c.divIdx?h(c.divIdx,c.offset,_.offset):(null!==c&&h(c.divIdx,c.offset,undefined),d(_)),_.divIdx===b.divIdx)x=h(_.divIdx,_.offset,b.offset,"highlight"+A);else{x=h(_.divIdx,_.offset,undefined,"highlight begin"+A);for(let T=_.divIdx+1,E=b.divIdx;T<E;T++)s[T].className="highlight middle"+A;d(b,"highlight end"+A)}c=b,w&&t.scrollMatchIntoView({element:s[_.divIdx],selectedLeft:x,pageIndex:i,matchIndex:a})}c&&h(c.divIdx,c.offset,undefined)}_updateMatches(e=!1){if(!this.enabled&&!e)return;const{findController:t,matches:i,pageIdx:r}=this,{textContentItemsStr:s,textDivs:o}=this;let a=-1;for(const u of i){for(let h=Math.max(a,u.begin.divIdx),f=u.end.divIdx;h<=f;h++){const p=o[h];p.textContent=s[h],p.className=""}a=u.end.divIdx+1}t?.highlightMatches&&!e&&(this.matches=this._convertMatches(t.pageMatches[r]||null,t.pageMatchesLength[r]||null),this._renderMatches(this.matches))}}class da{#e=!1;#t=null;#n=!1;#i=null;static#r=new Map;static#s=null;constructor({pdfPage:e,highlighter:t=null,accessibilityManager:i=null,enablePermissions:r=!1,onAppend:s=null}){this.pdfPage=e,this.highlighter=t,this.accessibilityManager=i,this.#e=!0===r,this.#t=s,this.div=document.createElement("div"),this.div.tabIndex=0,this.div.className="textLayer"}render(e){var t=this;return S(function*(i,r=null){if(t.#n&&t.#i)return t.#i.update({viewport:i,onBefore:t.hide.bind(t)}),void t.show();t.cancel(),t.#i=new v9({textContentSource:t.pdfPage.streamTextContent(r||{includeMarkedContent:!0,disableNormalization:!0}),container:t.div,viewport:i});const{textDivs:s,textContentItemsStr:o}=t.#i;t.highlighter?.setTextMapping(s,o),t.accessibilityManager?.setTextMapping(s),yield t.#i.render(),t.#n=!0;const a=document.createElement("div");a.className="endOfContent",t.div.append(a),t.#l(a),t.#t?.(t.div),t.highlighter?.enable(),t.accessibilityManager?.enable()}).apply(this,arguments)}hide(){!this.div.hidden&&this.#n&&(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.#n&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.#i?.cancel(),this.#i=null,this.highlighter?.disable(),this.accessibilityManager?.disable(),da.#c(this.div)}#l(e){const{div:t}=this;t.addEventListener("mousedown",()=>{t.classList.add("selecting")}),t.addEventListener("copy",i=>{if(!this.#e){const r=document.getSelection();i.clipboardData.setData("text/plain",yc(p9(r.toString())))}i.preventDefault(),i.stopPropagation()}),da.#r.set(t,e),da.#u()}static#c(e){this.#r.delete(e),0===this.#r.size&&(this.#s?.abort(),this.#s=null)}static#u(){if(this.#s)return;this.#s=new AbortController;const{signal:e}=this.#s,t=(o,a)=>{a.append(o),o.style.width="",o.style.height="",a.classList.remove("selecting")};let i=!1;var r,s;document.addEventListener("pointerdown",()=>{i=!0},{signal:e}),document.addEventListener("pointerup",()=>{i=!1,this.#r.forEach(t)},{signal:e}),window.addEventListener("blur",()=>{i=!1,this.#r.forEach(t)},{signal:e}),document.addEventListener("keyup",()=>{i||this.#r.forEach(t)},{signal:e}),document.addEventListener("selectionchange",()=>{const o=document.getSelection();if(0===o.rangeCount)return void this.#r.forEach(t);const a=new Set;for(let f=0;f<o.rangeCount;f++){const p=o.getRangeAt(f);for(const g of this.#r.keys())!a.has(g)&&p.intersectsNode(g)&&a.add(g)}for(const[f,p]of this.#r)a.has(f)?f.classList.add("selecting"):t(p,f);if(r??="none"===getComputedStyle(this.#r.values().next().value).getPropertyValue("-moz-user-select"),r)return;const l=o.getRangeAt(0),c=s&&(0===l.compareBoundaryPoints(Range.END_TO_END,s)||0===l.compareBoundaryPoints(Range.START_TO_END,s));let u=c?l.startContainer:l.endContainer;u.nodeType===Node.TEXT_NODE&&(u=u.parentNode);const d=u.parentElement?.closest(".textLayer"),h=this.#r.get(d);h&&(h.style.width=d.style.width,h.style.height=d.style.height,u.parentElement.insertBefore(h,c?u:u.nextSibling)),s=l.cloneRange()},{signal:e})}}class lR{constructor({pdfPage:e,annotationStorage:t=null,linkService:i,xfaHtml:r=null}){this.pdfPage=e,this.annotationStorage=t,this.linkService=i,this.xfaHtml=r,this.div=null,this._cancelled=!1}render(e){var t=this;return S(function*(i,r="display"){if("print"===r){const a={viewport:i.clone({dontFlip:!0}),div:t.div,xfaHtml:t.xfaHtml,annotationStorage:t.annotationStorage,linkService:t.linkService,intent:r};return t.div=document.createElement("div"),a.div=t.div,y_.render(a)}const s=yield t.pdfPage.getXfa();if(t._cancelled||!s)return{textDivs:[]};const o={viewport:i.clone({dontFlip:!0}),div:t.div,xfaHtml:s,annotationStorage:t.annotationStorage,linkService:t.linkService,intent:r};return t.div?y_.update(o):(t.div=document.createElement("div"),o.div=t.div,y_.render(o))}).apply(this,arguments)}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}const bY={annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new m_}},wY=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]);class cR{#e=ir.ENABLE_FORMS;#t=!1;#n=!1;#i=!1;#r=null;#s=null;#l=null;#c=1;#u=1;#a=null;#d=tt.INITIAL;#o=1;#h={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#p=new WeakMap;#f=[null,null,null,null];constructor(e){const t=e.container,i=e.defaultViewport;this.id=e.id,this.renderingId="page"+this.id,this.#r=e.layerProperties||bY,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=e.scale||1,this.viewport=i,this.pdfPageRotate=i.rotation,this._optionalContentConfigPromise=e.optionalContentConfigPromise||null,this.#o=e.textLayerMode??1,this.#e=e.annotationMode??ir.ENABLE_FORMS,this.imageResourcesPath=e.imageResourcesPath||"",this.maxCanvasPixels=e.maxCanvasPixels??mY.get("maxCanvasPixels"),this.pageColors=e.pageColors||null,this.#t=e.enableHWA||!1,this.eventBus=e.eventBus,this.renderingQueue=e.renderingQueue,this.l10n=e.l10n,this.l10n||=new or,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=t,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null;const r=document.createElement("div");if(r.className="page",r.setAttribute("data-page-number",this.id),r.setAttribute("role","region"),r.setAttribute("data-l10n-id","pdfjs-page-landmark"),r.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=r,this.#v(),t?.append(r),this._isStandalone){t?.style.setProperty("--scale-factor",this.scale*rr.PDF_TO_CSS_UNITS),this.pageColors?.background&&t?.style.setProperty("--page-bg-color",this.pageColors.background);const{optionalContentConfigPromise:s}=e;s&&s.then(o=>{s===this._optionalContentConfigPromise&&(this.#h.initialOptionalContent=o.hasInitialVisibility)}),e.l10n||this.l10n.translate(this.div)}}#g(e,t){const i=wY.get(t),r=this.#f[i];if(this.#f[i]=e,r)r.replaceWith(e);else{for(let s=i-1;s>=0;s--){const o=this.#f[s];if(o)return void o.after(e)}this.div.prepend(e)}}get renderingState(){return this.#d}set renderingState(e){if(e!==this.#d)switch(this.#d=e,this.#s&&(clearTimeout(this.#s),this.#s=null),e){case tt.PAUSED:this.div.classList.remove("loading");break;case tt.RUNNING:this.div.classList.add("loadingIcon"),this.#s=setTimeout(()=>{this.div.classList.add("loading"),this.#s=null},0);break;case tt.INITIAL:case tt.FINISHED:this.div.classList.remove("loadingIcon","loading")}}#v(){const{viewport:e}=this;if(this.pdfPage){if(this.#l===e.rotation)return;this.#l=e.rotation}m9(this.div,e,!0,!1)}setPdfPage(e){this._isStandalone&&("CanvasText"===this.pageColors?.foreground||"Canvas"===this.pageColors?.background)&&(this._container?.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),this._container?.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=e,this.pdfPageRotate=e.rotate,this.viewport=e.getViewport({scale:this.scale*rr.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.#v(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}get _textHighlighter(){return Uh(this,"_textHighlighter",new _Y({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#r.findController}))}#m(e,t){this.eventBus.dispatch(e,{source:this,pageNumber:this.id,error:t})}#y(){var e=this;return S(function*(){let t=null;try{yield e.annotationLayer.render(e.viewport,{structTreeLayer:e.structTreeLayer},"display")}catch(i){console.error(`#renderAnnotationLayer: "${i}".`),t=i}finally{e.#m("annotationlayerrendered",t)}})()}#b(){var e=this;return S(function*(){let t=null;try{yield e.annotationEditorLayer.render(e.viewport,"display")}catch(i){console.error(`#renderAnnotationEditorLayer: "${i}".`),t=i}finally{e.#m("annotationeditorlayerrendered",t)}})()}#C(){var e=this;return S(function*(){try{yield e.drawLayer.render("display")}catch(t){console.error(`#renderDrawLayer: "${t}".`)}})()}#w(){var e=this;return S(function*(){let t=null;try{const i=yield e.xfaLayer.render(e.viewport,"display");i?.textDivs&&e._textHighlighter&&e.#M(i.textDivs)}catch(i){console.error(`#renderXfaLayer: "${i}".`),t=i}finally{e.xfaLayer?.div&&(e.l10n.pause(),e.#g(e.xfaLayer.div,"xfaLayer"),e.l10n.resume()),e.#m("xfalayerrendered",t)}})()}#E(){var e=this;return S(function*(){if(!e.textLayer)return;let t=null;try{yield e.textLayer.render(e.viewport)}catch(i){if(i instanceof o9)return;console.error(`#renderTextLayer: "${i}".`),t=i}e.#m("textlayerrendered",t),e.#T()})()}#T(){var e=this;return S(function*(){if(!e.textLayer)return;const t=yield e.structTreeLayer?.render();t&&(e.l10n.pause(),e.structTreeLayer?.addElementsToTextLayer(),e.canvas&&t.parentNode!==e.canvas&&e.canvas.append(t),e.l10n.resume()),e.structTreeLayer?.show()})()}#M(e){var t=this;return S(function*(){const i=yield t.pdfPage.getTextContent(),r=[];for(const s of i.items)r.push(s.str);t._textHighlighter.setTextMapping(e,r),t._textHighlighter.enable()})()}_resetZoomLayer(e=!1){if(!this.zoomLayer)return;const t=this.zoomLayer.firstChild;this.#p.delete(t),t.width=0,t.height=0,e&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:e=!1,keepAnnotationLayer:t=!1,keepAnnotationEditorLayer:i=!1,keepXfaLayer:r=!1,keepTextLayer:s=!1}={}){this.cancelRendering({keepAnnotationLayer:t,keepAnnotationEditorLayer:i,keepXfaLayer:r,keepTextLayer:s}),this.renderingState=tt.INITIAL;const o=this.div,a=o.childNodes,l=e&&this.zoomLayer||null,c=t&&this.annotationLayer?.div||null,u=i&&this.annotationEditorLayer?.div||null,d=r&&this.xfaLayer?.div||null,h=s&&this.textLayer?.div||null;for(let f=a.length-1;f>=0;f--){const p=a[f];switch(p){case l:case c:case u:case d:case h:continue}p.remove();const g=this.#f.indexOf(p);g>=0&&(this.#f[g]=null)}o.removeAttribute("data-loaded"),c&&this.annotationLayer.hide(),u&&this.annotationEditorLayer.hide(),d&&this.xfaLayer.hide(),h&&this.textLayer.hide(),this.structTreeLayer?.hide(),l||(this.canvas&&(this.#p.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}toggleEditingMode(e){this.hasEditableAnnotations()&&(this.#i=e,this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0}))}update({scale:e=0,rotation:t=null,optionalContentConfigPromise:i=null,drawingDelay:r=-1}){if(this.scale=e||this.scale,"number"==typeof t&&(this.rotation=t),i instanceof Promise&&(this._optionalContentConfigPromise=i,i.then(o=>{i===this._optionalContentConfigPromise&&(this.#h.initialOptionalContent=o.hasInitialVisibility)})),this.#h.directDrawing=!0,this.viewport=this.viewport.clone({scale:this.scale*rr.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.#v(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.canvas){let o=!1;if(this.#n)if(0===this.maxCanvasPixels)o=!0;else if(this.maxCanvasPixels>0){const{width:l,height:c}=this.viewport,{sx:u,sy:d}=this.outputScale;o=(Math.floor(l)*u|0)*(Math.floor(c)*d|0)>this.maxCanvasPixels}const a=r>=0&&r<1e3;if(a||o){if(a&&!o&&this.renderingState!==tt.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:r}),this.renderingState=tt.FINISHED,this.#h.directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!a,hideTextLayer:a}),a)return;return void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#a})}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:e=!1,keepAnnotationEditorLayer:t=!1,keepXfaLayer:i=!1,keepTextLayer:r=!1,cancelExtraDelay:s=0}={}){this.renderTask&&(this.renderTask.cancel(s),this.renderTask=null),this.resume=null,this.textLayer&&(!r||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!e||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationEditorLayer&&(!t||!this.annotationEditorLayer.div)&&(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!i||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target:e,redrawAnnotationLayer:t=!1,redrawAnnotationEditorLayer:i=!1,redrawXfaLayer:r=!1,redrawTextLayer:s=!1,hideTextLayer:o=!1}){if(!e.hasAttribute("zooming")){e.setAttribute("zooming",!0);const{style:l}=e;l.width=l.height=""}const a=this.#p.get(e);if(this.viewport!==a){const l=this.viewport.rotation-a.rotation,c=Math.abs(l);let u=1,d=1;if(90===c||270===c){const{width:h,height:f}=this.viewport;u=f/h,d=h/f}e.style.transform=`rotate(${l}deg) scale(${u}, ${d})`}t&&this.annotationLayer&&this.#y(),i&&this.annotationEditorLayer&&(this.drawLayer&&this.#C(),this.#b()),r&&this.xfaLayer&&this.#w(),this.textLayer&&(o?(this.textLayer.hide(),this.structTreeLayer?.hide()):s&&this.#E())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(e,t){return this.viewport.convertToPdfPoint(e,t)}#A(e){var t=this;return S(function*(i,r=null){if(i===t.renderTask&&(t.renderTask=null),r instanceof v_)t.#a=null;else if(t.#a=r,t.renderingState=tt.FINISHED,t._resetZoomLayer(!0),t.#h.regularAnnotations=!i.separateAnnots,t.eventBus.dispatch("pagerendered",{source:t,pageNumber:t.id,cssTransform:!1,timestamp:performance.now(),error:t.#a}),r)throw r}).apply(this,arguments)}draw(){var e=this;return S(function*(){e.renderingState!==tt.INITIAL&&(console.error("Must be in new state before drawing"),e.reset());const{div:t,l10n:i,pageColors:r,pdfPage:s,viewport:o}=e;if(!s)throw e.renderingState=tt.FINISHED,new Error("pdfPage is not loaded");e.renderingState=tt.RUNNING;const a=document.createElement("div");if(a.classList.add("canvasWrapper"),e.#g(a,"canvasWrapper"),!e.textLayer&&0!==e.#o&&!s.isPureXfa&&(e._accessibilityManager||=new Cc,e.textLayer=new da({pdfPage:s,highlighter:e._textHighlighter,accessibilityManager:e._accessibilityManager,enablePermissions:2===e.#o,onAppend:D=>{e.l10n.pause(),e.#g(D,"textLayer"),e.l10n.resume()}})),!e.annotationLayer&&e.#e!==ir.DISABLE){const{annotationStorage:D,annotationEditorUIManager:k,downloadManager:ue,enableScripting:ce,fieldObjectsPromise:de,hasJSActionsPromise:Te,linkService:nt}=e.#r;e._annotationCanvasMap||=new Map,e.annotationLayer=new VP({pdfPage:s,annotationStorage:D,imageResourcesPath:e.imageResourcesPath,renderForms:e.#e===ir.ENABLE_FORMS,linkService:nt,downloadManager:ue,enableScripting:ce,hasJSActionsPromise:Te,fieldObjectsPromise:de,annotationCanvasMap:e._annotationCanvasMap,accessibilityManager:e._accessibilityManager,annotationEditorUIManager:k,onAppend:B=>{e.#g(B,"annotationLayer")}})}const{width:c,height:u}=o,d=document.createElement("canvas");d.setAttribute("role","presentation"),d.hidden=!0;const h=!(!r?.background||!r?.foreground);let f=D=>{(!h||D)&&(d.hidden=!1,f=null)};a.append(d),e.canvas=d;const p=d.getContext("2d",{alpha:!1,willReadFrequently:!e.#t}),g=e.outputScale=new g9;if(0===e.maxCanvasPixels){const D=1/e.scale;g.sx*=D,g.sy*=D,e.#n=!0}else if(e.maxCanvasPixels>0){const k=Math.sqrt(e.maxCanvasPixels/(c*u));g.sx>k||g.sy>k?(g.sx=k,g.sy=k,e.#n=!0):e.#n=!1}const v=MP(g.sx),m=MP(g.sy),y=d.width=Lh(Vh(c*g.sx),v[0]),_=d.height=Lh(Vh(u*g.sy),m[0]),b=Lh(Vh(c),v[1]),w=Lh(Vh(u),m[1]);g.sx=y/b,g.sy=_/w,e.#c!==v[1]&&(t.style.setProperty("--scale-round-x",`${v[1]}px`),e.#c=v[1]),e.#u!==m[1]&&(t.style.setProperty("--scale-round-y",`${m[1]}px`),e.#u=m[1]),e.#p.set(d,o);const x={canvasContext:p,transform:g.scaled?[g.sx,0,0,g.sy,0,0]:null,viewport:o,annotationMode:e.#e,optionalContentConfigPromise:e._optionalContentConfigPromise,annotationCanvasMap:e._annotationCanvasMap,pageColors:r,isEditing:e.#i},T=e.renderTask=s.render(x);T.onContinue=D=>{if(f?.(!1),e.renderingQueue&&!e.renderingQueue.isHighestPriority(e))return e.renderingState=tt.PAUSED,void(e.resume=()=>{e.renderingState=tt.RUNNING,D()});D()};const E=T.promise.then(S(function*(){f?.(!0),yield e.#A(T),e.structTreeLayer||=new aR(s,o.rawDims),e.#E(),e.annotationLayer&&(yield e.#y());const{annotationEditorUIManager:D}=e.#r;D&&(e.drawLayer||=new vY({pageIndex:e.id}),yield e.#C(),e.drawLayer.setParent(a),e.annotationEditorLayer||=new gY({uiManager:D,pdfPage:s,l10n:i,structTreeLayer:e.structTreeLayer,accessibilityManager:e._accessibilityManager,annotationLayer:e.annotationLayer?.annotationLayer,textLayer:e.textLayer,drawLayer:e.drawLayer.getDrawLayer(),onAppend:k=>{e.#g(k,"annotationEditorLayer")}}),e.#b())}),D=>(D instanceof v_||f?.(!0),e.#A(T,D)));if(s.isPureXfa){if(!e.xfaLayer){const{annotationStorage:D,linkService:k}=e.#r;e.xfaLayer=new lR({pdfPage:s,annotationStorage:D,linkService:k})}e.#w()}return t.setAttribute("data-loaded",!0),e.eventBus.dispatch("pagerender",{source:e,pageNumber:e.id}),E})()}setPageLabel(e){this.pageLabel="string"==typeof e?e:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:this.pageLabel??this.id})),null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{directDrawing:e,initialOptionalContent:t,regularAnnotations:i}=this.#h;return e&&t&&i?this.canvas:null}}function x_(){return(x_=S(function*(n){const t="".split("#",1)[0];let{info:i,metadata:r,contentDispositionFilename:s,contentLength:o}=yield n.getMetadata();if(!o){const{length:a}=yield n.getDownloadInfo();o=a}return{...i,baseURL:t,filesize:o,filename:s||h9(""),metadata:r?.getRaw(),authors:r?.get("dc:creator"),numPages:n.numPages,URL:""}})).apply(this,arguments)}class CY{constructor(e){this._ready=new Promise((t,i)=>{import(e).then(s=>{t(s.QuickJSSandbox())}).catch(i)})}createSandbox(e){var t=this;return S(function*(){(yield t._ready).create(e)})()}dispatchEventInSandbox(e){var t=this;return S(function*(){const i=yield t._ready;setTimeout(()=>i.dispatchEvent(e),0)})()}destroySandbox(){var e=this;return S(function*(){(yield e._ready).nukeSandbox()})()}}class AY{#e=null;#t=null;#n=null;#i=null;#r=null;#s=null;#l=null;#c=null;#u=!1;#a=null;#d=null;constructor({eventBus:e,externalServices:t=null,docProperties:i=null}){this.#r=e,this.#s=t,this.#n=i}setViewer(e){this.#c=e}setDocument(e){var t=this;return S(function*(){if(t.#l&&(yield t.#g()),t.#l=e,!e)return;const[i,r,s]=yield Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(!i&&!s)return void(yield t.#g());if(e!==t.#l)return;try{t.#a=t.#f()}catch(l){return console.error(`setDocument: "${l.message}".`),void(yield t.#g())}const o=t.#r;t.#i=new AbortController;const{signal:a}=t.#i;o._on("updatefromsandbox",l=>{l?.source===window&&t.#o(l.detail)},{signal:a}),o._on("dispatcheventinsandbox",l=>{t.#a?.dispatchEventInSandbox(l.detail)},{signal:a}),o._on("pagechanging",({pageNumber:l,previous:c})=>{l!==c&&(t.#p(c),t.#h(l))},{signal:a}),o._on("pagerendered",({pageNumber:l})=>{t._pageOpenPending.has(l)&&l===t.#c.currentPageNumber&&t.#h(l)},{signal:a}),o._on("pagesdestroy",S(function*(){yield t.#p(t.#c.currentPageNumber),yield t.#a?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),t.#e?.resolve()}),{signal:a});try{const l=yield t.#n(e);if(e!==t.#l)return;yield t.#a.createSandbox({objects:i,calculationOrder:r,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...l,actions:s}}),o.dispatch("sandboxcreated",{source:t})}catch(l){return console.error(`setDocument: "${l.message}".`),void(yield t.#g())}yield t.#a?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield t.#h(t.#c.currentPageNumber,!0),Promise.resolve().then(()=>{e===t.#l&&(t.#u=!0)})})()}dispatchWillSave(){var e=this;return S(function*(){return e.#a?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(){var e=this;return S(function*(){return e.#a?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(){var e=this;return S(function*(){if(e.#a){yield e.#d?.promise,e.#d=Promise.withResolvers();try{yield e.#a.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(t){throw e.#d.resolve(),e.#d=null,t}yield e.#d.promise}})()}dispatchDidPrint(){var e=this;return S(function*(){return e.#a?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get destroyPromise(){return this.#t?.promise||null}get ready(){return this.#u}get _pageOpenPending(){return Uh(this,"_pageOpenPending",new Set)}get _visitedPages(){return Uh(this,"_visitedPages",new Map)}#o(e){var t=this;return S(function*(){const i=t.#c,r=i.isInPresentationMode||i.isChangingPresentationMode,{id:s,siblings:o,command:a,value:l}=e;if(!s){switch(a){case"clear":console.clear();break;case"error":console.error(l);break;case"layout":if(!r){const u=function F6(n){let e=ge.VERTICAL,t=Ut.NONE;switch(n){case"SinglePage":e=ge.PAGE;break;case"OneColumn":break;case"TwoPageLeft":e=ge.PAGE;case"TwoColumnLeft":t=Ut.ODD;break;case"TwoPageRight":e=ge.PAGE;case"TwoColumnRight":t=Ut.EVEN}return{scrollMode:e,spreadMode:t}}(l);i.spreadMode=u.spreadMode}break;case"page-num":i.currentPageNumber=l+1;break;case"print":yield i.pagesPromise,t.#r.dispatch("print",{source:t});break;case"println":console.log(l);break;case"zoom":r||(i.currentScaleValue=l);break;case"SaveAs":t.#r.dispatch("download",{source:t});break;case"FirstPage":i.currentPageNumber=1;break;case"LastPage":i.currentPageNumber=i.pagesCount;break;case"NextPage":i.nextPage();break;case"PrevPage":i.previousPage();break;case"ZoomViewIn":r||i.increaseScale();break;case"ZoomViewOut":r||i.decreaseScale();break;case"WillPrintFinished":t.#d?.resolve(),t.#d=null}return}if(r&&e.focus)return;delete e.id,delete e.siblings;const c=o?[s,...o]:[s];for(const u of c){const d=document.querySelector(`[data-element-id="${u}"]`);d?d.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e})):t.#l?.annotationStorage.setValue(u,e)}})()}#h(e){var t=this;return S(function*(i,r=!1){const s=t.#l,o=t._visitedPages;if(r&&(t.#e=Promise.withResolvers()),!t.#e)return;const a=t.#c.getPageView(i-1);if(a?.renderingState!==tt.FINISHED)return void t._pageOpenPending.add(i);t._pageOpenPending.delete(i);const l=S(function*(){const c=yield o.has(i)?null:a.pdfPage?.getJSActions();s===t.#l&&(yield t.#a?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:i,actions:c}))})();o.set(i,l)}).apply(this,arguments)}#p(e){var t=this;return S(function*(){const i=t.#l,r=t._visitedPages;if(!t.#e||t._pageOpenPending.has(e))return;const s=r.get(e);s&&(r.set(e,null),yield s,i===t.#l&&(yield t.#a?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e})))})()}#f(){if(this.#t=Promise.withResolvers(),this.#a)throw new Error("#initScripting: Scripting already exists.");return this.#s.createScripting()}#g(){var e=this;return S(function*(){if(!e.#a)return e.#l=null,void e.#t?.resolve();e.#e&&(yield Promise.race([e.#e.promise,new Promise(t=>{setTimeout(t,1e3)})]).catch(()=>{}),e.#e=null),e.#l=null;try{yield e.#a.destroySandbox()}catch{}e.#d?.reject(new Error("Scripting destroyed.")),e.#d=null,e.#i?.abort(),e.#i=null,e._pageOpenPending.clear(),e._visitedPages.clear(),e.#a=null,e.#u=!1,e.#t?.resolve()})()}}class DY extends AY{constructor(e){e.externalServices||window.addEventListener("updatefromsandbox",t=>{e.eventBus.dispatch("updatefromsandbox",{source:window,detail:t.detail})}),e.externalServices||={createScripting:()=>new CY(e.sandboxBundleSrc)},e.docProperties||=t=>function EY(n){return x_.apply(this,arguments)}(t),super(e)}}class MY{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}renderHighestPriority(e){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(e)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(e,t,i,r=!1){const s=e.views,o=s.length;if(0===o)return null;for(let d=0;d<o;d++){const h=s[d].view;if(!this.isViewFinished(h))return h}const a=e.first.id,l=e.last.id;if(l-a+1>o){const d=e.ids;for(let h=1,f=l-a;h<f;h++){const p=i?a+h:l-h;if(d.has(p))continue;const g=t[p-1];if(!this.isViewFinished(g))return g}}let c=i?l:a-2,u=t[c];return u&&!this.isViewFinished(u)||r&&(c+=i?1:-1,u=t[c],u&&!this.isViewFinished(u))?u:null}isViewFinished(e){return e.renderingState===tt.FINISHED}renderView(e){switch(e.renderingState){case tt.FINISHED:return!1;case tt.PAUSED:this.highestPriorityPage=e.renderingId,e.resume();break;case tt.RUNNING:this.highestPriorityPage=e.renderingId;break;case tt.INITIAL:this.highestPriorityPage=e.renderingId,e.draw().finally(()=>{this.renderHighestPriority()}).catch(t=>{t instanceof v_||console.error(`renderView: "${t}"`)})}return!0}}function dR(n){return Object.values(In).includes(n)&&n!==In.DISABLE}class IY{#e=new Set;#t=0;constructor(e){this.#t=e}push(e){const t=this.#e;t.has(e)&&t.delete(e),t.add(e),t.size>this.#t&&this.#n()}resize(e,t=null){this.#t=e;const i=this.#e;if(t){const r=i.size;let s=1;for(const o of i)if(t.has(o.id)&&(i.delete(o),i.add(o)),++s>r)break}for(;i.size>this.#t;)this.#n()}has(e){return this.#e.has(e)}[Symbol.iterator](){return this.#e.keys()}#n(){const e=this.#e.keys().next().value;e?.destroy(),this.#e.delete(e)}}class hR{#e=null;#t=null;#n=null;#i=In.NONE;#r=null;#s=ir.ENABLE_FORMS;#l=null;#c=!1;#u=!1;#a=!1;#d=!1;#o=!1;#h=null;#p=null;#f=null;#g=null;#v=!1;#m=null;#y=!1;#b=0;#C=new ResizeObserver(this.#V.bind(this));#w=null;#E=null;#T=1;constructor(e){const t="4.8.69";if(LP!==t)throw new Error(`The API version "${LP}" does not match the Viewer version "${t}".`);if(this.container=e.container,this.viewer=e.viewer||e.container.firstElementChild,"DIV"!==this.container?.tagName||"DIV"!==this.viewer?.tagName)throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.#C.observe(this.container),this.eventBus=e.eventBus,this.linkService=e.linkService||new m_,this.downloadManager=e.downloadManager||null,this.findController=e.findController||null,this.#t=e.altTextManager||null,this.findController&&(this.findController.onIsPageVisible=r=>this._getVisiblePages().ids.has(r)),this._scriptingManager=e.scriptingManager||null,this.#T=e.textLayerMode??1,this.#s=e.annotationMode??ir.ENABLE_FORMS,this.#i=e.annotationEditorMode??In.NONE,this.#n=e.annotationEditorHighlightColors||null,this.#u=!0===e.enableHighlightFloatingButton,this.#d=!0===e.enableUpdatedAddImage,this.#o=!0===e.enableNewAltTextWhenAddingImage,this.imageResourcesPath=e.imageResourcesPath||"",this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1,this.removePageBorders=e.removePageBorders||!1,this.maxCanvasPixels=e.maxCanvasPixels,this.l10n=e.l10n,this.l10n||=new or,this.#a=e.enablePermissions||!1,this.pageColors=e.pageColors||null,this.#p=e.mlManager||null,this.#c=e.enableHWA||!1,this.defaultRenderingQueue=!e.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new MY,this.renderingQueue.setViewer(this)):this.renderingQueue=e.renderingQueue;const{abortSignal:i}=e;i?.addEventListener("abort",()=>{this.#C.disconnect(),this.#C=null},{once:!0}),this.scroll=function M6(n,e,t){const i=function(o){s||(s=window.requestAnimationFrame(function(){s=null;const l=n.scrollLeft,c=r.lastX;l!==c&&(r.right=l>c),r.lastX=l;const u=n.scrollTop,d=r.lastY;u!==d&&(r.down=u>d),r.lastY=u,e(r)}))},r={right:!0,down:!0,lastX:n.scrollLeft,lastY:n.scrollTop,_eventHandler:i};let s=null;return n.addEventListener("scroll",i,{useCapture:!0,signal:t}),t?.addEventListener("abort",()=>window.cancelAnimationFrame(s),{once:!0}),r}(this.container,this._scrollUpdate.bind(this),i),this.presentationModeState=0,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#F(),this.eventBus._on("thumbnailrendered",({pageNumber:r,pdfPage:s})=>{this.#e.has(this._pages[r-1])||s?.cleanup()}),e.l10n||this.l10n.translate(this.container)}get pagesCount(){return this._pages.length}getPageView(e){return this._pages[e]}getCachedPageViews(){return new Set(this.#e)}get pageViewsReady(){return this._pages.every(e=>e?.pdfPage)}get renderForms(){return this.#s===ir.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(e){if(!Number.isInteger(e))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(e,!0)||console.error(`currentPageNumber: "${e}" is not a valid page.`))}_setCurrentPageNumber(e,t=!1){if(this._currentPageNumber===e)return t&&this.#R(),!0;if(!(0<e&&e<=this.pagesCount))return!1;const i=this._currentPageNumber;return this._currentPageNumber=e,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:this._pageLabels?.[e-1]??null,previous:i}),t&&this.#R(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(e){if(!this.pdfDocument)return;let t=0|e;if(this._pageLabels){const i=this._pageLabels.indexOf(e);i>=0&&(t=i+1)}this._setCurrentPageNumber(t,!0)||console.error(`currentPageLabel: "${e}" is not a valid page.`)}get currentScale(){return 0!==this._currentScale?this._currentScale:1}set currentScale(e){if(isNaN(e))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#x(e,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(e){this.pdfDocument&&this.#x(e,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!IP(e))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((e%=360)<0&&(e+=360),this._pagesRotation===e))return;this._pagesRotation=e;const t=this._currentPageNumber;this.refresh(!0,{rotation:e}),this._currentScaleValue&&this.#x(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _layerProperties(){const e=this;return Uh(this,"_layerProperties",{get annotationEditorUIManager(){return e.#r},get annotationStorage(){return e.pdfDocument?.annotationStorage},get downloadManager(){return e.downloadManager},get enableScripting(){return!!e._scriptingManager},get fieldObjectsPromise(){return e.pdfDocument?.getFieldObjects()},get findController(){return e.findController},get hasJSActionsPromise(){return e.pdfDocument?.hasJSActions()},get linkService(){return e.linkService}})}#M(e){const t={annotationEditorMode:this.#i,annotationMode:this.#s,textLayerMode:this.#T};return e&&(!e.includes(Hh.COPY)&&1===this.#T&&(t.textLayerMode=2),e.includes(Hh.MODIFY_CONTENTS)||(t.annotationEditorMode=In.DISABLE),!e.includes(Hh.MODIFY_ANNOTATIONS)&&!e.includes(Hh.FILL_INTERACTIVE_FORMS)&&this.#s===ir.ENABLE_FORMS&&(t.annotationMode=ir.ENABLE)),t}#A(e){var t=this;return S(function*(){if("hidden"===document.visibilityState||!t.container.offsetParent||0===t._getVisiblePages().views.length)return;const i=Promise.withResolvers(),r=new AbortController;document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&i.resolve()},{signal:"function"==typeof AbortSignal.any?AbortSignal.any([e,r.signal]):e}),yield Promise.race([t._onePageRenderedCapability.promise,i.promise]),r.abort()})()}getAllText(){var e=this;return S(function*(){const t=[],i=[];for(let r=1,s=e.pdfDocument.numPages;r<=s;++r){if(e.#y)return null;i.length=0;const o=yield e.pdfDocument.getPage(r),{items:a}=yield o.getTextContent();for(const l of a)l.str&&i.push(l.str),l.hasEOL&&i.push("\n");t.push(yc(i.join("")))}return t.join("\n")})()}#I(e,t){const i=document.getSelection(),{focusNode:r,anchorNode:s}=i;if(s&&r&&i.containsNode(this.#m)){if(this.#v||2===e)return t.preventDefault(),void t.stopPropagation();this.#v=!0;const{classList:o}=this.viewer;o.add("copyAll");const a=new AbortController;window.addEventListener("keydown",l=>this.#y="Escape"===l.key,{signal:a.signal}),this.getAllText().then(function(){var l=S(function*(c){null!==c&&(yield navigator.clipboard.writeText(c))});return function(c){return l.apply(this,arguments)}}()).catch(l=>{console.warn(`Something goes wrong when extracting the text: ${l.message}`)}).finally(()=>{this.#v=!1,this.#y=!1,a.abort(),o.remove("copyAll")}),t.preventDefault(),t.stopPropagation()}}setDocument(e){var t=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#r?.destroy(),this.#r=null),this.pdfDocument=e,!e)return;const i=e.numPages,r=e.getPage(1),s=e.getOptionalContentConfig({intent:"display"}),o=this.#a?e.getPermissions():Promise.resolve(),{eventBus:a,pageColors:l,viewer:c}=this;this.#h=new AbortController;const{signal:u}=this.#h;if(i>1e4){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const f=this._scrollMode=ge.PAGE;a.dispatch("scrollmodechanged",{source:this,mode:f})}this._pagesCapability.promise.then(()=>{a.dispatch("pagesloaded",{source:this,pagesCount:i})},()=>{}),a._on("pagerender",f=>{const p=this._pages[f.pageNumber-1];p&&this.#e.push(p)},{signal:u});const h=f=>{f.cssTransform||(this._onePageRenderedCapability.resolve({timestamp:f.timestamp}),a._off("pagerendered",h))};a._on("pagerendered",h,{signal:u}),Promise.all([r,o]).then(([f,p])=>{if(e!==this.pdfDocument)return;this._firstPageCapability.resolve(f),this._optionalContentConfigPromise=s;const{annotationEditorMode:g,annotationMode:v,textLayerMode:m}=this.#M(p);if(0!==m){const w=this.#m=document.createElement("div");w.id="hiddenCopyElement",c.before(w)}if("function"==typeof AbortSignal.any&&g!==In.DISABLE){const w=g;e.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):dR(w)?(this.#r=new l9(this.container,c,this.#t,a,e,l,this.#n,this.#u,this.#d,this.#o,this.#p),a.dispatch("annotationeditoruimanager",{source:this,uiManager:this.#r}),w!==In.NONE&&(w===In.STAMP&&this.#p?.loadModel("altText"),this.#r.updateMode(w))):console.error(`Invalid AnnotationEditor mode: ${w}`)}const y=this._scrollMode===ge.PAGE?null:c,_=this.currentScale,b=f.getViewport({scale:_*rr.PDF_TO_CSS_UNITS});c.style.setProperty("--scale-factor",b.scale),l?.background&&c.style.setProperty("--page-bg-color",l.background),("CanvasText"===l?.foreground||"Canvas"===l?.background)&&(c.style.setProperty("--hcm-highlight-filter",e.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),c.style.setProperty("--hcm-highlight-selected-filter",e.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText")));for(let w=1;w<=i;++w){const A=new cR({container:y,eventBus:a,id:w,scale:_,defaultViewport:b.clone(),optionalContentConfigPromise:s,renderingQueue:this.renderingQueue,textLayerMode:m,annotationMode:v,imageResourcesPath:this.imageResourcesPath,maxCanvasPixels:this.maxCanvasPixels,pageColors:l,l10n:this.l10n,layerProperties:this._layerProperties,enableHWA:this.#c});this._pages.push(A)}this._pages[0]?.setPdfPage(f),this._scrollMode===ge.PAGE?this.#S():this._spreadMode!==Ut.NONE&&this._updateSpreadMode(),this.#A(u).then(S(function*(){if(e!==t.pdfDocument)return;if(t.findController?.setDocument(e),t._scriptingManager?.setDocument(e),t.#m&&document.addEventListener("copy",t.#I.bind(t,m),{signal:u}),t.#r&&a.dispatch("annotationeditormodechanged",{source:t,mode:t.#i}),e.loadingParams.disableAutoFetch||i>5e3)return void t._pagesCapability.resolve();let w=i-1;if(w<=0)t._pagesCapability.resolve();else for(let A=2;A<=i;++A){const x=e.getPage(A).then(T=>{const E=t._pages[A-1];E.pdfPage||E.setPdfPage(T),0==--w&&t._pagesCapability.resolve()},T=>{console.error(`Unable to get page ${A} to initialize viewer`,T),0==--w&&t._pagesCapability.resolve()});A%250==0&&(yield x)}})),a.dispatch("pagesinit",{source:this}),e.getMetadata().then(({info:w})=>{e===this.pdfDocument&&w.Language&&(c.lang=w.Language)}),this.defaultRenderingQueue&&this.update()}).catch(f=>{console.error("Unable to initialize viewer",f),this._pagesCapability.reject(f)})}setPageLabels(e){if(this.pdfDocument){e?Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let t=0,i=this._pages.length;t<i;t++)this._pages[t].setPageLabel(this._pageLabels?.[t]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=0,this._currentScaleValue=null,this._pageLabels=null,this.#e=new IY(10),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=Promise.withResolvers(),this._onePageRenderedCapability=Promise.withResolvers(),this._pagesCapability=Promise.withResolvers(),this._scrollMode=ge.VERTICAL,this._previousScrollMode=ge.UNKNOWN,this._spreadMode=Ut.NONE,this.#w={previousPageNumber:1,scrollDown:!0,pages:[]},this.#h?.abort(),this.#h=null,this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#m?.remove(),this.#m=null,this.#B()}#S(){if(this._scrollMode!==ge.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const e=this._currentPageNumber,t=this.#w,i=this.viewer;if(i.textContent="",t.pages.length=0,this._spreadMode!==Ut.NONE||this.isInPresentationMode){const r=new Set,s=this._spreadMode-1;-1===s?r.add(e-1):e%2!==s?(r.add(e-1),r.add(e)):(r.add(e-2),r.add(e-1));const o=document.createElement("div");if(o.className="spread",this.isInPresentationMode){const a=document.createElement("div");a.className="dummyPage",o.append(a)}for(const a of r){const l=this._pages[a];l&&(o.append(l.div),t.pages.push(l))}i.append(o)}else{const r=this._pages[e-1];i.append(r.div),t.pages.push(r)}t.scrollDown=e>=t.previousPageNumber,t.previousPageNumber=e}_scrollUpdate(){0!==this.pagesCount&&this.update()}#P(e,t=null){const{div:i,id:r}=e;if(this._currentPageNumber!==r&&this._setCurrentPageNumber(r),this._scrollMode===ge.PAGE&&(this.#S(),this.update()),!t&&!this.isInPresentationMode){const s=i.offsetLeft+i.clientLeft,o=s+i.clientWidth,{scrollLeft:a,clientWidth:l}=this.container;(this._scrollMode===ge.HORIZONTAL||s<a||o>a+l)&&(t={left:0,top:0})}DP(i,t),!this._currentScaleValue&&this._location&&(this._location=null)}#N(e){return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15}#D(e,t,{noScroll:i=!1,preset:r=!1,drawingDelay:s=-1,origin:o=null}){if(this._currentScaleValue=t.toString(),this.#N(e))return void(r&&this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t}));this.viewer.style.setProperty("--scale-factor",e*rr.PDF_TO_CSS_UNITS);const a=s>=0&&s<1e3;this.refresh(!0,{scale:e,drawingDelay:a?s:-1}),a&&(this.#E=setTimeout(()=>{this.#E=null,this.refresh()},s));const l=this._currentScale;if(this._currentScale=e,!i){let u,c=this._currentPageNumber;if(this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(c=this._location.pageNumber,u=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:c,destArray:u,allowNegativeOffset:!0}),Array.isArray(o)){const d=e/l-1,[h,f]=this.containerTopLeft;this.container.scrollLeft+=(o[0]-f)*d,this.container.scrollTop+=(o[1]-h)*d}}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:r?t:void 0}),this.defaultRenderingQueue&&this.update()}get#_(){return this._spreadMode!==Ut.NONE&&this._scrollMode!==ge.HORIZONTAL?2:1}#x(e,t){let i=parseFloat(e);if(i>0)t.preset=!1,this.#D(i,e,t);else{const r=this._pages[this._currentPageNumber-1];if(!r)return;let s=40,o=5;this.isInPresentationMode?(s=o=4,this._spreadMode!==Ut.NONE&&(s*=2)):this.removePageBorders?s=o=0:this._scrollMode===ge.HORIZONTAL&&([s,o]=[o,s]);const a=(this.container.clientWidth-s)/r.width*r.scale/this.#_,l=(this.container.clientHeight-o)/r.height*r.scale;switch(e){case"page-actual":i=1;break;case"page-width":i=a;break;case"page-height":i=l;break;case"page-fit":i=Math.min(a,l);break;case"auto":const c=xP(r)?a:Math.min(l,a);i=Math.min(1.25,c);break;default:return void console.error(`#setScale: "${e}" is an unknown zoom value.`)}t.preset=!0,this.#D(i,e,t)}}#R(){const e=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#x(this._currentScaleValue,{noScroll:!0}),this.#P(e)}pageLabelToPageNumber(e){if(!this._pageLabels)return null;const t=this._pageLabels.indexOf(e);return t<0?null:t+1}scrollPageIntoView({pageNumber:e,destArray:t=null,allowNegativeOffset:i=!1,ignoreDestinationZoom:r=!1}){if(!this.pdfDocument)return;const s=Number.isInteger(e)&&this._pages[e-1];if(!s)return void console.error(`scrollPageIntoView: "${e}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!t)return void this._setCurrentPageNumber(e,!0);let u,d,o=0,a=0,l=0,c=0;const h=s.rotation%180!=0,f=(h?s.height:s.width)/s.scale/rr.PDF_TO_CSS_UNITS,p=(h?s.width:s.height)/s.scale/rr.PDF_TO_CSS_UNITS;let g=0;switch(t[1].name){case"XYZ":o=t[2],a=t[3],g=t[4],o=null!==o?o:0,a=null!==a?a:p;break;case"Fit":case"FitB":g="page-fit";break;case"FitH":case"FitBH":a=t[2],g="page-width",null===a&&this._location?(o=this._location.left,a=this._location.top):("number"!=typeof a||a<0)&&(a=p);break;case"FitV":case"FitBV":o=t[2],l=f,c=p,g="page-height";break;case"FitR":o=t[2],a=t[3],l=t[4]-o,c=t[5]-a;let _=40,b=5;this.removePageBorders&&(_=b=0),u=(this.container.clientWidth-_)/l/rr.PDF_TO_CSS_UNITS,d=(this.container.clientHeight-b)/c/rr.PDF_TO_CSS_UNITS,g=Math.min(Math.abs(u),Math.abs(d));break;default:return void console.error(`scrollPageIntoView: "${t[1].name}" is not a valid destination type.`)}if(r||(g&&g!==this._currentScale?this.currentScaleValue=g:0===this._currentScale&&(this.currentScaleValue="auto")),"page-fit"===g&&!t[4])return void this.#P(s);const v=[s.viewport.convertToViewportPoint(o,a),s.viewport.convertToViewportPoint(o+l,a+c)];let m=Math.min(v[0][0],v[1][0]),y=Math.min(v[0][1],v[1][1]);i||(m=Math.max(m,0),y=Math.max(y,0)),this.#P(s,{left:m,top:y})}_updateLocation(e){const t=this._currentScale,i=this._currentScaleValue,r=parseFloat(i)===t?Math.round(1e4*t)/100:i,s=e.id,a=this.container,l=this._pages[s-1].getPagePoint(a.scrollLeft-e.x,a.scrollTop-e.y),c=Math.round(l[0]),u=Math.round(l[1]);let d=`#page=${s}`;this.isInPresentationMode||(d+=`&zoom=${r},${c},${u}`),this._location={pageNumber:s,scale:r,top:u,left:c,rotation:this._pagesRotation,pdfOpenParams:d}}update(){const e=this._getVisiblePages(),t=e.views,i=t.length;if(0===i)return;const r=Math.max(10,2*i+1);this.#e.resize(r,e.ids),this.renderingQueue.renderHighestPriority(e);const s=this._spreadMode===Ut.NONE&&(this._scrollMode===ge.PAGE||this._scrollMode===ge.VERTICAL),o=this._currentPageNumber;let a=!1;for(const l of t){if(l.percent<100)break;if(l.id===o&&s){a=!0;break}}this._setCurrentPageNumber(a?o:t[0].id),this._updateLocation(e.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}#L(){const e=this._getVisiblePages(),t=[],{ids:i,views:r}=e;for(const s of r){const{view:o}=s;o.hasEditableAnnotations()?t.push(s):i.delete(o.id)}return 0===t.length?null:(this.renderingQueue.renderHighestPriority({first:t[0],last:t.at(-1),views:t,ids:i}),i)}containsElement(e){return this.container.contains(e)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return 3===this.presentationModeState}get isChangingPresentationMode(){return 2===this.presentationModeState}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const e=this._scrollMode===ge.PAGE?this.#w.pages:this._pages,t=this._scrollMode===ge.HORIZONTAL;return function x6({scrollEl:n,views:e,sortByVisibility:t=!1,horizontal:i=!1,rtl:r=!1}){const s=n.scrollTop,o=s+n.clientHeight,a=n.scrollLeft,l=a+n.clientWidth,d=[],h=new Set,f=e.length;let p=_c(e,i?function u(y){const _=y.div,b=_.offsetLeft+_.clientLeft;return r?b<l:b+_.clientWidth>a}:function c(y){const _=y.div;return _.offsetTop+_.clientTop+_.clientHeight>s});p>0&&p<f&&!i&&(p=function I6(n,e,t){if(n<2)return n;let i=e[n].div,r=i.offsetTop+i.clientTop;r>=t&&(i=e[n-1].div,r=i.offsetTop+i.clientTop);for(let s=n-2;s>=0&&(i=e[s].div,!(i.offsetTop+i.clientTop+i.clientHeight<=r));--s)n=s;return n}(p,e,s));let g=i?l:-1;for(let y=p;y<f;y++){const _=e[y],b=_.div,w=b.offsetLeft+b.clientLeft,A=b.offsetTop+b.clientTop,x=b.clientWidth,T=b.clientHeight,E=w+x,D=A+T;if(-1===g)D>=o&&(g=D);else if((i?w:A)>g)break;if(D<=s||A>=o||E<=a||w>=l)continue;const k=Math.max(0,s-A)+Math.max(0,D-o),de=(x-(Math.max(0,a-w)+Math.max(0,E-l)))/x;d.push({id:_.id,x:w,y:A,view:_,percent:(T-k)/T*de*100|0,widthPercent:100*de|0}),h.add(_.id)}const v=d[0],m=d.at(-1);return t&&d.sort(function(y,_){const b=y.percent-_.percent;return Math.abs(b)>.001?-b:y.id-_.id}),{first:v,last:m,views:d,ids:h}}({scrollEl:this.container,views:e,sortByVisibility:!0,horizontal:t,rtl:t&&this._isContainerRtl})}cleanup(){for(const e of this._pages)e.renderingState!==tt.FINISHED&&e.reset()}_cancelRendering(){for(const e of this._pages)e.cancelRendering()}#H(e){var t=this;return S(function*(){if(e.pdfPage)return e.pdfPage;try{const i=yield t.pdfDocument.getPage(e.id);return e.pdfPage||e.setPdfPage(i),i}catch(i){return console.error("Unable to get page for page view",i),null}})()}#j(e){if(1===e.first?.id)return!0;if(e.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case ge.PAGE:return this.#w.scrollDown;case ge.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(e){const t=e||this._getVisiblePages(),i=this.#j(t),s=this.renderingQueue.getHighestPriority(t,this._pages,i,this._spreadMode!==Ut.NONE&&this._scrollMode!==ge.HORIZONTAL);return!!s&&(this.#H(s).then(()=>{this.renderingQueue.renderView(s)}),!0)}get hasEqualPageSizes(){const e=this._pages[0];for(let t=1,i=this._pages.length;t<i;++t){const r=this._pages[t];if(r.width!==e.width||r.height!==e.height)return!1}return!0}getPagesOverview(){let e;return this._pages.map(t=>{const i=t.pdfPage.getViewport({scale:1}),r=xP(i);if(void 0===e)e=r;else if(this.enablePrintAutoRotate&&r!==e)return{width:i.height,height:i.width,rotation:(i.rotation-90)%360};return{width:i.width,height:i.height,rotation:i.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig({intent:"display"})):Promise.resolve(null)}set optionalContentConfigPromise(e){if(!(e instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${e}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=e,this.refresh(!1,{optionalContentConfigPromise:e}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e}))}get scrollMode(){return this._scrollMode}set scrollMode(e){if(this._scrollMode!==e){if(!function P6(n){return Number.isInteger(n)&&Object.values(ge).includes(n)&&n!==ge.UNKNOWN}(e))throw new Error(`Invalid scroll mode: ${e}`);this.pagesCount>1e4||(this._previousScrollMode=this._scrollMode,this._scrollMode=e,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(e=null){const t=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",t===ge.HORIZONTAL),i.classList.toggle("scrollWrapped",t===ge.WRAPPED),this.pdfDocument&&e&&(t===ge.PAGE?this.#S():this._previousScrollMode===ge.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#x(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(e){if(this._spreadMode!==e){if(!function R6(n){return Number.isInteger(n)&&Object.values(Ut).includes(n)&&n!==Ut.UNKNOWN}(e))throw new Error(`Invalid spread mode: ${e}`);this._spreadMode=e,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(e=null){if(!this.pdfDocument)return;const t=this.viewer,i=this._pages;if(this._scrollMode===ge.PAGE)this.#S();else if(t.textContent="",this._spreadMode===Ut.NONE)for(const r of this._pages)t.append(r.div);else{const r=this._spreadMode-1;let s=null;for(let o=0,a=i.length;o<a;++o)null===s?(s=document.createElement("div"),s.className="spread",t.append(s)):o%2===r&&(s=s.cloneNode(!1),t.append(s)),s.append(i[o].div)}e&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#x(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(e,!0),this.update())}_getPageAdvance(e,t=!1){switch(this._scrollMode){case ge.WRAPPED:{const{views:i}=this._getVisiblePages(),r=new Map;for(const{id:s,y:o,percent:a,widthPercent:l}of i){if(0===a||l<100)continue;let c=r.get(o);c||r.set(o,c||=[]),c.push(s)}for(const s of r.values()){const o=s.indexOf(e);if(-1===o)continue;const a=s.length;if(1===a)break;if(t)for(let l=o-1,c=0;l>=c;l--){const d=s[l+1]-1;if(s[l]<d)return e-d}else for(let l=o+1,c=a;l<c;l++){const d=s[l-1]+1;if(s[l]>d)return d-e}if(t){const l=s[0];if(l<e)return e-l+1}else{const l=s[a-1];if(l>e)return l-e+1}break}break}case ge.HORIZONTAL:break;case ge.PAGE:case ge.VERTICAL:{if(this._spreadMode===Ut.NONE)break;const i=this._spreadMode-1;if(t&&e%2!==i)break;if(!t&&e%2===i)break;const{views:r}=this._getVisiblePages(),s=t?e-1:e+1;for(const{id:o,percent:a,widthPercent:l}of r)if(o===s){if(a>0&&100===l)return 2;break}break}}return 1}nextPage(){const e=this._currentPageNumber,t=this.pagesCount;if(e>=t)return!1;const i=this._getPageAdvance(e,!1)||1;return this.currentPageNumber=Math.min(e+i,t),!0}previousPage(){const e=this._currentPageNumber;if(e<=1)return!1;const t=this._getPageAdvance(e,!0)||1;return this.currentPageNumber=Math.max(e-t,1),!0}updateScale({drawingDelay:e,scaleFactor:t=null,steps:i=null,origin:r}){if(null===i&&null===t)throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");if(!this.pdfDocument)return;let s=this._currentScale;if(t>0&&1!==t)s=Math.round(s*t*100)/100;else if(i){const o=i>0?1.1:1/1.1,a=i>0?Math.ceil:Math.floor;i=Math.abs(i);do{s=a(10*(s*o).toFixed(2))/10}while(--i>0)}s=Math.max(.1,Math.min(10,s)),this.#x(s,{noScroll:!1,drawingDelay:e,origin:r})}increaseScale(e={}){this.updateScale({...e,steps:e.steps??1})}decreaseScale(e={}){this.updateScale({...e,steps:-(e.steps??1)})}#F(e=this.container.clientHeight){e!==this.#b&&(this.#b=e,N6.setProperty("--viewer-container-height",`${e}px`))}#V(e){for(const t of e)if(t.target===this.container){this.#F(Math.floor(t.borderBoxSize[0].blockSize)),this.#l=null;break}}get containerTopLeft(){return this.#l||=[this.container.offsetTop,this.container.offsetLeft]}#B(){this.#f?.abort(),this.#f=null,null!==this.#g&&(clearTimeout(this.#g),this.#g=null)}get annotationEditorMode(){return this.#r?this.#i:In.DISABLE}set annotationEditorMode({mode:e,editId:t=null,isFromKeyboard:i=!1}){if(!this.#r)throw new Error("The AnnotationEditor is not enabled.");if(this.#i===e)return;if(!dR(e))throw new Error(`Invalid AnnotationEditor mode: ${e}`);if(!this.pdfDocument)return;e===In.STAMP&&this.#p?.loadModel("altText");const{eventBus:r}=this,s=()=>{this.#B(),this.#i=e,this.#r.updateMode(e,t,i),r.dispatch("annotationeditormodechanged",{source:this,mode:e})};if(e===In.NONE||this.#i===In.NONE){const o=e!==In.NONE;o||this.pdfDocument.annotationStorage.resetModifiedIds();for(const l of this._pages)l.toggleEditingMode(o);const a=this.#L();if(o&&a){this.#B(),this.#f=new AbortController;const l=AbortSignal.any([this.#h.signal,this.#f.signal]);return void r._on("pagerendered",({pageNumber:c})=>{a.delete(c),0===a.size&&(this.#g=setTimeout(s,0))},{signal:l})}}s()}refresh(e=!1,t=Object.create(null)){if(this.pdfDocument){for(const i of this._pages)i.update(t);null!==this.#E&&(clearTimeout(this.#E),this.#E=null),e||this.update()}}}class xY extends hR{_resetView(){super._resetView(),this._scrollMode=ge.PAGE,this._spreadMode=Ut.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}var TY=Ye.AnnotationLayerBuilder,PY=Ye.DownloadManager,RY=Ye.EventBus,NY=Ye.FindState,fR=Ye.GenericL10n,ha=Ye.LinkTarget,pR=Ye.PDFFindController,kY=Ye.PDFHistory,gR=Ye.PDFLinkService,OY=Ye.PDFPageView,FY=Ye.PDFScriptingManager,mR=Ye.PDFSinglePageViewer,vR=Ye.PDFViewer,LY=Ye.ProgressBar,VY=Ye.RenderingStates,BY=Ye.ScrollMode,jY=Ye.SimpleLinkService,HY=Ye.SpreadMode,UY=Ye.StructTreeLayerBuilder,$Y=Ye.TextLayerBuilder,zY=Ye.XfaLayerBuilder,WY=Ye.parseQueryString;const GY=["pdfViewerContainer"];function T_(n,e,t){n[e]=t}function Ac(){return typeof window>"u"}Ac()||T_(cr,"verbosity",mP.INFOS),typeof Promise.withResolvers>"u"&&window&&(window.Promise.withResolvers=()=>{let n,e;return{promise:new Promise((i,r)=>{n=i,e=r}),resolve:n,reject:e}});var P_=function(n){return n[n.DISABLED=0]="DISABLED",n[n.ENABLED=1]="ENABLED",n[n.ENHANCED=2]="ENHANCED",n}(P_||{});let KY=(()=>{class n{element;ngZone;static CSS_UNITS=96/72;static BORDER_WIDTH=9;pdfViewerContainer;eventBus;pdfLinkService;pdfFindController;pdfViewer;isVisible=!1;_cMapsUrl=`https://unpkg.com/pdfjs-dist@${kh}/cmaps/`;_imageResourcesPath=`https://unpkg.com/pdfjs-dist@${kh}/web/images/`;_renderText=!0;_renderTextMode=P_.ENABLED;_stickToPage=!1;_originalSize=!0;_pdf;_page=1;_zoom=1;_zoomScale="page-width";_rotation=0;_showAll=!0;_canAutoResize=!0;_fitToPage=!1;_externalLinkTarget="blank";_showBorders=!1;lastLoaded;_latestScrolledPage;pageScrollTimeout=null;isInitialized=!1;loadingTask;destroy$=new $t;afterLoadComplete=new Pe;pageRendered=new Pe;pageInitialized=new Pe;textLayerRendered=new Pe;onError=new Pe;onProgress=new Pe;pageChange=new Pe(!0);src;set cMapsUrl(t){this._cMapsUrl=t}set page(t){const i=t=parseInt(t,10)||1;this._pdf&&(t=this.getValidPageNumber(t)),this._page=t,i!==t&&this.pageChange.emit(t)}set renderText(t){this._renderText=t}set renderTextMode(t){this._renderTextMode=t}set originalSize(t){this._originalSize=t}set showAll(t){this._showAll=t}set stickToPage(t){this._stickToPage=t}set zoom(t){t<=0||(this._zoom=t)}get zoom(){return this._zoom}set zoomScale(t){this._zoomScale=t}get zoomScale(){return this._zoomScale}set rotation(t){"number"==typeof t&&t%90==0?this._rotation=t:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(t){this._externalLinkTarget=t}set autoresize(t){this._canAutoResize=!!t}set fitToPage(t){this._fitToPage=!!t}set showBorders(t){this._showBorders=!!t}static getLinkTarget(t){switch(t){case"blank":return ha.BLANK;case"none":return ha.NONE;case"self":return ha.SELF;case"parent":return ha.PARENT;case"top":return ha.TOP}return null}constructor(t,i){if(this.element=t,this.ngZone=i,Ac())return;let r;const s=kh;r=window[`pdfWorkerSrc${s}`]||(window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${s}/legacy/build/pdf.worker.min.mjs`),T_(gP,"workerSrc",r)}ngAfterViewChecked(){if(this.isInitialized)return;const t=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=t?!1===this.isVisible&&null!=t&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(t){if(!Ac()&&this.isVisible)if("src"in t)this.loadPDF();else if(this._pdf){if(("renderText"in t||"showAll"in t)&&(this.setupViewer(),this.resetPdfDocument()),"page"in t){const{page:i}=t;if(i.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){Mt(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe(Ge(this.destroy$)).subscribe({next:t=>{const i=this._rotation+t.rotate,r=t.getViewport({scale:this._zoom,rotation:i}).width*n.CSS_UNITS;let s=this._zoom,o=!0;if(!this._originalSize||this._fitToPage&&r>this.pdfViewerContainer.nativeElement.clientWidth){const a=t.getViewport({scale:1,rotation:i});s=this.getScale(a.width,a.height),o=!this._stickToPage}this.pdfViewer.currentScale=s,o&&this.pdfViewer.scrollPageIntoView({pageNumber:t.pageNumber,ignoreDestinationZoom:!0})}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=void 0),this.pdfViewer&&this.pdfViewer.setDocument(null),this.pdfLinkService&&this.pdfLinkService.setDocument(null,null),this.pdfFindController&&this.pdfFindController.setDocument(null)}getPDFLinkServiceConfig(){const t=n.getLinkTarget(this._externalLinkTarget);return t?{externalLinkTarget:t}:{}}initEventBus(){this.eventBus=function qY(n,e){const t=new n.EventBus;return function YY(n,e){et(n,"documentload").pipe(Ge(e)).subscribe(()=>{const t=document.createEvent("CustomEvent");t.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(t)}),et(n,"pagerendered").pipe(Ge(e)).subscribe(({pageNumber:t,cssTransform:i,source:r})=>{const s=document.createEvent("CustomEvent");s.initCustomEvent("pagerendered",!0,!0,{pageNumber:t,cssTransform:i}),r.div.dispatchEvent(s)}),et(n,"textlayerrendered").pipe(Ge(e)).subscribe(({pageNumber:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:t}),i.textLayerDiv?.dispatchEvent(r)}),et(n,"pagechanging").pipe(Ge(e)).subscribe(({pageNumber:t,source:i})=>{const r=document.createEvent("UIEvents");r.initEvent("pagechanging",!0,!0),r.pageNumber=t,i.container.dispatchEvent(r)}),et(n,"pagesinit").pipe(Ge(e)).subscribe(({source:t})=>{const i=document.createEvent("CustomEvent");i.initCustomEvent("pagesinit",!0,!0,null),t.container.dispatchEvent(i)}),et(n,"pagesloaded").pipe(Ge(e)).subscribe(({pagesCount:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("pagesloaded",!0,!0,{pagesCount:t}),i.container.dispatchEvent(r)}),et(n,"scalechange").pipe(Ge(e)).subscribe(({scale:t,presetValue:i,source:r})=>{const s=document.createEvent("UIEvents");s.initEvent("scalechange",!0,!0),s.scale=t,s.presetValue=i,r.container.dispatchEvent(s)}),et(n,"updateviewarea").pipe(Ge(e)).subscribe(({location:t,source:i})=>{const r=document.createEvent("UIEvents");r.initEvent("updateviewarea",!0,!0),r.location=t,i.container.dispatchEvent(r)}),et(n,"find").pipe(Ge(e)).subscribe(({source:t,type:i,query:r,phraseSearch:s,caseSensitive:o,highlightAll:a,findPrevious:l})=>{if(t===window)return;const c=document.createEvent("CustomEvent");c.initCustomEvent("find"+i,!0,!0,{query:r,phraseSearch:s,caseSensitive:o,highlightAll:a,findPrevious:l}),window.dispatchEvent(c)}),et(n,"attachmentsloaded").pipe(Ge(e)).subscribe(({attachmentsCount:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:t}),i.container.dispatchEvent(r)}),et(n,"sidebarviewchanged").pipe(Ge(e)).subscribe(({view:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("sidebarviewchanged",!0,!0,{view:t}),i.outerContainer.dispatchEvent(r)}),et(n,"pagemode").pipe(Ge(e)).subscribe(({mode:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("pagemode",!0,!0,{mode:t}),i.pdfViewer.container.dispatchEvent(r)}),et(n,"namedaction").pipe(Ge(e)).subscribe(({action:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("namedaction",!0,!0,{action:t}),i.pdfViewer.container.dispatchEvent(r)}),et(n,"presentationmodechanged").pipe(Ge(e)).subscribe(({active:t,switchInProgress:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("presentationmodechanged",!0,!0,{active:t,switchInProgress:i}),window.dispatchEvent(r)}),et(n,"outlineloaded").pipe(Ge(e)).subscribe(({outlineCount:t,source:i})=>{const r=document.createEvent("CustomEvent");r.initCustomEvent("outlineloaded",!0,!0,{outlineCount:t}),i.container.dispatchEvent(r)})}(t,e),t}(lf,this.destroy$),et(this.eventBus,"pagerendered").pipe(Ge(this.destroy$)).subscribe(t=>{this.pageRendered.emit(t)}),et(this.eventBus,"pagesinit").pipe(Ge(this.destroy$)).subscribe(t=>{this.pageInitialized.emit(t)}),et(this.eventBus,"pagechanging").pipe(Ge(this.destroy$)).subscribe(({pageNumber:t})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=t,this.pageChange.emit(t)},100)}),et(this.eventBus,"textlayerrendered").pipe(Ge(this.destroy$)).subscribe(t=>{this.textLayerRendered.emit(t)})}initPDFServices(){this.pdfLinkService=new gR({eventBus:this.eventBus,...this.getPDFLinkServiceConfig()}),this.pdfFindController=new pR({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:P_.DISABLED,findController:this.pdfFindController,l10n:new fR("en"),imageResourcesPath:this._imageResourcesPath,annotationEditorMode:pP.DISABLE}}setupViewer(){this.pdfViewer&&this.pdfViewer.setDocument(null),T_(cr,"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new vR(this.getPDFOptions()):new mR(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(t){return t<1?1:t>this._pdf.numPages?this._pdf.numPages:t}getDocumentParams(){const t=typeof this.src;if(!this._cMapsUrl)return this.src;const i={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0,isEvalSupported:!1};return"string"===t?i.url=this.src:"object"===t&&(void 0!==this.src.byteLength?i.data=this.src:Object.assign(i,this.src)),i}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=vP(this.getDocumentParams()),this.loadingTask.onProgress=i=>{this.onProgress.emit(i)};const t=this.src;Mt(this.loadingTask.promise).pipe(Ge(this.destroy$)).subscribe({next:i=>{this._pdf=i,this.lastLoaded=t,this.afterLoadComplete.emit(i),this.resetPdfDocument(),this.update()},error:i=>{this.lastLoaded=null,this.onError.emit(i)}})}update(){this.page=this._page,this.render()}render(){if(this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&this.pdfViewer.firstPagePromise?.then(()=>this.pdfViewer.pagesRotation=this._rotation),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.pdfViewer._pages?.length)this.updateSize();else{const t=this.pageInitialized.subscribe(()=>{this.updateSize(),t.unsubscribe()})}}getScale(t,i){const r=this._showBorders?2*n.BORDER_WIDTH:0,s=this.pdfViewerContainer.nativeElement.clientWidth-r,o=this.pdfViewerContainer.nativeElement.clientHeight-r;if(0===o||0===i||0===s||0===t)return 1;let a=1;switch(this._zoomScale){case"page-fit":a=Math.min(o/i,s/t);break;case"page-height":a=o/i;break;default:a=s/t}return this._zoom*a/n.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){Ac()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){Ac()||this.ngZone.runOutsideAngular(()=>{et(window,"resize").pipe(function kq(n,e=Nq){return Et((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}t.subscribe(ot(i,c=>{s=c,o=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}(100),Mr(()=>this._canAutoResize&&!!this._pdf),Ge(this.destroy$)).subscribe(()=>{this.updateSize()})})}static \u0275fac=function(i){return new(i||n)(N(an),N(be))};static \u0275cmp=So({type:n,selectors:[["pdf-viewer"]],viewQuery:function(i,r){if(1&i&&function Q0(n,e,t){HA(n,e,t)}(GY,5),2&i){let s;(function Gm(n){const e=C(),t=$(),i=dp();cu(i+1);const r=cm(t,i);if(n.dirty&&function tk(n){return!(4&~n[2])}(e)===!(2&~r.metadata.flags)){if(null===r.matches)n.reset([]);else{const s=zA(e,i);n.reset(s,zw),n.notifyOnChanges()}return!0}return!1})(s=function qm(){return function lm(n,e){return n[18].queries[e].queryList}(C(),dp())}())&&(r.pdfViewerContainer=s.first)}},inputs:{src:"src",cMapsUrl:[0,"c-maps-url","cMapsUrl"],page:"page",renderText:[0,"render-text","renderText"],renderTextMode:[0,"render-text-mode","renderTextMode"],originalSize:[0,"original-size","originalSize"],showAll:[0,"show-all","showAll"],stickToPage:[0,"stick-to-page","stickToPage"],zoom:"zoom",zoomScale:[0,"zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:[0,"external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:[0,"fit-to-page","fitToPage"],showBorders:[0,"show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},standalone:!1,features:[Rn],decls:3,vars:0,consts:[["pdfViewerContainer",""],[1,"ng2-pdf-viewer-container"],[1,"pdfViewer"]],template:function(i,r){1&i&&(ae(0,"div",1,0),Yi(2,"div",2),me())},styles:['.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--viewer-container-height: 0;--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width=\'1px\' height=\'1px\' xmlns=\'http://www.w3.org/2000/svg\'><rect width=\'100%\' height=\'100%\' style=\'fill:rgba(0, 54, 255, 0.13);\'/></svg>");--xfa-unfocused-field-background: var( --annotation-unfocused-field-background );--page-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=) 9 9 repeat;--scale-factor: 1;--focus-outline: solid 2px blue;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px;--editorInk-editing-cursor: pointer}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--page-border-image: none;--spreadHorizontalWrapped-margin-LR: 3.5px}}@media (forced-colors: active){[_nghost-%COMP%]    {--focus-outline: solid 3px ButtonText;--hover-outline: dashed 3px ButtonText}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;inset:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none;transform-origin:0 0}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;inset:100% 0 0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}@media (forced-colors: active){[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:rgb(255,255,0);box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid rgb(0,0,0)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none}[_nghost-%COMP%]     .annotationLayer .popupTriggerArea{height:100%;width:100%}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;font-size:calc(9px * var(--scale-factor));width:100%;min-width:calc(180px * var(--scale-factor));pointer-events:none}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;max-width:calc(180px * var(--scale-factor));background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));padding:calc(6px * var(--scale-factor));margin-left:calc(5px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .annotationLayer section svg{position:absolute;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]     .annotationLayer .annotationTextContent span{width:100%;display:inline-block}@media (forced-colors: active){[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid red}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}[_nghost-%COMP%]     [data-editor-rotation="90"]{transform:rotate(90deg)}[_nghost-%COMP%]     [data-editor-rotation="180"]{transform:rotate(180deg)}[_nghost-%COMP%]     [data-editor-rotation="270"]{transform:rotate(270deg)}[_nghost-%COMP%]     .annotationEditorLayer{background:transparent;position:absolute;top:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0}[_nghost-%COMP%]     .annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--scale-factor));resize:none;width:auto;height:auto;z-index:1;transform-origin:0 0;touch-action:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:focus{outline:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled{resize:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled.selectedEditor{resize:horizontal}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor:hover:not(.selectedEditor), [_nghost-%COMP%]     .annotationEditorLayer .inkEditor:hover:not(.selectedEditor){outline:var(--hover-outline)}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1;transform-origin:0 0;cursor:auto}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.editing{resize:none;cursor:var(--editorInk-editing-cursor),pointer}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none}[_nghost-%COMP%]     [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[_nghost-%COMP%]     [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[_nghost-%COMP%]     [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .canvasWrapper canvas{width:100%}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);border-image:var(--page-border-image);background-clip:content-box;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;inset:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}']})}return n})(),yR=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Mo({type:n});static \u0275inj=Ur({})}return n})();class OK{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let xR=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new OK(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),TR(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{TR(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(N(Zn),N(Gi),N(gv))};static \u0275dir=G({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function TR(n,e){n.context.$implicit=e.item}let PR=(()=>{class n{_viewContainer;_context=new FK;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){RR(t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){RR(t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(N(Zn),N(Gi))};static \u0275dir=G({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})();class FK{$implicit=null;ngIf=null}function RR(n,e){if(n&&!n.createEmbeddedView)throw new I(2020,!1)}let aX=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Mo({type:n});static \u0275inj=Ur({})}return n})();function lX(n,e){if(1&n&&(ae(0,"th"),Oe(1),me()),2&n){const t=e.$implicit;un(),Km(t)}}function cX(n,e){if(1&n){const t=Uo();ae(0,"td")(1,"input",22),Zm("ngModelChange",function(r){const s=qn(t).$implicit,o=Ft().$implicit;return function gS(n,e){const t=Gw(n);return t&&n.set(e),t}(o[s],r)||(o[s]=r),Yn(r)}),Le("change",function(){return qn(t),Yn(Ft(3).onCellEdit())}),me()()}if(2&n){const t=e.$implicit,i=Ft().$implicit;un(),Qm("ngModel",i[t])}}function uX(n,e){if(1&n){const t=Uo();ae(0,"tr"),Io(1,cX,2,1,"td",18),ae(2,"td")(3,"button",21),Le("click",function(){const r=qn(t).index,s=Ft(2);return Yn(s.removeRow(s.currentPage*s.pageSize+r))}),Oe(4,"\xd7"),me()()()}if(2&n){const t=Ft(2);un(),Jn("ngForOf",t.csvHeaders)}}function dX(n,e){if(1&n){const t=Uo();ae(0,"div",9)(1,"div",10)(2,"div",11)(3,"h2"),Oe(4,"CSV Editor"),me(),ae(5,"div",12)(6,"button",13),Le("click",function(){return qn(t),Yn(Ft().previousPage())}),Oe(7,"Previous"),me(),ae(8,"span"),Oe(9),me(),ae(10,"button",13),Le("click",function(){return qn(t),Yn(Ft().nextPage())}),Oe(11,"Next"),me()(),ae(12,"button",14),Le("click",function(){return qn(t),Yn(Ft().closeCsvModal())}),Oe(13,"\xd7"),me()(),ae(14,"div",15)(15,"div",16)(16,"table",17)(17,"thead")(18,"tr"),Io(19,lX,2,1,"th",18),ae(20,"th"),Oe(21,"Actions"),me()()(),ae(22,"tbody"),Io(23,uX,5,1,"tr",18),me()()(),ae(24,"div",19)(25,"button",20),Le("click",function(){return qn(t),Yn(Ft().addRow())}),Oe(26,"Add Row"),me(),ae(27,"button",20),Le("click",function(){return qn(t),Yn(Ft().saveChanges())}),Oe(28,"Save Changes"),me()()()()()}if(2&n){const t=Ft();un(6),Jn("disabled",0===t.currentPage),un(3),Xm("Showing ",t.getDisplayedRowRange()," of ",t.getTotalRows()," rows"),un(),Jn("disabled",(t.currentPage+1)*t.pageSize>=t.csvData.length),un(9),Jn("ngForOf",t.csvHeaders),un(4),Jn("ngForOf",t.displayedRows)}}function hX(n,e){if(1&n){const t=Uo();ae(0,"div",23)(1,"div",24)(2,"h2"),Oe(3,"PDF Preview"),me(),Yi(4,"pdf-viewer",25),ae(5,"button",26),Le("click",function(){return qn(t),Yn(Ft().closeModal())}),Oe(6,"Close"),me()()()}if(2&n){const t=Ft();un(4),Jn("src",t.pdfSrc)("render-text",!0)("zoom",t.scale)}}function fX(n,e){if(1&n){const t=Uo();ae(0,"div",27)(1,"div",28)(2,"h2"),Oe(3,"Unsupported file type"),me(),ae(4,"p"),Oe(5),me(),ae(6,"p"),Oe(7,"Only CSV and PDF is supported"),me(),ae(8,"button",26),Le("click",function(){return qn(t),Yn(Ft().closeModal())}),Oe(9,"Close"),me()()()}if(2&n){const t=Ft();un(5),_d('The file "',t.unsupportedFileName,'" is not supported.')}}const pX=[{path:"",component:(()=>{class n{router;constructor(t){this.router=t}onLogin(t){t.preventDefault(),this.router.navigate(["/home"])}static \u0275fac=function(i){return new(i||n)(N(Cs))};static \u0275cmp=So({type:n,selectors:[["app-login-compononet"]],decls:19,vars:0,consts:[[1,"MainLogin"],[1,"container"],[1,"logo-container"],["src","assets/circularoLogo.jpg","alt","Logo",1,"logo"],[1,"login-form",3,"submit"],[1,"input-container"],["type","text","id","username","name","username","required","","placeholder"," "],["for","username"],["type","password","id","password","name","password","required","","placeholder"," "],["for","password"]],template:function(i,r){1&i&&(ae(0,"section",0)(1,"div",1)(2,"div",2),Yi(3,"img",3),ae(4,"h1"),Oe(5,"Circularo"),me()(),ae(6,"form",4),Le("submit",function(o){return r.onLogin(o)}),ae(7,"h1"),Oe(8,"Login"),me(),ae(9,"div",5),Yi(10,"input",6),ae(11,"label",7),Oe(12,"Username"),me()(),ae(13,"div",5),Yi(14,"input",8),ae(15,"label",9),Oe(16,"Password"),me()(),ae(17,"button"),Oe(18,"Go to Login"),me()()()())},styles:[".MainLogin[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:10vh}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35%;height:35%}.logo-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.8rem;color:#2c0880;margin-left:20px}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;max-width:400px;margin-top:1vh}.login-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.3rem;color:#333;margin-bottom:4vh}.input-container[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 8px;font-size:16px;border:1px solid #ccc;border-radius:4px;background:none;outline:none}.input-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;left:10px;top:12px;color:#888;background:#fff;padding:0 4px;pointer-events:none;transition:.2s ease all}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%]{top:-10px;left:6px;font-size:12px;color:#1976d2;background:#fff}.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60%;padding:12px 8px;font-size:16px;border:1px solid #1976d2;border-radius:4px;background:#1976d2;color:#fff;cursor:pointer;transition:background .2s,color .2s;margin-top:2vh;margin-left:15px}.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background:#fff;color:#1976d2;border:1.5px solid #1976d2;outline:none}"]})}return n})()},{path:"home",component:(()=>{class n{ngZone;fileType="none";csvData=[];displayedRows=[];pdfSrc=null;unsupportedFileName="";scale=1;showCsvModal=!1;csvHeaders=[];pageSize=100;currentPage=0;totalPages=0;constructor(t){this.ngZone=t}ngOnInit(){this.calculateScale()}onResize(){this.calculateScale()}calculateScale(){const t=window.innerWidth;this.scale=t<=300?.4:t<=500?.5:t>=1200?1:.5+.5*(t-500)/700}onFileDropped(t){t.preventDefault();const i=t.dataTransfer?.files[0];i&&this.handleFile(i)}onFileSelected(t){const r=t.target.files?.[0];r&&this.handleFile(r)}handleFile(t){const i=t.name.split(".").pop()?.toLowerCase();if("csv"===i){this.showCsvModal=!0;const r=new FileReader;r.onload=()=>{this.ngZone.run(()=>{try{const o=r.result.trim().split("\n");o.length>0?(this.csvHeaders=o[0].split(",").map(a=>a.trim()),this.csvData=o.slice(1).map(a=>{const l=a.split(",").map(u=>u.trim()),c={};return this.csvHeaders.forEach((u,d)=>{c[u]=l[d]||""}),c}),0===this.csvData.length&&this.initializeEmptyCSV(),this.totalPages=Math.ceil(this.csvData.length/this.pageSize),this.currentPage=0,this.updateDisplayedData(),this.fileType="csv"):this.initializeEmptyCSV()}catch(s){console.error("Error processing CSV:",s),this.initializeEmptyCSV()}})},r.onerror=()=>{console.error("Error reading file"),this.initializeEmptyCSV()},r.readAsText(t)}else if("pdf"===i){this.fileType="pdf";const r=new FileReader;r.onload=()=>{this.pdfSrc=r.result},r.readAsDataURL(t)}else this.fileType="unsupported",this.unsupportedFileName=t.name}initializeEmptyCSV(){this.csvHeaders=["Column 1"],this.csvData=[{"Column 1":""}],this.displayedRows=this.csvData,this.fileType="csv",this.showCsvModal=!0,this.totalPages=1,this.currentPage=0}updateDisplayedData(){const t=this.currentPage*this.pageSize,i=Math.min(t+this.pageSize,this.csvData.length);this.displayedRows=this.csvData.slice(t,i)}nextPage(){this.currentPage<this.totalPages-1&&(this.currentPage++,this.updateDisplayedData())}previousPage(){this.currentPage>0&&(this.currentPage--,this.updateDisplayedData())}allowDrop(t){t.preventDefault()}closeModal(){this.fileType="none",this.showCsvModal=!1,this.csvData=[],this.pdfSrc=null}closeCsvModal(){this.showCsvModal=!1,this.csvData=[],this.displayedRows=[],this.csvHeaders=[]}onCellEdit(){}removeRow(t){this.csvData.splice(t,1),this.totalPages=Math.ceil(this.csvData.length/this.pageSize),this.currentPage>=this.totalPages&&(this.currentPage=Math.max(0,this.totalPages-1)),this.updateDisplayedData()}addRow(){const t={};this.csvHeaders.forEach(i=>{t[i]=""}),this.csvData.push(t),this.totalPages=Math.ceil(this.csvData.length/this.pageSize),this.updateDisplayedData()}saveChanges(){try{const i=[this.csvHeaders.join(","),...this.csvData.map(a=>this.csvHeaders.map(l=>a[l]).join(","))].join("\n"),r=new Blob([i],{type:"text/csv"}),s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download="exported.csv",o.click(),URL.revokeObjectURL(s)}catch(t){console.error("Error downloading CSV:",t)}}getDisplayedRowRange(){return`${this.currentPage*this.pageSize+1}-${Math.min((this.currentPage+1)*this.pageSize,this.csvData.length)}`}getTotalRows(){return this.csvData.length}static \u0275fac=function(i){return new(i||n)(N(be))};static \u0275cmp=So({type:n,selectors:[["app-home"]],hostBindings:function(i,r){1&i&&Le("resize",function(){return r.onResize()},0,gC)},decls:15,vars:3,consts:[[1,"homeBody"],[1,"container"],[1,"text-center"],[1,"drop-zone",3,"drop","dragover"],["for","fileInput",1,"file-label"],["id","fileInput","type","file","accept",".csv, .pdf",2,"display","none",3,"change"],["class","modal",4,"ngIf"],["class","file-view-modal",4,"ngIf"],["class","popup-overlay",4,"ngIf"],[1,"modal"],[1,"modal-content"],[1,"modal-header"],[1,"pagination-controls"],[1,"action-button",3,"click","disabled"],[1,"close-button",3,"click"],[1,"csv-container"],[1,"csv-table-wrapper"],[1,"csv-table"],[4,"ngFor","ngForOf"],[1,"csv-actions"],[1,"action-button",3,"click"],[1,"remove-row",3,"click"],[1,"csv-input",3,"ngModelChange","change","ngModel"],[1,"file-view-modal"],[1,"file-preview"],[1,"pdf-modal-viewer",3,"src","render-text","zoom"],[3,"click"],[1,"popup-overlay"],[1,"popup-message"]],template:function(i,r){1&i&&(ae(0,"section",0)(1,"div",1)(2,"h1",2),Oe(3,"File reader"),me()(),ae(4,"div",3),Le("drop",function(o){return r.onFileDropped(o)})("dragover",function(o){return r.allowDrop(o)}),ae(5,"h2"),Oe(6,"Drop a file"),me(),ae(7,"p"),Oe(8,"or"),me(),ae(9,"label",4),Oe(10,"choose a file"),me(),ae(11,"input",5),Le("change",function(o){return r.onFileSelected(o)}),me()(),Io(12,dX,29,6,"div",6)(13,hX,7,3,"div",7)(14,fX,10,1,"div",8),me()),2&i&&(un(12),Jn("ngIf",r.showCsvModal),un(),Jn("ngIf","pdf"===r.fileType),un(),Jn("ngIf","unsupported"===r.fileType))},dependencies:[aX,xR,PR,pT,eh,Fx,Ty,yR,KY],styles:['.homeBody[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.drop-zone[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:2px dashed #1976d2;border-radius:8px;padding:40px;text-align:center;margin:30px auto;width:80%;background:#f8f8f8;-webkit-user-select:none;user-select:none}.drop-zone[_ngcontent-%COMP%]:hover{background:#e7e6e6;border-color:#11508f}.drop-zone[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:2vh 0}.drop-zone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 2vh;padding:0;font-size:1.2rem;color:#9e9c9c}.drop-zone[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;padding:1% 2%;background:#1976d2;color:#fff;border-radius:4px;width:10%;min-width:100px;align-self:center}.modal[_ngcontent-%COMP%], .file-view-modal[_ngcontent-%COMP%], .popup-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0006;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%], .file-preview[_ngcontent-%COMP%], .popup-message[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 16px #0003}.modal-content[_ngcontent-%COMP%]{width:95%;max-width:1200px;height:90vh;display:flex;flex-direction:column;overflow:hidden}.modal-header[_ngcontent-%COMP%]{padding:16px 24px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #ddd;background:#fff}.close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;padding:4px 8px}.close-button[_ngcontent-%COMP%]:hover{color:#d32f2f}.csv-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;position:relative}.csv-table-wrapper[_ngcontent-%COMP%]{flex:1;overflow:auto;padding:16px;margin-bottom:60px}.csv-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;table-layout:fixed}.csv-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .csv-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;border:1px solid #ddd;min-width:150px;max-width:300px;word-wrap:break-word}.csv-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;z-index:1}.csv-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5f5f5;font-weight:700;text-align:left}.csv-input[_ngcontent-%COMP%]{width:100%;padding:8px;border:none;background:transparent;font-size:14px}.csv-input[_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;background:#f0f7ff}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:16px;margin:0 16px;flex:1}.pagination-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666;font-size:.9rem;white-space:nowrap}.pagination-controls[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{min-width:100px;padding:8px 16px}.action-button[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #1976d2;border-radius:4px;background:#fff;color:#1976d2;cursor:pointer;min-width:100px;font-weight:500;transition:all .2s ease}.action-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#1976d2;color:#fff}.action-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;border-color:#ccc;color:#999}.remove-row[_ngcontent-%COMP%]{background:none;border:none;color:#d32f2f;cursor:pointer;padding:4px 8px;font-size:18px;display:flex;align-items:center;justify-content:center;margin:0 auto;transition:all .2s ease}.remove-row[_ngcontent-%COMP%]:hover{background:#ffebee}.file-preview[_ngcontent-%COMP%]{padding:20px;text-align:center;min-width:300px;max-width:900px;width:90vw;height:90vh;display:flex;flex-direction:column;align-items:center;overflow:hidden;position:relative}.file-preview[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#b71c1c;font-size:2.2rem;margin:0 0 20px}.pdf-modal-viewer[_ngcontent-%COMP%]{flex:1;width:100%;height:calc(100% - 120px);overflow:auto;margin:10px 0}.file-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:50%;transform:translate(-50%);padding:8px 20px;border:none;border-radius:4px;background:#1976d2;color:#fff;font-size:1rem;cursor:pointer;transition:background .2s;z-index:2}.file-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#0d47a1}.popup-message[_ngcontent-%COMP%]{padding:32px 24px;text-align:center;min-width:300px}.popup-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#b71c1c}.popup-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:16px;padding:8px 20px;border:none;border-radius:4px;background:#1976d2;color:#fff;font-size:1rem;cursor:pointer;transition:background .2s}.popup-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#0d47a1}.csv-actions[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;display:flex;justify-content:center;gap:16px;padding:16px;background:#fff;width:100%;box-sizing:border-box;margin:0}@media (max-width: 700px){.pdf-modal-viewer[_ngcontent-%COMP%]   .textLayer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2vw!important}}@media (max-width: 500px){.pdf-modal-viewer[_ngcontent-%COMP%]   .textLayer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:3vw!important}.file-preview[_ngcontent-%COMP%]{width:100vw;height:100vh;padding:10px;border-radius:0}.file-preview[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin:5px 0}.file-preview[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{bottom:15px;width:calc(100% - 40px);max-width:200px}}@media (max-width: 300px){.scale[_ngcontent-%COMP%]{scale:.4}}@media (max-width: 570px){.pagination-controls[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{min-width:40px;padding:8px;font-size:0}.pagination-controls[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:first-child:before{content:"<";font-size:18px;font-weight:700}.pagination-controls[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:last-child:before{content:">";font-size:18px;font-weight:700}.pagination-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}}']})}return n})()}],gX={providers:[function n$(n){const e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,i=lv({ngZoneFactory:()=>{const r=cv(n);return r.scheduleInRootZone=t,r.shouldCoalesceEventChangeDetection&&Cn("NgZone_CoalesceEvent"),new be(r)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return hr([{provide:t$,useValue:!0},{provide:Oa,useValue:!1},i])}({eventCoalescing:!0}),function v8(n,...e){return hr([{provide:ly,multi:!0,useValue:n},[],{provide:Xo,useFactory:ax,deps:[Cs]},{provide:wl,multi:!0,useFactory:lx},e.map(t=>t.\u0275providers)])}(pX),Pb(pT,yR)]};(function qz(n,e){return x$({rootComponent:n,...zM(e)})})((()=>{class n{title="TestApp";static \u0275fac=function(i){return new(i||n)};static \u0275cmp=So({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){1&i&&Yi(0,"router-outlet")},dependencies:[Jv],encapsulation:2})}return n})(),gX).then(()=>{navigator}).catch(n=>console.error(n))}},af=>{af(af.s=99)}]);